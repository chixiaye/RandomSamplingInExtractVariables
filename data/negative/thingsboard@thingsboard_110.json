{
  "id" : 110,
  "expression" : "alarmUpdateMsg",
  "projectName" : "thingsboard@thingsboard",
  "commitID" : "7c2b3a9fbf84cc58aa7546029c5c7c10a662c55a",
  "filePath" : "/application/src/test/java/org/thingsboard/server/edge/imitator/EdgeImitator.java",
  "occurrences" : 1,
  "isArithmeticExpression" : 0,
  "isGetTypeMethod" : 0,
  "expressionList" : [ {
    "nodeContext" : "alarmUpdateMsg",
    "nodeType" : "SimpleName",
    "nodePosition" : {
      "charLength" : 14,
      "startLineNumber" : 218,
      "startColumnNumber" : 43,
      "endLineNumber" : 218,
      "endColumnNumber" : 57
    },
    "astNodeNumber" : 1,
    "astHeight" : 1,
    "parentDataList" : [ {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.MethodInvocation,arguments]",
      "nodePosition" : {
        "charLength" : 31,
        "startLineNumber" : 218,
        "startColumnNumber" : 27,
        "endLineNumber" : 218,
        "endColumnNumber" : 58
      },
      "nodeContext" : "saveDownlinkMsg(alarmUpdateMsg)",
      "nodeType" : "MethodInvocation",
      "astNodeNumber" : 3,
      "astHeight" : 2
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.ExpressionStatement,expression]",
      "nodePosition" : {
        "charLength" : 43,
        "startLineNumber" : 218,
        "startColumnNumber" : 16,
        "endLineNumber" : 218,
        "endColumnNumber" : 59
      },
      "nodeContext" : "result.add(saveDownlinkMsg(alarmUpdateMsg))",
      "nodeType" : "MethodInvocation",
      "astNodeNumber" : 6,
      "astHeight" : 3
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 44,
        "startLineNumber" : 218,
        "startColumnNumber" : 16,
        "endLineNumber" : 218,
        "endColumnNumber" : 60
      },
      "nodeContext" : "result.add(saveDownlinkMsg(alarmUpdateMsg));\n",
      "nodeType" : "ExpressionStatement",
      "astNodeNumber" : 7,
      "astHeight" : 4
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.EnhancedForStatement,body]",
      "nodePosition" : {
        "charLength" : 76,
        "startLineNumber" : 217,
        "startColumnNumber" : 86,
        "endLineNumber" : 219,
        "endColumnNumber" : 13
      },
      "nodeContext" : "{\n  result.add(saveDownlinkMsg(alarmUpdateMsg));\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 8,
      "astHeight" : 5
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 150,
        "startLineNumber" : 217,
        "startColumnNumber" : 12,
        "endLineNumber" : 219,
        "endColumnNumber" : 13
      },
      "nodeContext" : "for (AlarmUpdateMsg alarmUpdateMsg : downlinkMsg.getAlarmUpdateMsgList()) {\n  result.add(saveDownlinkMsg(alarmUpdateMsg));\n}\n",
      "nodeType" : "EnhancedForStatement",
      "astNodeNumber" : 16,
      "astHeight" : 6
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
      "nodePosition" : {
        "charLength" : 174,
        "startLineNumber" : 216,
        "startColumnNumber" : 54,
        "endLineNumber" : 220,
        "endColumnNumber" : 9
      },
      "nodeContext" : "{\n  for (  AlarmUpdateMsg alarmUpdateMsg : downlinkMsg.getAlarmUpdateMsgList()) {\n    result.add(saveDownlinkMsg(alarmUpdateMsg));\n  }\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 17,
      "astHeight" : 7
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 220,
        "startLineNumber" : 216,
        "startColumnNumber" : 8,
        "endLineNumber" : 220,
        "endColumnNumber" : 9
      },
      "nodeContext" : "if (downlinkMsg.getAlarmUpdateMsgCount() > 0) {\n  for (  AlarmUpdateMsg alarmUpdateMsg : downlinkMsg.getAlarmUpdateMsgList()) {\n    result.add(saveDownlinkMsg(alarmUpdateMsg));\n  }\n}\n",
      "nodeType" : "IfStatement",
      "astNodeNumber" : 23,
      "astHeight" : 8
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
      "nodePosition" : {
        "charLength" : 5347,
        "startLineNumber" : 169,
        "startColumnNumber" : 85,
        "endLineNumber" : 275,
        "endColumnNumber" : 5
      },
      "nodeContext" : "{\n  List<ListenableFuture<Void>> result=new ArrayList<>();\n  if (downlinkMsg.getAdminSettingsUpdateMsgCount() > 0) {\n    for (    AdminSettingsUpdateMsg adminSettingsUpdateMsg : downlinkMsg.getAdminSettingsUpdateMsgList()) {\n      result.add(saveDownlinkMsg(adminSettingsUpdateMsg));\n    }\n  }\n  if (downlinkMsg.getDeviceUpdateMsgCount() > 0) {\n    for (    DeviceUpdateMsg deviceUpdateMsg : downlinkMsg.getDeviceUpdateMsgList()) {\n      result.add(saveDownlinkMsg(deviceUpdateMsg));\n    }\n  }\n  if (downlinkMsg.getDeviceProfileUpdateMsgCount() > 0) {\n    for (    DeviceProfileUpdateMsg deviceProfileUpdateMsg : downlinkMsg.getDeviceProfileUpdateMsgList()) {\n      result.add(saveDownlinkMsg(deviceProfileUpdateMsg));\n    }\n  }\n  if (downlinkMsg.getDeviceCredentialsUpdateMsgCount() > 0) {\n    for (    DeviceCredentialsUpdateMsg deviceCredentialsUpdateMsg : downlinkMsg.getDeviceCredentialsUpdateMsgList()) {\n      result.add(saveDownlinkMsg(deviceCredentialsUpdateMsg));\n    }\n  }\n  if (downlinkMsg.getAssetUpdateMsgCount() > 0) {\n    for (    AssetUpdateMsg assetUpdateMsg : downlinkMsg.getAssetUpdateMsgList()) {\n      result.add(saveDownlinkMsg(assetUpdateMsg));\n    }\n  }\n  if (downlinkMsg.getRuleChainUpdateMsgCount() > 0) {\n    for (    RuleChainUpdateMsg ruleChainUpdateMsg : downlinkMsg.getRuleChainUpdateMsgList()) {\n      result.add(saveDownlinkMsg(ruleChainUpdateMsg));\n    }\n  }\n  if (downlinkMsg.getRuleChainMetadataUpdateMsgCount() > 0) {\n    for (    RuleChainMetadataUpdateMsg ruleChainMetadataUpdateMsg : downlinkMsg.getRuleChainMetadataUpdateMsgList()) {\n      result.add(saveDownlinkMsg(ruleChainMetadataUpdateMsg));\n    }\n  }\n  if (downlinkMsg.getDashboardUpdateMsgCount() > 0) {\n    for (    DashboardUpdateMsg dashboardUpdateMsg : downlinkMsg.getDashboardUpdateMsgList()) {\n      result.add(saveDownlinkMsg(dashboardUpdateMsg));\n    }\n  }\n  if (downlinkMsg.getRelationUpdateMsgCount() > 0) {\n    for (    RelationUpdateMsg relationUpdateMsg : downlinkMsg.getRelationUpdateMsgList()) {\n      result.add(saveDownlinkMsg(relationUpdateMsg));\n    }\n  }\n  if (downlinkMsg.getAlarmUpdateMsgCount() > 0) {\n    for (    AlarmUpdateMsg alarmUpdateMsg : downlinkMsg.getAlarmUpdateMsgList()) {\n      result.add(saveDownlinkMsg(alarmUpdateMsg));\n    }\n  }\n  if (downlinkMsg.getEntityDataCount() > 0) {\n    for (    EntityDataProto entityData : downlinkMsg.getEntityDataList()) {\n      if (randomFailuresOnTimeseriesDownlink) {\n        if (getRandomBoolean()) {\n          result.add(Futures.immediateFailedFuture(new RuntimeException(\"Random failure. This is expected error for edge test\")));\n        }\n else {\n          result.add(saveDownlinkMsg(entityData));\n        }\n      }\n else {\n        result.add(saveDownlinkMsg(entityData));\n      }\n    }\n  }\n  if (downlinkMsg.getEntityViewUpdateMsgCount() > 0) {\n    for (    EntityViewUpdateMsg entityViewUpdateMsg : downlinkMsg.getEntityViewUpdateMsgList()) {\n      result.add(saveDownlinkMsg(entityViewUpdateMsg));\n    }\n  }\n  if (downlinkMsg.getCustomerUpdateMsgCount() > 0) {\n    for (    CustomerUpdateMsg customerUpdateMsg : downlinkMsg.getCustomerUpdateMsgList()) {\n      result.add(saveDownlinkMsg(customerUpdateMsg));\n    }\n  }\n  if (downlinkMsg.getWidgetsBundleUpdateMsgCount() > 0) {\n    for (    WidgetsBundleUpdateMsg widgetsBundleUpdateMsg : downlinkMsg.getWidgetsBundleUpdateMsgList()) {\n      result.add(saveDownlinkMsg(widgetsBundleUpdateMsg));\n    }\n  }\n  if (downlinkMsg.getWidgetTypeUpdateMsgCount() > 0) {\n    for (    WidgetTypeUpdateMsg widgetTypeUpdateMsg : downlinkMsg.getWidgetTypeUpdateMsgList()) {\n      result.add(saveDownlinkMsg(widgetTypeUpdateMsg));\n    }\n  }\n  if (downlinkMsg.getUserUpdateMsgCount() > 0) {\n    for (    UserUpdateMsg userUpdateMsg : downlinkMsg.getUserUpdateMsgList()) {\n      result.add(saveDownlinkMsg(userUpdateMsg));\n    }\n  }\n  if (downlinkMsg.getUserCredentialsUpdateMsgCount() > 0) {\n    for (    UserCredentialsUpdateMsg userCredentialsUpdateMsg : downlinkMsg.getUserCredentialsUpdateMsgList()) {\n      result.add(saveDownlinkMsg(userCredentialsUpdateMsg));\n    }\n  }\n  if (downlinkMsg.getDeviceRpcCallMsgCount() > 0) {\n    for (    DeviceRpcCallMsg deviceRpcCallMsg : downlinkMsg.getDeviceRpcCallMsgList()) {\n      result.add(saveDownlinkMsg(deviceRpcCallMsg));\n    }\n  }\n  if (downlinkMsg.getDeviceCredentialsRequestMsgCount() > 0) {\n    for (    DeviceCredentialsRequestMsg deviceCredentialsRequestMsg : downlinkMsg.getDeviceCredentialsRequestMsgList()) {\n      result.add(saveDownlinkMsg(deviceCredentialsRequestMsg));\n    }\n  }\n  return Futures.allAsList(result);\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 485,
      "astHeight" : 15
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
      "nodePosition" : {
        "charLength" : 5428,
        "startLineNumber" : 169,
        "startColumnNumber" : 4,
        "endLineNumber" : 275,
        "endColumnNumber" : 5
      },
      "nodeContext" : "private ListenableFuture<List<Void>> processDownlinkMsg(DownlinkMsg downlinkMsg){\n  List<ListenableFuture<Void>> result=new ArrayList<>();\n  if (downlinkMsg.getAdminSettingsUpdateMsgCount() > 0) {\n    for (    AdminSettingsUpdateMsg adminSettingsUpdateMsg : downlinkMsg.getAdminSettingsUpdateMsgList()) {\n      result.add(saveDownlinkMsg(adminSettingsUpdateMsg));\n    }\n  }\n  if (downlinkMsg.getDeviceUpdateMsgCount() > 0) {\n    for (    DeviceUpdateMsg deviceUpdateMsg : downlinkMsg.getDeviceUpdateMsgList()) {\n      result.add(saveDownlinkMsg(deviceUpdateMsg));\n    }\n  }\n  if (downlinkMsg.getDeviceProfileUpdateMsgCount() > 0) {\n    for (    DeviceProfileUpdateMsg deviceProfileUpdateMsg : downlinkMsg.getDeviceProfileUpdateMsgList()) {\n      result.add(saveDownlinkMsg(deviceProfileUpdateMsg));\n    }\n  }\n  if (downlinkMsg.getDeviceCredentialsUpdateMsgCount() > 0) {\n    for (    DeviceCredentialsUpdateMsg deviceCredentialsUpdateMsg : downlinkMsg.getDeviceCredentialsUpdateMsgList()) {\n      result.add(saveDownlinkMsg(deviceCredentialsUpdateMsg));\n    }\n  }\n  if (downlinkMsg.getAssetUpdateMsgCount() > 0) {\n    for (    AssetUpdateMsg assetUpdateMsg : downlinkMsg.getAssetUpdateMsgList()) {\n      result.add(saveDownlinkMsg(assetUpdateMsg));\n    }\n  }\n  if (downlinkMsg.getRuleChainUpdateMsgCount() > 0) {\n    for (    RuleChainUpdateMsg ruleChainUpdateMsg : downlinkMsg.getRuleChainUpdateMsgList()) {\n      result.add(saveDownlinkMsg(ruleChainUpdateMsg));\n    }\n  }\n  if (downlinkMsg.getRuleChainMetadataUpdateMsgCount() > 0) {\n    for (    RuleChainMetadataUpdateMsg ruleChainMetadataUpdateMsg : downlinkMsg.getRuleChainMetadataUpdateMsgList()) {\n      result.add(saveDownlinkMsg(ruleChainMetadataUpdateMsg));\n    }\n  }\n  if (downlinkMsg.getDashboardUpdateMsgCount() > 0) {\n    for (    DashboardUpdateMsg dashboardUpdateMsg : downlinkMsg.getDashboardUpdateMsgList()) {\n      result.add(saveDownlinkMsg(dashboardUpdateMsg));\n    }\n  }\n  if (downlinkMsg.getRelationUpdateMsgCount() > 0) {\n    for (    RelationUpdateMsg relationUpdateMsg : downlinkMsg.getRelationUpdateMsgList()) {\n      result.add(saveDownlinkMsg(relationUpdateMsg));\n    }\n  }\n  if (downlinkMsg.getAlarmUpdateMsgCount() > 0) {\n    for (    AlarmUpdateMsg alarmUpdateMsg : downlinkMsg.getAlarmUpdateMsgList()) {\n      result.add(saveDownlinkMsg(alarmUpdateMsg));\n    }\n  }\n  if (downlinkMsg.getEntityDataCount() > 0) {\n    for (    EntityDataProto entityData : downlinkMsg.getEntityDataList()) {\n      if (randomFailuresOnTimeseriesDownlink) {\n        if (getRandomBoolean()) {\n          result.add(Futures.immediateFailedFuture(new RuntimeException(\"Random failure. This is expected error for edge test\")));\n        }\n else {\n          result.add(saveDownlinkMsg(entityData));\n        }\n      }\n else {\n        result.add(saveDownlinkMsg(entityData));\n      }\n    }\n  }\n  if (downlinkMsg.getEntityViewUpdateMsgCount() > 0) {\n    for (    EntityViewUpdateMsg entityViewUpdateMsg : downlinkMsg.getEntityViewUpdateMsgList()) {\n      result.add(saveDownlinkMsg(entityViewUpdateMsg));\n    }\n  }\n  if (downlinkMsg.getCustomerUpdateMsgCount() > 0) {\n    for (    CustomerUpdateMsg customerUpdateMsg : downlinkMsg.getCustomerUpdateMsgList()) {\n      result.add(saveDownlinkMsg(customerUpdateMsg));\n    }\n  }\n  if (downlinkMsg.getWidgetsBundleUpdateMsgCount() > 0) {\n    for (    WidgetsBundleUpdateMsg widgetsBundleUpdateMsg : downlinkMsg.getWidgetsBundleUpdateMsgList()) {\n      result.add(saveDownlinkMsg(widgetsBundleUpdateMsg));\n    }\n  }\n  if (downlinkMsg.getWidgetTypeUpdateMsgCount() > 0) {\n    for (    WidgetTypeUpdateMsg widgetTypeUpdateMsg : downlinkMsg.getWidgetTypeUpdateMsgList()) {\n      result.add(saveDownlinkMsg(widgetTypeUpdateMsg));\n    }\n  }\n  if (downlinkMsg.getUserUpdateMsgCount() > 0) {\n    for (    UserUpdateMsg userUpdateMsg : downlinkMsg.getUserUpdateMsgList()) {\n      result.add(saveDownlinkMsg(userUpdateMsg));\n    }\n  }\n  if (downlinkMsg.getUserCredentialsUpdateMsgCount() > 0) {\n    for (    UserCredentialsUpdateMsg userCredentialsUpdateMsg : downlinkMsg.getUserCredentialsUpdateMsgList()) {\n      result.add(saveDownlinkMsg(userCredentialsUpdateMsg));\n    }\n  }\n  if (downlinkMsg.getDeviceRpcCallMsgCount() > 0) {\n    for (    DeviceRpcCallMsg deviceRpcCallMsg : downlinkMsg.getDeviceRpcCallMsgList()) {\n      result.add(saveDownlinkMsg(deviceRpcCallMsg));\n    }\n  }\n  if (downlinkMsg.getDeviceCredentialsRequestMsgCount() > 0) {\n    for (    DeviceCredentialsRequestMsg deviceCredentialsRequestMsg : downlinkMsg.getDeviceCredentialsRequestMsgList()) {\n      result.add(saveDownlinkMsg(deviceCredentialsRequestMsg));\n    }\n  }\n  return Futures.allAsList(result);\n}\n",
      "nodeType" : "MethodDeclaration",
      "astNodeNumber" : 500,
      "astHeight" : 16
    } ],
    "currentLineData" : {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 44,
        "startLineNumber" : 218,
        "startColumnNumber" : 16,
        "endLineNumber" : 218,
        "endColumnNumber" : 60
      },
      "nodeContext" : "result.add(saveDownlinkMsg(alarmUpdateMsg));\n",
      "nodeType" : "ExpressionStatement",
      "astNodeNumber" : 7,
      "astHeight" : 4
    },
    "tokenLength" : 1,
    "type" : "org.thingsboard.server.edge.imitator.AlarmUpdateMsg"
  } ],
  "positionList" : [ {
    "charLength" : 14,
    "startLineNumber" : 218,
    "startColumnNumber" : 43,
    "endLineNumber" : 218,
    "endColumnNumber" : 57
  } ],
  "layoutRelationDataList" : [ ]
}