{
  "id" : 67,
  "expression" : "new MybatisPlusException(e)",
  "projectName" : "baomidou@mybatis-plus",
  "commitID" : "7815611a659da4cc8d5443f5ef4c10ca0d937582",
  "filePath" : "/mybatis-plus-core/src/main/java/com/baomidou/mybatisplus/plugins/SqlExplainInterceptor.java",
  "occurrences" : 1,
  "isArithmeticExpression" : 0,
  "isGetTypeMethod" : 0,
  "expressionList" : [ {
    "nodeContext" : "new MybatisPlusException(e)",
    "nodeType" : "ClassInstanceCreation",
    "nodePosition" : {
      "charLength" : 27,
      "startLineNumber" : 131,
      "startColumnNumber" : 18,
      "endLineNumber" : 131,
      "endColumnNumber" : 45
    },
    "astNodeNumber" : 4,
    "astHeight" : 3,
    "parentDataList" : [ {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 34,
        "startLineNumber" : 131,
        "startColumnNumber" : 12,
        "endLineNumber" : 131,
        "endColumnNumber" : 46
      },
      "nodeContext" : "throw new MybatisPlusException(e);\n",
      "nodeType" : "ThrowStatement",
      "astNodeNumber" : 5,
      "astHeight" : 4
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.CatchClause,body]",
      "nodePosition" : {
        "charLength" : 58,
        "startLineNumber" : 130,
        "startColumnNumber" : 30,
        "endLineNumber" : 132,
        "endColumnNumber" : 9
      },
      "nodeContext" : "{\n  throw new MybatisPlusException(e);\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 6,
      "astHeight" : 5
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.TryStatement,catchClauses]",
      "nodePosition" : {
        "charLength" : 78,
        "startLineNumber" : 130,
        "startColumnNumber" : 10,
        "endLineNumber" : 132,
        "endColumnNumber" : 9
      },
      "nodeContext" : "catch (Exception e) {\n  throw new MybatisPlusException(e);\n}\n",
      "nodeType" : "CatchClause",
      "astNodeNumber" : 11,
      "astHeight" : 6
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 662,
        "startLineNumber" : 116,
        "startColumnNumber" : 8,
        "endLineNumber" : 132,
        "endColumnNumber" : 9
      },
      "nodeContext" : "try (PreparedStatement stmt=connection.prepareStatement(sqlExplain)){\n  handler.setParameters(stmt);\n  try (ResultSet rs=stmt.executeQuery()){\n    while (rs.next()) {\n      if (!\"Using where\".equals(rs.getString(\"Extra\"))) {\n        if (this.isStopProceed()) {\n          throw new MybatisPlusException(\"Error: Full table operation is prohibited. SQL: \" + boundSql.getSql());\n        }\n        break;\n      }\n    }\n  }\n }\n catch (Exception e) {\n  throw new MybatisPlusException(e);\n}\n",
      "nodeType" : "TryStatement",
      "astNodeNumber" : 67,
      "astHeight" : 15
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
      "nodePosition" : {
        "charLength" : 1436,
        "startLineNumber" : 105,
        "startColumnNumber" : 71,
        "endLineNumber" : 133,
        "endColumnNumber" : 5
      },
      "nodeContext" : "{\n  StringBuilder explain=new StringBuilder(\"EXPLAIN \");\n  explain.append(boundSql.getSql());\n  String sqlExplain=explain.toString();\n  StaticSqlSource sqlsource=new StaticSqlSource(configuration,sqlExplain,boundSql.getParameterMappings());\n  MappedStatement.Builder builder=new MappedStatement.Builder(configuration,\"explain_sql\",sqlsource,SqlCommandType.SELECT);\n  builder.resultMaps(mappedStatement.getResultMaps()).resultSetType(mappedStatement.getResultSetType()).statementType(mappedStatement.getStatementType());\n  MappedStatement queryStatement=builder.build();\n  DefaultParameterHandler handler=new DefaultParameterHandler(queryStatement,parameter,boundSql);\n  try (PreparedStatement stmt=connection.prepareStatement(sqlExplain)){\n    handler.setParameters(stmt);\n    try (ResultSet rs=stmt.executeQuery()){\n      while (rs.next()) {\n        if (!\"Using where\".equals(rs.getString(\"Extra\"))) {\n          if (this.isStopProceed()) {\n            throw new MybatisPlusException(\"Error: Full table operation is prohibited. SQL: \" + boundSql.getSql());\n          }\n          break;\n        }\n      }\n    }\n   }\n catch (  Exception e) {\n    throw new MybatisPlusException(e);\n  }\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 159,
      "astHeight" : 16
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
      "nodePosition" : {
        "charLength" : 1848,
        "startLineNumber" : 91,
        "startColumnNumber" : 4,
        "endLineNumber" : 133,
        "endColumnNumber" : 5
      },
      "nodeContext" : "/** \n * <p> 判断是否执行 SQL </p>\n * @param configuration\n * @param mappedStatement\n * @param boundSql\n * @param connection\n * @param parameter\n * @return\n * @throws Exception\n */\nprotected void sqlExplain(Configuration configuration,MappedStatement mappedStatement,BoundSql boundSql,Connection connection,Object parameter){\n  StringBuilder explain=new StringBuilder(\"EXPLAIN \");\n  explain.append(boundSql.getSql());\n  String sqlExplain=explain.toString();\n  StaticSqlSource sqlsource=new StaticSqlSource(configuration,sqlExplain,boundSql.getParameterMappings());\n  MappedStatement.Builder builder=new MappedStatement.Builder(configuration,\"explain_sql\",sqlsource,SqlCommandType.SELECT);\n  builder.resultMaps(mappedStatement.getResultMaps()).resultSetType(mappedStatement.getResultSetType()).statementType(mappedStatement.getStatementType());\n  MappedStatement queryStatement=builder.build();\n  DefaultParameterHandler handler=new DefaultParameterHandler(queryStatement,parameter,boundSql);\n  try (PreparedStatement stmt=connection.prepareStatement(sqlExplain)){\n    handler.setParameters(stmt);\n    try (ResultSet rs=stmt.executeQuery()){\n      while (rs.next()) {\n        if (!\"Using where\".equals(rs.getString(\"Extra\"))) {\n          if (this.isStopProceed()) {\n            throw new MybatisPlusException(\"Error: Full table operation is prohibited. SQL: \" + boundSql.getSql());\n          }\n          break;\n        }\n      }\n    }\n   }\n catch (  Exception e) {\n    throw new MybatisPlusException(e);\n  }\n}\n",
      "nodeType" : "MethodDeclaration",
      "astNodeNumber" : 184,
      "astHeight" : 17
    } ],
    "currentLineData" : {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 34,
        "startLineNumber" : 131,
        "startColumnNumber" : 12,
        "endLineNumber" : 131,
        "endColumnNumber" : 46
      },
      "nodeContext" : "throw new MybatisPlusException(e);\n",
      "nodeType" : "ThrowStatement",
      "astNodeNumber" : 5,
      "astHeight" : 4
    },
    "tokenLength" : 2,
    "type" : "com.baomidou.mybatisplus.exceptions.MybatisPlusException"
  } ],
  "positionList" : [ {
    "charLength" : 27,
    "startLineNumber" : 131,
    "startColumnNumber" : 18,
    "endLineNumber" : 131,
    "endColumnNumber" : 45
  } ],
  "layoutRelationDataList" : [ ]
}