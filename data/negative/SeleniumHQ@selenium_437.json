{
  "id" : 437,
  "expression" : "StreamSupport.stream(ServiceLoader.load(WebDriverInfo.class).spliterator(),false)",
  "projectName" : "SeleniumHQ@selenium",
  "commitID" : "c146621f39dbec94114835aa1f6af6a0e1fa4cd0",
  "filePath" : "/java/server/src/org/openqa/selenium/grid/node/k8s/OneShotNode.java",
  "occurrences" : 1,
  "isArithmeticExpression" : 0,
  "isGetTypeMethod" : 0,
  "expressionList" : [ {
    "nodeContext" : "StreamSupport.stream(ServiceLoader.load(WebDriverInfo.class).spliterator(),false)",
    "nodeType" : "MethodInvocation",
    "nodePosition" : {
      "charLength" : 82,
      "startLineNumber" : 134,
      "startColumnNumber" : 31,
      "endLineNumber" : 134,
      "endColumnNumber" : 113
    },
    "astNodeNumber" : 12,
    "astHeight" : 6,
    "parentDataList" : [ {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.MethodInvocation,expression]",
      "nodePosition" : {
        "charLength" : 135,
        "startLineNumber" : 134,
        "startColumnNumber" : 31,
        "endLineNumber" : 135,
        "endColumnNumber" : 52
      },
      "nodeContext" : "StreamSupport.stream(ServiceLoader.load(WebDriverInfo.class).spliterator(),false).filter(info -> info.isSupporting(stereotype))",
      "nodeType" : "MethodInvocation",
      "astNodeNumber" : 21,
      "astHeight" : 7
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.MethodInvocation,expression]",
      "nodePosition" : {
        "charLength" : 244,
        "startLineNumber" : 134,
        "startColumnNumber" : 31,
        "endLineNumber" : 136,
        "endColumnNumber" : 108
      },
      "nodeContext" : "StreamSupport.stream(ServiceLoader.load(WebDriverInfo.class).spliterator(),false).filter(info -> info.isSupporting(stereotype)).filter(info -> driverName.map(name -> name.equals(info.getDisplayName().toLowerCase())).orElse(true))",
      "nodeType" : "MethodInvocation",
      "astNodeNumber" : 43,
      "astHeight" : 9
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.MethodInvocation,expression]",
      "nodePosition" : {
        "charLength" : 263,
        "startLineNumber" : 134,
        "startColumnNumber" : 31,
        "endLineNumber" : 137,
        "endColumnNumber" : 18
      },
      "nodeContext" : "StreamSupport.stream(ServiceLoader.load(WebDriverInfo.class).spliterator(),false).filter(info -> info.isSupporting(stereotype)).filter(info -> driverName.map(name -> name.equals(info.getDisplayName().toLowerCase())).orElse(true)).findFirst()",
      "nodeType" : "MethodInvocation",
      "astNodeNumber" : 45,
      "astHeight" : 10
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.VariableDeclarationFragment,initializer]",
      "nodePosition" : {
        "charLength" : 411,
        "startLineNumber" : 134,
        "startColumnNumber" : 31,
        "endLineNumber" : 139,
        "endColumnNumber" : 101
      },
      "nodeContext" : "StreamSupport.stream(ServiceLoader.load(WebDriverInfo.class).spliterator(),false).filter(info -> info.isSupporting(stereotype)).filter(info -> driverName.map(name -> name.equals(info.getDisplayName().toLowerCase())).orElse(true)).findFirst().orElseThrow(() -> new ConfigException(\"Unable to find matching driver for %s and %s\",stereotype,driverName.orElse(\"any driver\")))",
      "nodeType" : "MethodInvocation",
      "astNodeNumber" : 57,
      "astHeight" : 11
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.VariableDeclarationStatement,fragments]",
      "nodePosition" : {
        "charLength" : 424,
        "startLineNumber" : 134,
        "startColumnNumber" : 18,
        "endLineNumber" : 139,
        "endColumnNumber" : 101
      },
      "nodeContext" : "driverInfo=StreamSupport.stream(ServiceLoader.load(WebDriverInfo.class).spliterator(),false).filter(info -> info.isSupporting(stereotype)).filter(info -> driverName.map(name -> name.equals(info.getDisplayName().toLowerCase())).orElse(true)).findFirst().orElseThrow(() -> new ConfigException(\"Unable to find matching driver for %s and %s\",stereotype,driverName.orElse(\"any driver\")))",
      "nodeType" : "VariableDeclarationFragment",
      "astNodeNumber" : 59,
      "astHeight" : 12
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 439,
        "startLineNumber" : 134,
        "startColumnNumber" : 4,
        "endLineNumber" : 139,
        "endColumnNumber" : 102
      },
      "nodeContext" : "WebDriverInfo driverInfo=StreamSupport.stream(ServiceLoader.load(WebDriverInfo.class).spliterator(),false).filter(info -> info.isSupporting(stereotype)).filter(info -> driverName.map(name -> name.equals(info.getDisplayName().toLowerCase())).orElse(true)).findFirst().orElseThrow(() -> new ConfigException(\"Unable to find matching driver for %s and %s\",stereotype,driverName.orElse(\"any driver\")));\n",
      "nodeType" : "VariableDeclarationStatement",
      "astNodeNumber" : 62,
      "astHeight" : 13
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
      "nodePosition" : {
        "charLength" : 1716,
        "startLineNumber" : 117,
        "startColumnNumber" : 43,
        "endLineNumber" : 153,
        "endColumnNumber" : 3
      },
      "nodeContext" : "{\n  LoggingOptions loggingOptions=new LoggingOptions(config);\n  EventBusOptions eventOptions=new EventBusOptions(config);\n  BaseServerOptions serverOptions=new BaseServerOptions(config);\n  SecretOptions secretOptions=new SecretOptions(config);\n  NodeOptions nodeOptions=new NodeOptions(config);\n  Map<String,Object> raw=new Json().toType(config.get(\"k8s\",\"stereotype\").orElseThrow(() -> new ConfigException(\"Unable to find node stereotype\")),MAP_TYPE);\n  Capabilities stereotype=new ImmutableCapabilities(raw);\n  Optional<String> driverName=config.get(\"k8s\",\"driver_name\").map(String::toLowerCase);\n  WebDriverInfo driverInfo=StreamSupport.stream(ServiceLoader.load(WebDriverInfo.class).spliterator(),false).filter(info -> info.isSupporting(stereotype)).filter(info -> driverName.map(name -> name.equals(info.getDisplayName().toLowerCase())).orElse(true)).findFirst().orElseThrow(() -> new ConfigException(\"Unable to find matching driver for %s and %s\",stereotype,driverName.orElse(\"any driver\")));\n  LOG.info(String.format(\"Creating one-shot node for %s with stereotype %s\",driverInfo,stereotype));\n  LOG.info(\"Grid URI is: \" + nodeOptions.getPublicGridUri());\n  return new OneShotNode(loggingOptions.getTracer(),eventOptions.getEventBus(),secretOptions.getRegistrationSecret(),new NodeId(UUID.randomUUID()),serverOptions.getExternalUri(),nodeOptions.getPublicGridUri().orElseThrow(() -> new ConfigException(\"Unable to determine public grid address\")),stereotype,driverInfo);\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 216,
      "astHeight" : 14
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
      "nodePosition" : {
        "charLength" : 1757,
        "startLineNumber" : 117,
        "startColumnNumber" : 2,
        "endLineNumber" : 153,
        "endColumnNumber" : 3
      },
      "nodeContext" : "public static Node create(Config config){\n  LoggingOptions loggingOptions=new LoggingOptions(config);\n  EventBusOptions eventOptions=new EventBusOptions(config);\n  BaseServerOptions serverOptions=new BaseServerOptions(config);\n  SecretOptions secretOptions=new SecretOptions(config);\n  NodeOptions nodeOptions=new NodeOptions(config);\n  Map<String,Object> raw=new Json().toType(config.get(\"k8s\",\"stereotype\").orElseThrow(() -> new ConfigException(\"Unable to find node stereotype\")),MAP_TYPE);\n  Capabilities stereotype=new ImmutableCapabilities(raw);\n  Optional<String> driverName=config.get(\"k8s\",\"driver_name\").map(String::toLowerCase);\n  WebDriverInfo driverInfo=StreamSupport.stream(ServiceLoader.load(WebDriverInfo.class).spliterator(),false).filter(info -> info.isSupporting(stereotype)).filter(info -> driverName.map(name -> name.equals(info.getDisplayName().toLowerCase())).orElse(true)).findFirst().orElseThrow(() -> new ConfigException(\"Unable to find matching driver for %s and %s\",stereotype,driverName.orElse(\"any driver\")));\n  LOG.info(String.format(\"Creating one-shot node for %s with stereotype %s\",driverInfo,stereotype));\n  LOG.info(\"Grid URI is: \" + nodeOptions.getPublicGridUri());\n  return new OneShotNode(loggingOptions.getTracer(),eventOptions.getEventBus(),secretOptions.getRegistrationSecret(),new NodeId(UUID.randomUUID()),serverOptions.getExternalUri(),nodeOptions.getPublicGridUri().orElseThrow(() -> new ConfigException(\"Unable to determine public grid address\")),stereotype,driverInfo);\n}\n",
      "nodeType" : "MethodDeclaration",
      "astNodeNumber" : 226,
      "astHeight" : 15
    } ],
    "currentLineData" : {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.MethodInvocation,expression]",
      "nodePosition" : {
        "charLength" : 135,
        "startLineNumber" : 134,
        "startColumnNumber" : 31,
        "endLineNumber" : 135,
        "endColumnNumber" : 52
      },
      "nodeContext" : "StreamSupport.stream(ServiceLoader.load(WebDriverInfo.class).spliterator(),false).filter(info -> info.isSupporting(stereotype))",
      "nodeType" : "MethodInvocation",
      "astNodeNumber" : 21,
      "astHeight" : 7
    },
    "tokenLength" : 7,
    "type" : "java.util.stream.Stream<org.openqa.selenium.WebDriverInfo>"
  } ],
  "positionList" : [ {
    "charLength" : 82,
    "startLineNumber" : 134,
    "startColumnNumber" : 31,
    "endLineNumber" : 134,
    "endColumnNumber" : 113
  } ],
  "layoutRelationDataList" : [ ]
}