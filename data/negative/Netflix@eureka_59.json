{
  "id" : 59,
  "expression" : "!moveToState(STATES.Idle,STATES.Registered) && !moveToState(STATES.Registered,STATES.Registered)",
  "projectName" : "Netflix@eureka",
  "commitID" : "2f6d04dae7f6fca2a17e85fc53020e13272a79b2",
  "filePath" : "/eureka-write-server/src/main/java/com/netflix/eureka2/server/channel/RegistrationChannelImpl.java",
  "occurrences" : 1,
  "isArithmeticExpression" : 0,
  "isGetTypeMethod" : 0,
  "expressionList" : [ {
    "nodeContext" : "!moveToState(STATES.Idle,STATES.Registered) && !moveToState(STATES.Registered,STATES.Registered)",
    "nodeType" : "InfixExpression",
    "nodePosition" : {
      "charLength" : 110,
      "startLineNumber" : 128,
      "startColumnNumber" : 12,
      "endLineNumber" : 129,
      "endColumnNumber" : 62
    },
    "astNodeNumber" : 19,
    "astHeight" : 5,
    "parentDataList" : [ {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 814,
        "startLineNumber" : 128,
        "startColumnNumber" : 8,
        "endLineNumber" : 143,
        "endColumnNumber" : 9
      },
      "nodeContext" : "if (!moveToState(STATES.Idle,STATES.Registered) && !moveToState(STATES.Registered,STATES.Registered)) {\n  STATES currentState=state.get();\n  if (STATES.Closed == currentState) {\n    return Observable.error(CHANNEL_CLOSED_EXCEPTION);\n  }\n else {\n    Exception exception=new IllegalStateException(\"Unknown state error when registering, current state: \" + currentState);\n    return sendErrorOnTransport(exception).doOnTerminate(new Action0(){\n      @Override public void call(){\n        close();\n      }\n    }\n);\n  }\n}\n",
      "nodeType" : "IfStatement",
      "astNodeNumber" : 73,
      "astHeight" : 13
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
      "nodePosition" : {
        "charLength" : 2168,
        "startLineNumber" : 127,
        "startColumnNumber" : 70,
        "endLineNumber" : 175,
        "endColumnNumber" : 5
      },
      "nodeContext" : "{\n  if (!moveToState(STATES.Idle,STATES.Registered) && !moveToState(STATES.Registered,STATES.Registered)) {\n    STATES currentState=state.get();\n    if (STATES.Closed == currentState) {\n      return Observable.error(CHANNEL_CLOSED_EXCEPTION);\n    }\n else {\n      Exception exception=new IllegalStateException(\"Unknown state error when registering, current state: \" + currentState);\n      return sendErrorOnTransport(exception).doOnTerminate(new Action0(){\n        @Override public void call(){\n          close();\n        }\n      }\n);\n    }\n  }\n  logger.debug(\"Registering service in registry: {}\",instanceInfo);\n  instanceInfoRef.set(instanceInfo);\n  return registry.register(instanceInfo,selfSource).ignoreElements().cast(Void.class).doOnError(new Action1<Throwable>(){\n    @Override public void call(    Throwable throwable){\n      sendErrorOnTransport(throwable).doOnTerminate(new Action0(){\n        @Override public void call(){\n          close();\n        }\n      }\n);\n    }\n  }\n).doOnCompleted(new Action0(){\n    @Override public void call(){\n      sendAckOnTransport().doOnError(new Action1<Throwable>(){\n        @Override public void call(        Throwable throwable){\n          logger.warn(\"Failed to send ack for register operation for instanceInfo {}\",instanceInfo);\n        }\n      }\n);\n    }\n  }\n);\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 180,
      "astHeight" : 17
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
      "nodePosition" : {
        "charLength" : 2757,
        "startLineNumber" : 117,
        "startColumnNumber" : 4,
        "endLineNumber" : 175,
        "endColumnNumber" : 5
      },
      "nodeContext" : "/** \n * Cases: 1. channel state is Idle. Call register on the registry and 1a. if successful, ack on the channel. If the ack fails, we ignore the failure and let the client deal with it 2b. if unsuccessful, send error on the transport and close the channel (client need to reconnect back) 2. channel state is Registered. This is the same as case 1. 3. channel state is Closed. send ChannelClosedException on the transport and re-close the channel.\n */\n@Override public Observable<Void> register(final InstanceInfo instanceInfo){\n  if (!moveToState(STATES.Idle,STATES.Registered) && !moveToState(STATES.Registered,STATES.Registered)) {\n    STATES currentState=state.get();\n    if (STATES.Closed == currentState) {\n      return Observable.error(CHANNEL_CLOSED_EXCEPTION);\n    }\n else {\n      Exception exception=new IllegalStateException(\"Unknown state error when registering, current state: \" + currentState);\n      return sendErrorOnTransport(exception).doOnTerminate(new Action0(){\n        @Override public void call(){\n          close();\n        }\n      }\n);\n    }\n  }\n  logger.debug(\"Registering service in registry: {}\",instanceInfo);\n  instanceInfoRef.set(instanceInfo);\n  return registry.register(instanceInfo,selfSource).ignoreElements().cast(Void.class).doOnError(new Action1<Throwable>(){\n    @Override public void call(    Throwable throwable){\n      sendErrorOnTransport(throwable).doOnTerminate(new Action0(){\n        @Override public void call(){\n          close();\n        }\n      }\n);\n    }\n  }\n).doOnCompleted(new Action0(){\n    @Override public void call(){\n      sendAckOnTransport().doOnError(new Action1<Throwable>(){\n        @Override public void call(        Throwable throwable){\n          logger.warn(\"Failed to send ack for register operation for instanceInfo {}\",instanceInfo);\n        }\n      }\n);\n    }\n  }\n);\n}\n",
      "nodeType" : "MethodDeclaration",
      "astNodeNumber" : 196,
      "astHeight" : 18
    } ],
    "currentLineData" : {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 814,
        "startLineNumber" : 128,
        "startColumnNumber" : 8,
        "endLineNumber" : 143,
        "endColumnNumber" : 9
      },
      "nodeContext" : "if (!moveToState(STATES.Idle,STATES.Registered) && !moveToState(STATES.Registered,STATES.Registered)) {\n  STATES currentState=state.get();\n  if (STATES.Closed == currentState) {\n    return Observable.error(CHANNEL_CLOSED_EXCEPTION);\n  }\n else {\n    Exception exception=new IllegalStateException(\"Unknown state error when registering, current state: \" + currentState);\n    return sendErrorOnTransport(exception).doOnTerminate(new Action0(){\n      @Override public void call(){\n        close();\n      }\n    }\n);\n  }\n}\n",
      "nodeType" : "IfStatement",
      "astNodeNumber" : 73,
      "astHeight" : 13
    },
    "tokenLength" : 11,
    "type" : "boolean"
  } ],
  "positionList" : [ {
    "charLength" : 110,
    "startLineNumber" : 128,
    "startColumnNumber" : 12,
    "endLineNumber" : 129,
    "endColumnNumber" : 62
  } ],
  "layoutRelationDataList" : [ ]
}