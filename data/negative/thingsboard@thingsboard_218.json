{
  "id" : 218,
  "expression" : "REMOVE_RPC_TO_DEVICE_ACTOR_MSG",
  "projectName" : "thingsboard@thingsboard",
  "commitID" : "7c2b3a9fbf84cc58aa7546029c5c7c10a662c55a",
  "filePath" : "/application/src/main/java/org/thingsboard/server/actors/tenant/TenantActor.java",
  "occurrences" : 1,
  "isArithmeticExpression" : 0,
  "isGetTypeMethod" : 0,
  "expressionList" : [ {
    "nodeContext" : "REMOVE_RPC_TO_DEVICE_ACTOR_MSG",
    "nodeType" : "SimpleName",
    "nodePosition" : {
      "charLength" : 30,
      "startLineNumber" : 168,
      "startColumnNumber" : 17,
      "endLineNumber" : 168,
      "endColumnNumber" : 47
    },
    "astNodeNumber" : 1,
    "astHeight" : 1,
    "parentDataList" : [ {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.SwitchStatement,statements]",
      "nodePosition" : {
        "charLength" : 36,
        "startLineNumber" : 168,
        "startColumnNumber" : 12,
        "endLineNumber" : 168,
        "endColumnNumber" : 48
      },
      "nodeContext" : "case REMOVE_RPC_TO_DEVICE_ACTOR_MSG:",
      "nodeType" : "SwitchCase",
      "astNodeNumber" : 2,
      "astHeight" : 2
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 2244,
        "startLineNumber" : 135,
        "startColumnNumber" : 8,
        "endLineNumber" : 179,
        "endColumnNumber" : 9
      },
      "nodeContext" : "switch (msg.getMsgType()) {\ncase PARTITION_CHANGE_MSG:  PartitionChangeMsg partitionChangeMsg=(PartitionChangeMsg)msg;\nServiceType serviceType=partitionChangeMsg.getServiceQueueKey().getServiceType();\nif (ServiceType.TB_RULE_ENGINE.equals(serviceType)) {\nbroadcast(msg);\n}\n else if (ServiceType.TB_CORE.equals(serviceType)) {\nList<TbActorId> deviceActorIds=ctx.filterChildren(new TbEntityTypeActorIdPredicate(EntityType.DEVICE){\n  @Override protected boolean testEntityId(  EntityId entityId){\n    return super.testEntityId(entityId) && !isMyPartition(entityId);\n  }\n}\n);\ndeviceActorIds.forEach(id -> ctx.stop(id));\n}\nbreak;\ncase COMPONENT_LIFE_CYCLE_MSG:onComponentLifecycleMsg((ComponentLifecycleMsg)msg);\nbreak;\ncase QUEUE_TO_RULE_ENGINE_MSG:onQueueToRuleEngineMsg((QueueToRuleEngineMsg)msg);\nbreak;\ncase TRANSPORT_TO_DEVICE_ACTOR_MSG:onToDeviceActorMsg((DeviceAwareMsg)msg,false);\nbreak;\ncase DEVICE_ATTRIBUTES_UPDATE_TO_DEVICE_ACTOR_MSG:case DEVICE_CREDENTIALS_UPDATE_TO_DEVICE_ACTOR_MSG:case DEVICE_NAME_OR_TYPE_UPDATE_TO_DEVICE_ACTOR_MSG:case DEVICE_EDGE_UPDATE_TO_DEVICE_ACTOR_MSG:case DEVICE_RPC_REQUEST_TO_DEVICE_ACTOR_MSG:case DEVICE_RPC_RESPONSE_TO_DEVICE_ACTOR_MSG:case SERVER_RPC_RESPONSE_TO_DEVICE_ACTOR_MSG:case REMOVE_RPC_TO_DEVICE_ACTOR_MSG:onToDeviceActorMsg((DeviceAwareMsg)msg,true);\nbreak;\ncase RULE_CHAIN_TO_RULE_CHAIN_MSG:onRuleChainMsg((RuleChainAwareMsg)msg);\nbreak;\ncase EDGE_EVENT_UPDATE_TO_EDGE_SESSION_MSG:onToEdgeSessionMsg((EdgeEventUpdateMsg)msg);\nbreak;\ndefault:return false;\n}\n",
      "nodeType" : "SwitchStatement",
      "astNodeNumber" : 174,
      "astHeight" : 16
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
      "nodePosition" : {
        "charLength" : 2902,
        "startLineNumber" : 123,
        "startColumnNumber" : 48,
        "endLineNumber" : 181,
        "endColumnNumber" : 5
      },
      "nodeContext" : "{\n  if (cantFindTenant) {\n    log.info(\"[{}] Processing missing Tenant msg: {}\",tenantId,msg);\n    if (msg.getMsgType().equals(MsgType.QUEUE_TO_RULE_ENGINE_MSG)) {\n      QueueToRuleEngineMsg queueMsg=(QueueToRuleEngineMsg)msg;\n      queueMsg.getMsg().getCallback().onSuccess();\n    }\n else     if (msg.getMsgType().equals(MsgType.TRANSPORT_TO_DEVICE_ACTOR_MSG)) {\n      TransportToDeviceActorMsgWrapper transportMsg=(TransportToDeviceActorMsgWrapper)msg;\n      transportMsg.getCallback().onSuccess();\n    }\n    return true;\n  }\nswitch (msg.getMsgType()) {\ncase PARTITION_CHANGE_MSG:    PartitionChangeMsg partitionChangeMsg=(PartitionChangeMsg)msg;\n  ServiceType serviceType=partitionChangeMsg.getServiceQueueKey().getServiceType();\nif (ServiceType.TB_RULE_ENGINE.equals(serviceType)) {\n  broadcast(msg);\n}\n else if (ServiceType.TB_CORE.equals(serviceType)) {\n  List<TbActorId> deviceActorIds=ctx.filterChildren(new TbEntityTypeActorIdPredicate(EntityType.DEVICE){\n    @Override protected boolean testEntityId(    EntityId entityId){\n      return super.testEntityId(entityId) && !isMyPartition(entityId);\n    }\n  }\n);\n  deviceActorIds.forEach(id -> ctx.stop(id));\n}\nbreak;\ncase COMPONENT_LIFE_CYCLE_MSG:onComponentLifecycleMsg((ComponentLifecycleMsg)msg);\nbreak;\ncase QUEUE_TO_RULE_ENGINE_MSG:onQueueToRuleEngineMsg((QueueToRuleEngineMsg)msg);\nbreak;\ncase TRANSPORT_TO_DEVICE_ACTOR_MSG:onToDeviceActorMsg((DeviceAwareMsg)msg,false);\nbreak;\ncase DEVICE_ATTRIBUTES_UPDATE_TO_DEVICE_ACTOR_MSG:case DEVICE_CREDENTIALS_UPDATE_TO_DEVICE_ACTOR_MSG:case DEVICE_NAME_OR_TYPE_UPDATE_TO_DEVICE_ACTOR_MSG:case DEVICE_EDGE_UPDATE_TO_DEVICE_ACTOR_MSG:case DEVICE_RPC_REQUEST_TO_DEVICE_ACTOR_MSG:case DEVICE_RPC_RESPONSE_TO_DEVICE_ACTOR_MSG:case SERVER_RPC_RESPONSE_TO_DEVICE_ACTOR_MSG:case REMOVE_RPC_TO_DEVICE_ACTOR_MSG:onToDeviceActorMsg((DeviceAwareMsg)msg,true);\nbreak;\ncase RULE_CHAIN_TO_RULE_CHAIN_MSG:onRuleChainMsg((RuleChainAwareMsg)msg);\nbreak;\ncase EDGE_EVENT_UPDATE_TO_EDGE_SESSION_MSG:onToEdgeSessionMsg((EdgeEventUpdateMsg)msg);\nbreak;\ndefault:return false;\n}\nreturn true;\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 241,
      "astHeight" : 17
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
      "nodePosition" : {
        "charLength" : 2960,
        "startLineNumber" : 122,
        "startColumnNumber" : 4,
        "endLineNumber" : 181,
        "endColumnNumber" : 5
      },
      "nodeContext" : "@Override protected boolean doProcess(TbActorMsg msg){\n  if (cantFindTenant) {\n    log.info(\"[{}] Processing missing Tenant msg: {}\",tenantId,msg);\n    if (msg.getMsgType().equals(MsgType.QUEUE_TO_RULE_ENGINE_MSG)) {\n      QueueToRuleEngineMsg queueMsg=(QueueToRuleEngineMsg)msg;\n      queueMsg.getMsg().getCallback().onSuccess();\n    }\n else     if (msg.getMsgType().equals(MsgType.TRANSPORT_TO_DEVICE_ACTOR_MSG)) {\n      TransportToDeviceActorMsgWrapper transportMsg=(TransportToDeviceActorMsgWrapper)msg;\n      transportMsg.getCallback().onSuccess();\n    }\n    return true;\n  }\nswitch (msg.getMsgType()) {\ncase PARTITION_CHANGE_MSG:    PartitionChangeMsg partitionChangeMsg=(PartitionChangeMsg)msg;\n  ServiceType serviceType=partitionChangeMsg.getServiceQueueKey().getServiceType();\nif (ServiceType.TB_RULE_ENGINE.equals(serviceType)) {\n  broadcast(msg);\n}\n else if (ServiceType.TB_CORE.equals(serviceType)) {\n  List<TbActorId> deviceActorIds=ctx.filterChildren(new TbEntityTypeActorIdPredicate(EntityType.DEVICE){\n    @Override protected boolean testEntityId(    EntityId entityId){\n      return super.testEntityId(entityId) && !isMyPartition(entityId);\n    }\n  }\n);\n  deviceActorIds.forEach(id -> ctx.stop(id));\n}\nbreak;\ncase COMPONENT_LIFE_CYCLE_MSG:onComponentLifecycleMsg((ComponentLifecycleMsg)msg);\nbreak;\ncase QUEUE_TO_RULE_ENGINE_MSG:onQueueToRuleEngineMsg((QueueToRuleEngineMsg)msg);\nbreak;\ncase TRANSPORT_TO_DEVICE_ACTOR_MSG:onToDeviceActorMsg((DeviceAwareMsg)msg,false);\nbreak;\ncase DEVICE_ATTRIBUTES_UPDATE_TO_DEVICE_ACTOR_MSG:case DEVICE_CREDENTIALS_UPDATE_TO_DEVICE_ACTOR_MSG:case DEVICE_NAME_OR_TYPE_UPDATE_TO_DEVICE_ACTOR_MSG:case DEVICE_EDGE_UPDATE_TO_DEVICE_ACTOR_MSG:case DEVICE_RPC_REQUEST_TO_DEVICE_ACTOR_MSG:case DEVICE_RPC_RESPONSE_TO_DEVICE_ACTOR_MSG:case SERVER_RPC_RESPONSE_TO_DEVICE_ACTOR_MSG:case REMOVE_RPC_TO_DEVICE_ACTOR_MSG:onToDeviceActorMsg((DeviceAwareMsg)msg,true);\nbreak;\ncase RULE_CHAIN_TO_RULE_CHAIN_MSG:onRuleChainMsg((RuleChainAwareMsg)msg);\nbreak;\ncase EDGE_EVENT_UPDATE_TO_EDGE_SESSION_MSG:onToEdgeSessionMsg((EdgeEventUpdateMsg)msg);\nbreak;\ndefault:return false;\n}\nreturn true;\n}\n",
      "nodeType" : "MethodDeclaration",
      "astNodeNumber" : 251,
      "astHeight" : 18
    } ],
    "currentLineData" : {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.SwitchStatement,statements]",
      "nodePosition" : {
        "charLength" : 36,
        "startLineNumber" : 168,
        "startColumnNumber" : 12,
        "endLineNumber" : 168,
        "endColumnNumber" : 48
      },
      "nodeContext" : "case REMOVE_RPC_TO_DEVICE_ACTOR_MSG:",
      "nodeType" : "SwitchCase",
      "astNodeNumber" : 2,
      "astHeight" : 2
    },
    "tokenLength" : 6,
    "type" : "org.thingsboard.server.common.msg.MsgType"
  } ],
  "positionList" : [ {
    "charLength" : 30,
    "startLineNumber" : 168,
    "startColumnNumber" : 17,
    "endLineNumber" : 168,
    "endColumnNumber" : 47
  } ],
  "layoutRelationDataList" : [ ]
}