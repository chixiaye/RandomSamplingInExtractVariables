{
  "id" : 377,
  "expression" : "\"[db-error]\"",
  "projectName" : "alibaba@nacos",
  "commitID" : "4e7346db1d6657ffe07c96bebd2d348229c2812f",
  "filePath" : "/config/src/main/java/com/alibaba/nacos/config/server/service/capacity/TenantCapacityPersistService.java",
  "occurrences" : 1,
  "isArithmeticExpression" : 0,
  "isGetTypeMethod" : 0,
  "expressionList" : [ {
    "nodeContext" : "\"[db-error]\"",
    "nodeType" : "StringLiteral",
    "nodePosition" : {
      "charLength" : 12,
      "startLineNumber" : 122,
      "startColumnNumber" : 28,
      "endLineNumber" : 122,
      "endColumnNumber" : 40
    },
    "astNodeNumber" : 1,
    "astHeight" : 1,
    "parentDataList" : [ {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.ExpressionStatement,expression]",
      "nodePosition" : {
        "charLength" : 32,
        "startLineNumber" : 122,
        "startColumnNumber" : 12,
        "endLineNumber" : 122,
        "endColumnNumber" : 44
      },
      "nodeContext" : "FATAL_LOG.error(\"[db-error]\",e)",
      "nodeType" : "MethodInvocation",
      "astNodeNumber" : 5,
      "astHeight" : 2
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 33,
        "startLineNumber" : 122,
        "startColumnNumber" : 12,
        "endLineNumber" : 122,
        "endColumnNumber" : 45
      },
      "nodeContext" : "FATAL_LOG.error(\"[db-error]\",e);\n",
      "nodeType" : "ExpressionStatement",
      "astNodeNumber" : 6,
      "astHeight" : 3
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.CatchClause,body]",
      "nodePosition" : {
        "charLength" : 78,
        "startLineNumber" : 121,
        "startColumnNumber" : 53,
        "endLineNumber" : 124,
        "endColumnNumber" : 9
      },
      "nodeContext" : "{\n  FATAL_LOG.error(\"[db-error]\",e);\n  throw e;\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 9,
      "astHeight" : 4
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.TryStatement,catchClauses]",
      "nodePosition" : {
        "charLength" : 121,
        "startLineNumber" : 121,
        "startColumnNumber" : 10,
        "endLineNumber" : 124,
        "endColumnNumber" : 9
      },
      "nodeContext" : "catch (CannotGetJdbcConnectionException e) {\n  FATAL_LOG.error(\"[db-error]\",e);\n  throw e;\n}\n",
      "nodeType" : "CatchClause",
      "astNodeNumber" : 14,
      "astHeight" : 5
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 1334,
        "startLineNumber" : 101,
        "startColumnNumber" : 8,
        "endLineNumber" : 124,
        "endColumnNumber" : 9
      },
      "nodeContext" : "try {\n  GeneratedKeyHolder generatedKeyHolder=new GeneratedKeyHolder();\n  PreparedStatementCreator preparedStatementCreator=new PreparedStatementCreator(){\n    @Override public PreparedStatement createPreparedStatement(    Connection connection) throws SQLException {\n      PreparedStatement ps=connection.prepareStatement(sql,Statement.RETURN_GENERATED_KEYS);\n      String tenant=tenantCapacity.getTenant();\n      ps.setString(1,tenant);\n      ps.setInt(2,tenantCapacity.getQuota());\n      ps.setInt(3,tenantCapacity.getMaxSize());\n      ps.setInt(4,tenantCapacity.getMaxAggrCount());\n      ps.setInt(5,tenantCapacity.getMaxAggrSize());\n      ps.setTimestamp(6,tenantCapacity.getGmtCreate());\n      ps.setTimestamp(7,tenantCapacity.getGmtModified());\n      ps.setString(8,tenantCapacity.getTenant());\n      return ps;\n    }\n  }\n;\n  jdbcTemplate.update(preparedStatementCreator,generatedKeyHolder);\n  return generatedKeyHolder.getKey() != null;\n}\n catch (CannotGetJdbcConnectionException e) {\n  FATAL_LOG.error(\"[db-error]\",e);\n  throw e;\n}\n",
      "nodeType" : "TryStatement",
      "astNodeNumber" : 143,
      "astHeight" : 13
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
      "nodePosition" : {
        "charLength" : 1632,
        "startLineNumber" : 97,
        "startColumnNumber" : 77,
        "endLineNumber" : 126,
        "endColumnNumber" : 5
      },
      "nodeContext" : "{\n  final String sql=\"INSERT INTO tenant_capacity (tenant_id, quota, `usage`, `max_size`, max_aggr_count, max_aggr_size, \" + \"gmt_create, gmt_modified) SELECT ?, ?, count(*), ?, ?, ?, ?, ? FROM config_info WHERE tenant_id=?;\";\n  try {\n    GeneratedKeyHolder generatedKeyHolder=new GeneratedKeyHolder();\n    PreparedStatementCreator preparedStatementCreator=new PreparedStatementCreator(){\n      @Override public PreparedStatement createPreparedStatement(      Connection connection) throws SQLException {\n        PreparedStatement ps=connection.prepareStatement(sql,Statement.RETURN_GENERATED_KEYS);\n        String tenant=tenantCapacity.getTenant();\n        ps.setString(1,tenant);\n        ps.setInt(2,tenantCapacity.getQuota());\n        ps.setInt(3,tenantCapacity.getMaxSize());\n        ps.setInt(4,tenantCapacity.getMaxAggrCount());\n        ps.setInt(5,tenantCapacity.getMaxAggrSize());\n        ps.setTimestamp(6,tenantCapacity.getGmtCreate());\n        ps.setTimestamp(7,tenantCapacity.getGmtModified());\n        ps.setString(8,tenantCapacity.getTenant());\n        return ps;\n      }\n    }\n;\n    jdbcTemplate.update(preparedStatementCreator,generatedKeyHolder);\n    return generatedKeyHolder.getKey() != null;\n  }\n catch (  CannotGetJdbcConnectionException e) {\n    FATAL_LOG.error(\"[db-error]\",e);\n    throw e;\n  }\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 153,
      "astHeight" : 14
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
      "nodePosition" : {
        "charLength" : 1850,
        "startLineNumber" : 91,
        "startColumnNumber" : 4,
        "endLineNumber" : 126,
        "endColumnNumber" : 5
      },
      "nodeContext" : "/** \n * Insert TenantCapacity.\n * @param tenantCapacity tenantCapacity object instance.\n * @return operate result.\n */\npublic boolean insertTenantCapacity(final TenantCapacity tenantCapacity){\n  final String sql=\"INSERT INTO tenant_capacity (tenant_id, quota, `usage`, `max_size`, max_aggr_count, max_aggr_size, \" + \"gmt_create, gmt_modified) SELECT ?, ?, count(*), ?, ?, ?, ?, ? FROM config_info WHERE tenant_id=?;\";\n  try {\n    GeneratedKeyHolder generatedKeyHolder=new GeneratedKeyHolder();\n    PreparedStatementCreator preparedStatementCreator=new PreparedStatementCreator(){\n      @Override public PreparedStatement createPreparedStatement(      Connection connection) throws SQLException {\n        PreparedStatement ps=connection.prepareStatement(sql,Statement.RETURN_GENERATED_KEYS);\n        String tenant=tenantCapacity.getTenant();\n        ps.setString(1,tenant);\n        ps.setInt(2,tenantCapacity.getQuota());\n        ps.setInt(3,tenantCapacity.getMaxSize());\n        ps.setInt(4,tenantCapacity.getMaxAggrCount());\n        ps.setInt(5,tenantCapacity.getMaxAggrSize());\n        ps.setTimestamp(6,tenantCapacity.getGmtCreate());\n        ps.setTimestamp(7,tenantCapacity.getGmtModified());\n        ps.setString(8,tenantCapacity.getTenant());\n        return ps;\n      }\n    }\n;\n    jdbcTemplate.update(preparedStatementCreator,generatedKeyHolder);\n    return generatedKeyHolder.getKey() != null;\n  }\n catch (  CannotGetJdbcConnectionException e) {\n    FATAL_LOG.error(\"[db-error]\",e);\n    throw e;\n  }\n}\n",
      "nodeType" : "MethodDeclaration",
      "astNodeNumber" : 163,
      "astHeight" : 15
    } ],
    "currentLineData" : {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 33,
        "startLineNumber" : 122,
        "startColumnNumber" : 12,
        "endLineNumber" : 122,
        "endColumnNumber" : 45
      },
      "nodeContext" : "FATAL_LOG.error(\"[db-error]\",e);\n",
      "nodeType" : "ExpressionStatement",
      "astNodeNumber" : 6,
      "astHeight" : 3
    },
    "tokenLength" : 1,
    "type" : "java.lang.String"
  } ],
  "positionList" : [ {
    "charLength" : 12,
    "startLineNumber" : 122,
    "startColumnNumber" : 28,
    "endLineNumber" : 122,
    "endColumnNumber" : 40
  } ],
  "layoutRelationDataList" : [ ]
}