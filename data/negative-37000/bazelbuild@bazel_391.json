{
  "id" : 391,
  "expression" : "\"  return [CcInfo(linking_context=linking_context)]\"",
  "projectName" : "bazelbuild@bazel",
  "commitID" : "302971e1b3d803069ac949c0085c0d2a3916c8ab",
  "filePath" : "/src/test/java/com/google/devtools/build/lib/rules/android/AndroidBinaryTest.java",
  "occurrences" : 1,
  "isArithmeticExpression" : 0,
  "isGetTypeMethod" : 0,
  "expressionList" : [ {
    "nodeContext" : "\"  return [CcInfo(linking_context=linking_context)]\"",
    "nodeType" : "StringLiteral",
    "nodePosition" : {
      "charLength" : 52,
      "startLineNumber" : 431,
      "startColumnNumber" : 8,
      "endLineNumber" : 431,
      "endColumnNumber" : 60
    },
    "astNodeNumber" : 1,
    "astHeight" : 1,
    "parentDataList" : [ {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.ExpressionStatement,expression]",
      "nodePosition" : {
        "charLength" : 1474,
        "startLineNumber" : 410,
        "startColumnNumber" : 4,
        "endLineNumber" : 441,
        "endColumnNumber" : 13
      },
      "nodeContext" : "scratch.file(\"java/a/cc_info.bzl\",\"def _impl(ctx):\",\"  cc_toolchain = ctx.attr._cc_toolchain[cc_common.CcToolchainInfo]\",\"  feature_configuration = cc_common.configure_features(\",\"    ctx = ctx,\",\"    cc_toolchain = cc_toolchain,\",\"    requested_features = ctx.features,\",\"    unsupported_features = ctx.disabled_features,\",\"  )\",\"  library_to_link = cc_common.create_library_to_link(\",\"    actions=ctx.actions, feature_configuration=feature_configuration, \",\"    cc_toolchain = cc_toolchain, \",\"    static_library=ctx.file.static_library)\",\"  linker_input = cc_common.create_linker_input(\",\"    libraries = depset([library_to_link]),\",\"    user_link_flags=depset(ctx.attr.user_link_flags),\",\"    owner = ctx.label,\",\"  )\",\"  linking_context = cc_common.create_linking_context(\",\"    linker_inputs=depset([linker_input]))\",\"  return [CcInfo(linking_context=linking_context)]\",\"cc_info = rule(\",\"  implementation=_impl,\",\"  fragments = [\\\"cpp\\\"],\",\"  attrs = {\",\"    'srcs': attr.label_list(allow_files=True),\",\"    'user_link_flags' : attr.string_list(),\",\"    'static_library': attr.label(allow_single_file=True),\",\"    '_cc_toolchain': attr.label(default=Label('//java/a:alias'))\",\"  },\",\");\")",
      "nodeType" : "MethodInvocation",
      "astNodeNumber" : 34,
      "astHeight" : 2
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 1475,
        "startLineNumber" : 410,
        "startColumnNumber" : 4,
        "endLineNumber" : 441,
        "endColumnNumber" : 14
      },
      "nodeContext" : "scratch.file(\"java/a/cc_info.bzl\",\"def _impl(ctx):\",\"  cc_toolchain = ctx.attr._cc_toolchain[cc_common.CcToolchainInfo]\",\"  feature_configuration = cc_common.configure_features(\",\"    ctx = ctx,\",\"    cc_toolchain = cc_toolchain,\",\"    requested_features = ctx.features,\",\"    unsupported_features = ctx.disabled_features,\",\"  )\",\"  library_to_link = cc_common.create_library_to_link(\",\"    actions=ctx.actions, feature_configuration=feature_configuration, \",\"    cc_toolchain = cc_toolchain, \",\"    static_library=ctx.file.static_library)\",\"  linker_input = cc_common.create_linker_input(\",\"    libraries = depset([library_to_link]),\",\"    user_link_flags=depset(ctx.attr.user_link_flags),\",\"    owner = ctx.label,\",\"  )\",\"  linking_context = cc_common.create_linking_context(\",\"    linker_inputs=depset([linker_input]))\",\"  return [CcInfo(linking_context=linking_context)]\",\"cc_info = rule(\",\"  implementation=_impl,\",\"  fragments = [\\\"cpp\\\"],\",\"  attrs = {\",\"    'srcs': attr.label_list(allow_files=True),\",\"    'user_link_flags' : attr.string_list(),\",\"    'static_library': attr.label(allow_single_file=True),\",\"    '_cc_toolchain': attr.label(default=Label('//java/a:alias'))\",\"  },\",\");\");\n",
      "nodeType" : "ExpressionStatement",
      "astNodeNumber" : 35,
      "astHeight" : 3
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
      "nodePosition" : {
        "charLength" : 2534,
        "startLineNumber" : 409,
        "startColumnNumber" : 48,
        "endLineNumber" : 469,
        "endColumnNumber" : 3
      },
      "nodeContext" : "{\n  scratch.file(\"java/a/cc_info.bzl\",\"def _impl(ctx):\",\"  cc_toolchain = ctx.attr._cc_toolchain[cc_common.CcToolchainInfo]\",\"  feature_configuration = cc_common.configure_features(\",\"    ctx = ctx,\",\"    cc_toolchain = cc_toolchain,\",\"    requested_features = ctx.features,\",\"    unsupported_features = ctx.disabled_features,\",\"  )\",\"  library_to_link = cc_common.create_library_to_link(\",\"    actions=ctx.actions, feature_configuration=feature_configuration, \",\"    cc_toolchain = cc_toolchain, \",\"    static_library=ctx.file.static_library)\",\"  linker_input = cc_common.create_linker_input(\",\"    libraries = depset([library_to_link]),\",\"    user_link_flags=depset(ctx.attr.user_link_flags),\",\"    owner = ctx.label,\",\"  )\",\"  linking_context = cc_common.create_linking_context(\",\"    linker_inputs=depset([linker_input]))\",\"  return [CcInfo(linking_context=linking_context)]\",\"cc_info = rule(\",\"  implementation=_impl,\",\"  fragments = [\\\"cpp\\\"],\",\"  attrs = {\",\"    'srcs': attr.label_list(allow_files=True),\",\"    'user_link_flags' : attr.string_list(),\",\"    'static_library': attr.label(allow_single_file=True),\",\"    '_cc_toolchain': attr.label(default=Label('//java/a:alias'))\",\"  },\",\");\");\n  scratch.file(\"java/a/BUILD\",\"load('//java/a:cc_info.bzl', 'cc_info')\",\"cc_toolchain_alias(name='alias')\",\"android_binary(\",\"    name = 'a',\",\"    manifest = 'AndroidManifest.xml',\",\"    multidex = 'native',\",\"    deps = [':cc_info'],\",\")\",\"cc_info(\",\"    name = 'cc_info',\",\"    user_link_flags = ['-first_flag', '-second_flag'],\",\"    static_library = 'cc_info.a',\",\")\");\n  ConfiguredTarget app=getConfiguredTarget(\"//java/a:a\");\n  assertNoEvents();\n  Artifact copiedLib=getOnlyElement(getNativeLibrariesInApk(app));\n  Artifact linkedLib=getGeneratingAction(copiedLib).getInputs().getSingleton();\n  CppLinkAction action=(CppLinkAction)getGeneratingAction(linkedLib);\n  assertThat(action.getArguments()).containsAtLeast(\"-first_flag\",\"-second_flag\");\n  NestedSet<Artifact> linkInputs=action.getInputs();\n  assertThat(ActionsTestUtil.baseArtifactNames(linkInputs)).contains(\"cc_info.a\");\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 129,
      "astHeight" : 7
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
      "nodePosition" : {
        "charLength" : 2588,
        "startLineNumber" : 408,
        "startColumnNumber" : 2,
        "endLineNumber" : 469,
        "endColumnNumber" : 3
      },
      "nodeContext" : "@Test public void testCcInfoDeps() throws Exception {\n  scratch.file(\"java/a/cc_info.bzl\",\"def _impl(ctx):\",\"  cc_toolchain = ctx.attr._cc_toolchain[cc_common.CcToolchainInfo]\",\"  feature_configuration = cc_common.configure_features(\",\"    ctx = ctx,\",\"    cc_toolchain = cc_toolchain,\",\"    requested_features = ctx.features,\",\"    unsupported_features = ctx.disabled_features,\",\"  )\",\"  library_to_link = cc_common.create_library_to_link(\",\"    actions=ctx.actions, feature_configuration=feature_configuration, \",\"    cc_toolchain = cc_toolchain, \",\"    static_library=ctx.file.static_library)\",\"  linker_input = cc_common.create_linker_input(\",\"    libraries = depset([library_to_link]),\",\"    user_link_flags=depset(ctx.attr.user_link_flags),\",\"    owner = ctx.label,\",\"  )\",\"  linking_context = cc_common.create_linking_context(\",\"    linker_inputs=depset([linker_input]))\",\"  return [CcInfo(linking_context=linking_context)]\",\"cc_info = rule(\",\"  implementation=_impl,\",\"  fragments = [\\\"cpp\\\"],\",\"  attrs = {\",\"    'srcs': attr.label_list(allow_files=True),\",\"    'user_link_flags' : attr.string_list(),\",\"    'static_library': attr.label(allow_single_file=True),\",\"    '_cc_toolchain': attr.label(default=Label('//java/a:alias'))\",\"  },\",\");\");\n  scratch.file(\"java/a/BUILD\",\"load('//java/a:cc_info.bzl', 'cc_info')\",\"cc_toolchain_alias(name='alias')\",\"android_binary(\",\"    name = 'a',\",\"    manifest = 'AndroidManifest.xml',\",\"    multidex = 'native',\",\"    deps = [':cc_info'],\",\")\",\"cc_info(\",\"    name = 'cc_info',\",\"    user_link_flags = ['-first_flag', '-second_flag'],\",\"    static_library = 'cc_info.a',\",\")\");\n  ConfiguredTarget app=getConfiguredTarget(\"//java/a:a\");\n  assertNoEvents();\n  Artifact copiedLib=getOnlyElement(getNativeLibrariesInApk(app));\n  Artifact linkedLib=getGeneratingAction(copiedLib).getInputs().getSingleton();\n  CppLinkAction action=(CppLinkAction)getGeneratingAction(linkedLib);\n  assertThat(action.getArguments()).containsAtLeast(\"-first_flag\",\"-second_flag\");\n  NestedSet<Artifact> linkInputs=action.getInputs();\n  assertThat(ActionsTestUtil.baseArtifactNames(linkInputs)).contains(\"cc_info.a\");\n}\n",
      "nodeType" : "MethodDeclaration",
      "astNodeNumber" : 137,
      "astHeight" : 8
    } ],
    "currentLineData" : {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.ExpressionStatement,expression]",
      "nodePosition" : {
        "charLength" : 1474,
        "startLineNumber" : 410,
        "startColumnNumber" : 4,
        "endLineNumber" : 441,
        "endColumnNumber" : 13
      },
      "nodeContext" : "scratch.file(\"java/a/cc_info.bzl\",\"def _impl(ctx):\",\"  cc_toolchain = ctx.attr._cc_toolchain[cc_common.CcToolchainInfo]\",\"  feature_configuration = cc_common.configure_features(\",\"    ctx = ctx,\",\"    cc_toolchain = cc_toolchain,\",\"    requested_features = ctx.features,\",\"    unsupported_features = ctx.disabled_features,\",\"  )\",\"  library_to_link = cc_common.create_library_to_link(\",\"    actions=ctx.actions, feature_configuration=feature_configuration, \",\"    cc_toolchain = cc_toolchain, \",\"    static_library=ctx.file.static_library)\",\"  linker_input = cc_common.create_linker_input(\",\"    libraries = depset([library_to_link]),\",\"    user_link_flags=depset(ctx.attr.user_link_flags),\",\"    owner = ctx.label,\",\"  )\",\"  linking_context = cc_common.create_linking_context(\",\"    linker_inputs=depset([linker_input]))\",\"  return [CcInfo(linking_context=linking_context)]\",\"cc_info = rule(\",\"  implementation=_impl,\",\"  fragments = [\\\"cpp\\\"],\",\"  attrs = {\",\"    'srcs': attr.label_list(allow_files=True),\",\"    'user_link_flags' : attr.string_list(),\",\"    'static_library': attr.label(allow_single_file=True),\",\"    '_cc_toolchain': attr.label(default=Label('//java/a:alias'))\",\"  },\",\");\")",
      "nodeType" : "MethodInvocation",
      "astNodeNumber" : 34,
      "astHeight" : 2
    },
    "tokenLength" : 4,
    "type" : "java.lang.String"
  } ],
  "positionList" : [ {
    "charLength" : 52,
    "startLineNumber" : 431,
    "startColumnNumber" : 8,
    "endLineNumber" : 431,
    "endColumnNumber" : 60
  } ],
  "layoutRelationDataList" : [ ]
}