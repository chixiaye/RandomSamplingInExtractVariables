{
  "id" : 450,
  "expression" : "new ColumnStats(orderKey,13L,14L)",
  "projectName" : "prestodb@presto",
  "commitID" : "eff77883d0d24dc6022ecde252612d1430c9fbac",
  "filePath" : "/presto-raptor/src/test/java/com/facebook/presto/raptor/storage/organization/TestShardOrganizerUtil.java",
  "occurrences" : 1,
  "isArithmeticExpression" : 0,
  "isGetTypeMethod" : 0,
  "expressionList" : [ {
    "nodeContext" : "new ColumnStats(orderKey,13L,14L)",
    "nodeType" : "ClassInstanceCreation",
    "nodePosition" : {
      "charLength" : 35,
      "startLineNumber" : 133,
      "startColumnNumber" : 32,
      "endLineNumber" : 133,
      "endColumnNumber" : 67
    },
    "astNodeNumber" : 6,
    "astHeight" : 3,
    "parentDataList" : [ {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.MethodInvocation,arguments]",
      "nodePosition" : {
        "charLength" : 239,
        "startLineNumber" : 131,
        "startColumnNumber" : 24,
        "endLineNumber" : 134,
        "endColumnNumber" : 75
      },
      "nodeContext" : "ImmutableList.of(new ColumnStats(orderDate,day1,day1 + 10),new ColumnStats(orderKey,13L,14L),new ColumnStats(orderStatus,\"aaa\",\"abc\"))",
      "nodeType" : "MethodInvocation",
      "astNodeNumber" : 23,
      "astHeight" : 4
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.MethodInvocation,arguments]",
      "nodePosition" : {
        "charLength" : 351,
        "startLineNumber" : 128,
        "startColumnNumber" : 21,
        "endLineNumber" : 134,
        "endColumnNumber" : 76
      },
      "nodeContext" : "shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day1,day1 + 10),new ColumnStats(orderKey,13L,14L),new ColumnStats(orderStatus,\"aaa\",\"abc\")))",
      "nodeType" : "MethodInvocation",
      "astNodeNumber" : 29,
      "astHeight" : 5
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.MethodInvocation,expression]",
      "nodePosition" : {
        "charLength" : 408,
        "startLineNumber" : 127,
        "startColumnNumber" : 33,
        "endLineNumber" : 134,
        "endColumnNumber" : 77
      },
      "nodeContext" : "ImmutableList.<ShardInfo>builder().add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day1,day1 + 10),new ColumnStats(orderKey,13L,14L),new ColumnStats(orderStatus,\"aaa\",\"abc\"))))",
      "nodeType" : "MethodInvocation",
      "astNodeNumber" : 36,
      "astHeight" : 6
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.MethodInvocation,expression]",
      "nodePosition" : {
        "charLength" : 782,
        "startLineNumber" : 127,
        "startColumnNumber" : 33,
        "endLineNumber" : 141,
        "endColumnNumber" : 77
      },
      "nodeContext" : "ImmutableList.<ShardInfo>builder().add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day1,day1 + 10),new ColumnStats(orderKey,13L,14L),new ColumnStats(orderStatus,\"aaa\",\"abc\")))).add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day2,day2 + 100),new ColumnStats(orderKey,2L,20L),new ColumnStats(orderStatus,\"aaa\",\"abc\"))))",
      "nodeType" : "MethodInvocation",
      "astNodeNumber" : 67,
      "astHeight" : 7
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.MethodInvocation,expression]",
      "nodePosition" : {
        "charLength" : 1150,
        "startLineNumber" : 127,
        "startColumnNumber" : 33,
        "endLineNumber" : 148,
        "endColumnNumber" : 77
      },
      "nodeContext" : "ImmutableList.<ShardInfo>builder().add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day1,day1 + 10),new ColumnStats(orderKey,13L,14L),new ColumnStats(orderStatus,\"aaa\",\"abc\")))).add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day2,day2 + 100),new ColumnStats(orderKey,2L,20L),new ColumnStats(orderStatus,\"aaa\",\"abc\")))).add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day1,day2),new ColumnStats(orderKey,2L,11L),new ColumnStats(orderStatus,\"aaa\",\"abc\"))))",
      "nodeType" : "MethodInvocation",
      "astNodeNumber" : 96,
      "astHeight" : 8
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.MethodInvocation,expression]",
      "nodePosition" : {
        "charLength" : 1519,
        "startLineNumber" : 127,
        "startColumnNumber" : 33,
        "endLineNumber" : 155,
        "endColumnNumber" : 77
      },
      "nodeContext" : "ImmutableList.<ShardInfo>builder().add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day1,day1 + 10),new ColumnStats(orderKey,13L,14L),new ColumnStats(orderStatus,\"aaa\",\"abc\")))).add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day2,day2 + 100),new ColumnStats(orderKey,2L,20L),new ColumnStats(orderStatus,\"aaa\",\"abc\")))).add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day1,day2),new ColumnStats(orderKey,2L,11L),new ColumnStats(orderStatus,\"aaa\",\"abc\")))).add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day1,day2),new ColumnStats(orderKey,2L,null),new ColumnStats(orderStatus,\"aaa\",\"abc\"))))",
      "nodeType" : "MethodInvocation",
      "astNodeNumber" : 125,
      "astHeight" : 9
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.MethodInvocation,expression]",
      "nodePosition" : {
        "charLength" : 1887,
        "startLineNumber" : 127,
        "startColumnNumber" : 33,
        "endLineNumber" : 162,
        "endColumnNumber" : 77
      },
      "nodeContext" : "ImmutableList.<ShardInfo>builder().add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day1,day1 + 10),new ColumnStats(orderKey,13L,14L),new ColumnStats(orderStatus,\"aaa\",\"abc\")))).add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day2,day2 + 100),new ColumnStats(orderKey,2L,20L),new ColumnStats(orderStatus,\"aaa\",\"abc\")))).add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day1,day2),new ColumnStats(orderKey,2L,11L),new ColumnStats(orderStatus,\"aaa\",\"abc\")))).add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day1,day2),new ColumnStats(orderKey,2L,null),new ColumnStats(orderStatus,\"aaa\",\"abc\")))).add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day1,null),new ColumnStats(orderKey,2L,11L),new ColumnStats(orderStatus,\"aaa\",\"abc\"))))",
      "nodeType" : "MethodInvocation",
      "astNodeNumber" : 154,
      "astHeight" : 10
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.VariableDeclarationFragment,initializer]",
      "nodePosition" : {
        "charLength" : 1912,
        "startLineNumber" : 127,
        "startColumnNumber" : 33,
        "endLineNumber" : 163,
        "endColumnNumber" : 24
      },
      "nodeContext" : "ImmutableList.<ShardInfo>builder().add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day1,day1 + 10),new ColumnStats(orderKey,13L,14L),new ColumnStats(orderStatus,\"aaa\",\"abc\")))).add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day2,day2 + 100),new ColumnStats(orderKey,2L,20L),new ColumnStats(orderStatus,\"aaa\",\"abc\")))).add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day1,day2),new ColumnStats(orderKey,2L,11L),new ColumnStats(orderStatus,\"aaa\",\"abc\")))).add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day1,day2),new ColumnStats(orderKey,2L,null),new ColumnStats(orderStatus,\"aaa\",\"abc\")))).add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day1,null),new ColumnStats(orderKey,2L,11L),new ColumnStats(orderStatus,\"aaa\",\"abc\")))).build()",
      "nodeType" : "MethodInvocation",
      "astNodeNumber" : 156,
      "astHeight" : 11
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.VariableDeclarationStatement,fragments]",
      "nodePosition" : {
        "charLength" : 1921,
        "startLineNumber" : 127,
        "startColumnNumber" : 24,
        "endLineNumber" : 163,
        "endColumnNumber" : 24
      },
      "nodeContext" : "shards=ImmutableList.<ShardInfo>builder().add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day1,day1 + 10),new ColumnStats(orderKey,13L,14L),new ColumnStats(orderStatus,\"aaa\",\"abc\")))).add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day2,day2 + 100),new ColumnStats(orderKey,2L,20L),new ColumnStats(orderStatus,\"aaa\",\"abc\")))).add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day1,day2),new ColumnStats(orderKey,2L,11L),new ColumnStats(orderStatus,\"aaa\",\"abc\")))).add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day1,day2),new ColumnStats(orderKey,2L,null),new ColumnStats(orderStatus,\"aaa\",\"abc\")))).add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day1,null),new ColumnStats(orderKey,2L,11L),new ColumnStats(orderStatus,\"aaa\",\"abc\")))).build()",
      "nodeType" : "VariableDeclarationFragment",
      "astNodeNumber" : 158,
      "astHeight" : 12
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 1938,
        "startLineNumber" : 127,
        "startColumnNumber" : 8,
        "endLineNumber" : 163,
        "endColumnNumber" : 25
      },
      "nodeContext" : "List<ShardInfo> shards=ImmutableList.<ShardInfo>builder().add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day1,day1 + 10),new ColumnStats(orderKey,13L,14L),new ColumnStats(orderStatus,\"aaa\",\"abc\")))).add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day2,day2 + 100),new ColumnStats(orderKey,2L,20L),new ColumnStats(orderStatus,\"aaa\",\"abc\")))).add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day1,day2),new ColumnStats(orderKey,2L,11L),new ColumnStats(orderStatus,\"aaa\",\"abc\")))).add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day1,day2),new ColumnStats(orderKey,2L,null),new ColumnStats(orderStatus,\"aaa\",\"abc\")))).add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day1,null),new ColumnStats(orderKey,2L,11L),new ColumnStats(orderStatus,\"aaa\",\"abc\")))).build();\n",
      "nodeType" : "VariableDeclarationStatement",
      "astNodeNumber" : 164,
      "astHeight" : 13
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
      "nodePosition" : {
        "charLength" : 4335,
        "startLineNumber" : 105,
        "startColumnNumber" : 4,
        "endLineNumber" : 182,
        "endColumnNumber" : 5
      },
      "nodeContext" : "{\n  int day1=1111;\n  int day2=2222;\n  SchemaTableName tableName=new SchemaTableName(\"default\",\"test\");\n  metadata.createTable(SESSION,tableMetadataBuilder(tableName).column(\"orderkey\",BIGINT).column(\"orderdate\",DATE).column(\"orderstatus\",createVarcharType(3)).property(\"ordering\",ImmutableList.of(\"orderstatus\",\"orderkey\")).property(\"temporal_column\",\"orderdate\").property(\"table_supports_delta_delete\",false).build(),false);\n  Table tableInfo=metadataDao.getTableInformation(tableName.getSchemaName(),tableName.getTableName());\n  List<TableColumn> tableColumns=metadataDao.listTableColumns(tableInfo.getTableId());\n  Map<String,TableColumn> tableColumnMap=Maps.uniqueIndex(tableColumns,TableColumn::getColumnName);\n  long orderDate=tableColumnMap.get(\"orderdate\").getColumnId();\n  long orderKey=tableColumnMap.get(\"orderkey\").getColumnId();\n  long orderStatus=tableColumnMap.get(\"orderstatus\").getColumnId();\n  List<ShardInfo> shards=ImmutableList.<ShardInfo>builder().add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day1,day1 + 10),new ColumnStats(orderKey,13L,14L),new ColumnStats(orderStatus,\"aaa\",\"abc\")))).add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day2,day2 + 100),new ColumnStats(orderKey,2L,20L),new ColumnStats(orderStatus,\"aaa\",\"abc\")))).add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day1,day2),new ColumnStats(orderKey,2L,11L),new ColumnStats(orderStatus,\"aaa\",\"abc\")))).add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day1,day2),new ColumnStats(orderKey,2L,null),new ColumnStats(orderStatus,\"aaa\",\"abc\")))).add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day1,null),new ColumnStats(orderKey,2L,11L),new ColumnStats(orderStatus,\"aaa\",\"abc\")))).build();\n  long transactionId=shardManager.beginTransaction();\n  shardManager.commitShards(transactionId,tableInfo.getTableId(),COLUMNS,shards,Optional.empty(),0);\n  Set<ShardMetadata> shardMetadatas=shardManager.getNodeShardsAndDeltas(\"node1\");\n  Long temporalColumnId=metadataDao.getTemporalColumnId(tableInfo.getTableId());\n  TableColumn temporalColumn=metadataDao.getTableColumn(tableInfo.getTableId(),temporalColumnId);\n  Set<ShardIndexInfo> actual=ImmutableSet.copyOf(getOrganizationEligibleShards(dbi,metadataDao,tableInfo,shardMetadatas,false));\n  List<ShardIndexInfo> expected=getShardIndexInfo(tableInfo,shards,temporalColumn,Optional.empty());\n  assertEquals(actual,expected);\n  List<TableColumn> sortColumns=metadataDao.listSortColumns(tableInfo.getTableId());\n  Set<ShardIndexInfo> actualSortRange=ImmutableSet.copyOf(getOrganizationEligibleShards(dbi,metadataDao,tableInfo,shardMetadatas,true));\n  List<ShardIndexInfo> expectedSortRange=getShardIndexInfo(tableInfo,shards,temporalColumn,Optional.of(sortColumns));\n  assertEquals(actualSortRange,expectedSortRange);\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 450,
      "astHeight" : 14
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
      "nodePosition" : {
        "charLength" : 4397,
        "startLineNumber" : 103,
        "startColumnNumber" : 4,
        "endLineNumber" : 182,
        "endColumnNumber" : 5
      },
      "nodeContext" : "@Test public void testGetOrganizationEligibleShards(){\n  int day1=1111;\n  int day2=2222;\n  SchemaTableName tableName=new SchemaTableName(\"default\",\"test\");\n  metadata.createTable(SESSION,tableMetadataBuilder(tableName).column(\"orderkey\",BIGINT).column(\"orderdate\",DATE).column(\"orderstatus\",createVarcharType(3)).property(\"ordering\",ImmutableList.of(\"orderstatus\",\"orderkey\")).property(\"temporal_column\",\"orderdate\").property(\"table_supports_delta_delete\",false).build(),false);\n  Table tableInfo=metadataDao.getTableInformation(tableName.getSchemaName(),tableName.getTableName());\n  List<TableColumn> tableColumns=metadataDao.listTableColumns(tableInfo.getTableId());\n  Map<String,TableColumn> tableColumnMap=Maps.uniqueIndex(tableColumns,TableColumn::getColumnName);\n  long orderDate=tableColumnMap.get(\"orderdate\").getColumnId();\n  long orderKey=tableColumnMap.get(\"orderkey\").getColumnId();\n  long orderStatus=tableColumnMap.get(\"orderstatus\").getColumnId();\n  List<ShardInfo> shards=ImmutableList.<ShardInfo>builder().add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day1,day1 + 10),new ColumnStats(orderKey,13L,14L),new ColumnStats(orderStatus,\"aaa\",\"abc\")))).add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day2,day2 + 100),new ColumnStats(orderKey,2L,20L),new ColumnStats(orderStatus,\"aaa\",\"abc\")))).add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day1,day2),new ColumnStats(orderKey,2L,11L),new ColumnStats(orderStatus,\"aaa\",\"abc\")))).add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day1,day2),new ColumnStats(orderKey,2L,null),new ColumnStats(orderStatus,\"aaa\",\"abc\")))).add(shardInfo(UUID.randomUUID(),\"node1\",ImmutableList.of(new ColumnStats(orderDate,day1,null),new ColumnStats(orderKey,2L,11L),new ColumnStats(orderStatus,\"aaa\",\"abc\")))).build();\n  long transactionId=shardManager.beginTransaction();\n  shardManager.commitShards(transactionId,tableInfo.getTableId(),COLUMNS,shards,Optional.empty(),0);\n  Set<ShardMetadata> shardMetadatas=shardManager.getNodeShardsAndDeltas(\"node1\");\n  Long temporalColumnId=metadataDao.getTemporalColumnId(tableInfo.getTableId());\n  TableColumn temporalColumn=metadataDao.getTableColumn(tableInfo.getTableId(),temporalColumnId);\n  Set<ShardIndexInfo> actual=ImmutableSet.copyOf(getOrganizationEligibleShards(dbi,metadataDao,tableInfo,shardMetadatas,false));\n  List<ShardIndexInfo> expected=getShardIndexInfo(tableInfo,shards,temporalColumn,Optional.empty());\n  assertEquals(actual,expected);\n  List<TableColumn> sortColumns=metadataDao.listSortColumns(tableInfo.getTableId());\n  Set<ShardIndexInfo> actualSortRange=ImmutableSet.copyOf(getOrganizationEligibleShards(dbi,metadataDao,tableInfo,shardMetadatas,true));\n  List<ShardIndexInfo> expectedSortRange=getShardIndexInfo(tableInfo,shards,temporalColumn,Optional.of(sortColumns));\n  assertEquals(actualSortRange,expectedSortRange);\n}\n",
      "nodeType" : "MethodDeclaration",
      "astNodeNumber" : 456,
      "astHeight" : 15
    } ],
    "currentLineData" : {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.MethodInvocation,arguments]",
      "nodePosition" : {
        "charLength" : 239,
        "startLineNumber" : 131,
        "startColumnNumber" : 24,
        "endLineNumber" : 134,
        "endColumnNumber" : 75
      },
      "nodeContext" : "ImmutableList.of(new ColumnStats(orderDate,day1,day1 + 10),new ColumnStats(orderKey,13L,14L),new ColumnStats(orderStatus,\"aaa\",\"abc\"))",
      "nodeType" : "MethodInvocation",
      "astNodeNumber" : 23,
      "astHeight" : 4
    },
    "tokenLength" : 4,
    "type" : "com.facebook.presto.raptor.metadata.ColumnStats"
  } ],
  "positionList" : [ {
    "charLength" : 35,
    "startLineNumber" : 133,
    "startColumnNumber" : 32,
    "endLineNumber" : 133,
    "endColumnNumber" : 67
  } ],
  "layoutRelationDataList" : [ ]
}