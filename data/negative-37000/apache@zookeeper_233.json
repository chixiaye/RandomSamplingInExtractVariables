{
  "id" : 233,
  "expression" : "KeeperException.Code.NOCHILDRENFOREPHEMERALS",
  "projectName" : "apache@zookeeper",
  "commitID" : "c6639c9842973a7954c8baa412d6825cb833d51f",
  "filePath" : "/src/java/test/org/apache/zookeeper/test/ZooKeeperTestClient.java",
  "occurrences" : 1,
  "isArithmeticExpression" : 0,
  "isGetTypeMethod" : 0,
  "expressionList" : [ {
    "nodeContext" : "KeeperException.Code.NOCHILDRENFOREPHEMERALS",
    "nodeType" : "QualifiedName",
    "nodePosition" : {
      "charLength" : 44,
      "startLineNumber" : 234,
      "startColumnNumber" : 30,
      "endLineNumber" : 234,
      "endColumnNumber" : 74
    },
    "astNodeNumber" : 5,
    "astHeight" : 3,
    "parentDataList" : [ {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.VariableDeclarationFragment,initializer]",
      "nodePosition" : {
        "charLength" : 52,
        "startLineNumber" : 234,
        "startColumnNumber" : 22,
        "endLineNumber" : 234,
        "endColumnNumber" : 74
      },
      "nodeContext" : "code == KeeperException.Code.NOCHILDRENFOREPHEMERALS",
      "nodeType" : "InfixExpression",
      "astNodeNumber" : 7,
      "astHeight" : 4
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.VariableDeclarationStatement,fragments]",
      "nodePosition" : {
        "charLength" : 60,
        "startLineNumber" : 234,
        "startColumnNumber" : 14,
        "endLineNumber" : 234,
        "endColumnNumber" : 74
      },
      "nodeContext" : "valid=code == KeeperException.Code.NOCHILDRENFOREPHEMERALS",
      "nodeType" : "VariableDeclarationFragment",
      "astNodeNumber" : 9,
      "astHeight" : 5
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 69,
        "startLineNumber" : 234,
        "startColumnNumber" : 6,
        "endLineNumber" : 234,
        "endColumnNumber" : 75
      },
      "nodeContext" : "boolean valid=code == KeeperException.Code.NOCHILDRENFOREPHEMERALS;\n",
      "nodeType" : "VariableDeclarationStatement",
      "astNodeNumber" : 11,
      "astHeight" : 6
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.CatchClause,body]",
      "nodePosition" : {
        "charLength" : 205,
        "startLineNumber" : 232,
        "startColumnNumber" : 33,
        "endLineNumber" : 238,
        "endColumnNumber" : 5
      },
      "nodeContext" : "{\n  Code code=ke.code();\n  boolean valid=code == KeeperException.Code.NOCHILDRENFOREPHEMERALS;\n  if (!valid) {\n    fail(\"Unexpected exception code for createin: \" + code);\n  }\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 30,
      "astHeight" : 7
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.TryStatement,catchClauses]",
      "nodePosition" : {
        "charLength" : 232,
        "startLineNumber" : 232,
        "startColumnNumber" : 6,
        "endLineNumber" : 238,
        "endColumnNumber" : 5
      },
      "nodeContext" : "catch (KeeperException ke) {\n  Code code=ke.code();\n  boolean valid=code == KeeperException.Code.NOCHILDRENFOREPHEMERALS;\n  if (!valid) {\n    fail(\"Unexpected exception code for createin: \" + code);\n  }\n}\n",
      "nodeType" : "CatchClause",
      "astNodeNumber" : 35,
      "astHeight" : 8
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 412,
        "startLineNumber" : 229,
        "startColumnNumber" : 4,
        "endLineNumber" : 238,
        "endColumnNumber" : 5
      },
      "nodeContext" : "try {\n  zk.create(nodeName + \"/def\",null,Ids.OPEN_ACL_UNSAFE,CreateMode.EPHEMERAL);\n  fail(\"Should be impossible to create child off Ephemeral node \" + nodeName);\n}\n catch (KeeperException ke) {\n  Code code=ke.code();\n  boolean valid=code == KeeperException.Code.NOCHILDRENFOREPHEMERALS;\n  if (!valid) {\n    fail(\"Unexpected exception code for createin: \" + code);\n  }\n}\n",
      "nodeType" : "TryStatement",
      "astNodeNumber" : 57,
      "astHeight" : 9
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
      "nodePosition" : {
        "charLength" : 4858,
        "startLineNumber" : 160,
        "startColumnNumber" : 48,
        "endLineNumber" : 300,
        "endColumnNumber" : 3
      },
      "nodeContext" : "{\n  checkRoot();\n  String parentName=testDirOnZK;\n  String nodeName=parentName + \"/enode_abc\";\n  ZooKeeper zk=new ZooKeeper(hostPort,10000,this);\n  ZooKeeper zk_1=new ZooKeeper(hostPort,10000,this);\n  Stat stat=zk_1.exists(parentName,false);\n  if (stat == null) {\n    try {\n      zk.create(parentName,null,Ids.OPEN_ACL_UNSAFE,CreateMode.PERSISTENT);\n    }\n catch (    KeeperException ke) {\n      fail(\"Creating node \" + parentName + ke.getMessage());\n    }\n  }\n  stat=zk_1.exists(nodeName,false);\n  if (stat != null) {\n    try {\n      zk.delete(nodeName,-1);\n    }\n catch (    KeeperException ke) {\n      Code code=ke.code();\n      boolean valid=code == KeeperException.Code.NONODE || code == KeeperException.Code.NOTEMPTY;\n      if (!valid) {\n        fail(\"Unexpected exception code for delete: \" + ke.getMessage());\n      }\n    }\n  }\n  List<String> firstGen=zk_1.getChildren(parentName,true);\n  try {\n    zk.create(nodeName,null,Ids.OPEN_ACL_UNSAFE,CreateMode.EPHEMERAL);\n  }\n catch (  KeeperException ke) {\n    Code code=ke.code();\n    boolean valid=code == KeeperException.Code.NODEEXISTS;\n    if (!valid) {\n      fail(\"Unexpected exception code for createin: \" + ke.getMessage());\n    }\n  }\n  Thread.sleep(5000);\n  WatchedEvent event=events.poll(10,TimeUnit.SECONDS);\n  if (event == null) {\n    throw new IOException(\"No event was delivered promptly\");\n  }\n  if (event.getType() != EventType.NodeChildrenChanged || !event.getPath().equalsIgnoreCase(parentName)) {\n    fail(\"Unexpected event was delivered: \" + event.toString());\n  }\n  stat=zk_1.exists(nodeName,false);\n  if (stat == null) {\n    fail(\"node \" + nodeName + \" should exist\");\n  }\n  try {\n    zk.delete(parentName,-1);\n    fail(\"Should be impossible to delete a non-empty node \" + parentName);\n  }\n catch (  KeeperException ke) {\n    Code code=ke.code();\n    boolean valid=code == KeeperException.Code.NOTEMPTY;\n    if (!valid) {\n      fail(\"Unexpected exception code for delete: \" + code);\n    }\n  }\n  try {\n    zk.create(nodeName + \"/def\",null,Ids.OPEN_ACL_UNSAFE,CreateMode.EPHEMERAL);\n    fail(\"Should be impossible to create child off Ephemeral node \" + nodeName);\n  }\n catch (  KeeperException ke) {\n    Code code=ke.code();\n    boolean valid=code == KeeperException.Code.NOCHILDRENFOREPHEMERALS;\n    if (!valid) {\n      fail(\"Unexpected exception code for createin: \" + code);\n    }\n  }\n  try {\n    List<String> children=zk.getChildren(nodeName,false);\n    if (children.size() > 0) {\n      fail(\"ephemeral node \" + nodeName + \" should not have children\");\n    }\n  }\n catch (  KeeperException ke) {\n    Code code=ke.code();\n    boolean valid=code == KeeperException.Code.NONODE;\n    if (!valid) {\n      fail(\"Unexpected exception code for createin: \" + code);\n    }\n  }\n  firstGen=zk_1.getChildren(parentName,true);\n  stat=zk_1.exists(nodeName,true);\n  if (stat == null) {\n    fail(\"node \" + nodeName + \" should exist\");\n  }\n  System.out.println(\"session id of zk: \" + zk.getSessionId());\n  System.out.println(\"session id of zk_1: \" + zk_1.getSessionId());\n  zk.close();\n  stat=zk_1.exists(\"nosuchnode\",false);\n  event=this.getEvent(10);\n  if (event == null) {\n    throw new AssertionFailedError(\"First event was not delivered promptly\");\n  }\n  if (!((event.getType() == EventType.NodeChildrenChanged && event.getPath().equalsIgnoreCase(parentName)) || (event.getType() == EventType.NodeDeleted && event.getPath().equalsIgnoreCase(nodeName)))) {\n    System.out.print(parentName + \" \" + EventType.NodeChildrenChanged+ \" \"+ nodeName+ \" \"+ EventType.NodeDeleted);\n    fail(\"Unexpected first event was delivered: \" + event.toString());\n  }\n  event=this.getEvent(10);\n  if (event == null) {\n    throw new AssertionFailedError(\"Second event was not delivered promptly\");\n  }\n  if (!((event.getType() == EventType.NodeChildrenChanged && event.getPath().equalsIgnoreCase(parentName)) || (event.getType() == EventType.NodeDeleted && event.getPath().equalsIgnoreCase(nodeName)))) {\n    System.out.print(parentName + \" \" + EventType.NodeChildrenChanged+ \" \"+ nodeName+ \" \"+ EventType.NodeDeleted);\n    fail(\"Unexpected second event was delivered: \" + event.toString());\n  }\n  firstGen=zk_1.getChildren(parentName,false);\n  stat=zk_1.exists(nodeName,false);\n  if (stat != null) {\n    fail(\"node \" + nodeName + \" should have been deleted\");\n  }\n  if (firstGen.contains(nodeName)) {\n    fail(\"node \" + nodeName + \" should not be a children\");\n  }\n  deleteZKDir(zk_1,nodeName);\n  zk_1.close();\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 726,
      "astHeight" : 13
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
      "nodePosition" : {
        "charLength" : 4954,
        "startLineNumber" : 159,
        "startColumnNumber" : 2,
        "endLineNumber" : 300,
        "endColumnNumber" : 3
      },
      "nodeContext" : "private void enode_test_2() throws IOException, InterruptedException, KeeperException {\n  checkRoot();\n  String parentName=testDirOnZK;\n  String nodeName=parentName + \"/enode_abc\";\n  ZooKeeper zk=new ZooKeeper(hostPort,10000,this);\n  ZooKeeper zk_1=new ZooKeeper(hostPort,10000,this);\n  Stat stat=zk_1.exists(parentName,false);\n  if (stat == null) {\n    try {\n      zk.create(parentName,null,Ids.OPEN_ACL_UNSAFE,CreateMode.PERSISTENT);\n    }\n catch (    KeeperException ke) {\n      fail(\"Creating node \" + parentName + ke.getMessage());\n    }\n  }\n  stat=zk_1.exists(nodeName,false);\n  if (stat != null) {\n    try {\n      zk.delete(nodeName,-1);\n    }\n catch (    KeeperException ke) {\n      Code code=ke.code();\n      boolean valid=code == KeeperException.Code.NONODE || code == KeeperException.Code.NOTEMPTY;\n      if (!valid) {\n        fail(\"Unexpected exception code for delete: \" + ke.getMessage());\n      }\n    }\n  }\n  List<String> firstGen=zk_1.getChildren(parentName,true);\n  try {\n    zk.create(nodeName,null,Ids.OPEN_ACL_UNSAFE,CreateMode.EPHEMERAL);\n  }\n catch (  KeeperException ke) {\n    Code code=ke.code();\n    boolean valid=code == KeeperException.Code.NODEEXISTS;\n    if (!valid) {\n      fail(\"Unexpected exception code for createin: \" + ke.getMessage());\n    }\n  }\n  Thread.sleep(5000);\n  WatchedEvent event=events.poll(10,TimeUnit.SECONDS);\n  if (event == null) {\n    throw new IOException(\"No event was delivered promptly\");\n  }\n  if (event.getType() != EventType.NodeChildrenChanged || !event.getPath().equalsIgnoreCase(parentName)) {\n    fail(\"Unexpected event was delivered: \" + event.toString());\n  }\n  stat=zk_1.exists(nodeName,false);\n  if (stat == null) {\n    fail(\"node \" + nodeName + \" should exist\");\n  }\n  try {\n    zk.delete(parentName,-1);\n    fail(\"Should be impossible to delete a non-empty node \" + parentName);\n  }\n catch (  KeeperException ke) {\n    Code code=ke.code();\n    boolean valid=code == KeeperException.Code.NOTEMPTY;\n    if (!valid) {\n      fail(\"Unexpected exception code for delete: \" + code);\n    }\n  }\n  try {\n    zk.create(nodeName + \"/def\",null,Ids.OPEN_ACL_UNSAFE,CreateMode.EPHEMERAL);\n    fail(\"Should be impossible to create child off Ephemeral node \" + nodeName);\n  }\n catch (  KeeperException ke) {\n    Code code=ke.code();\n    boolean valid=code == KeeperException.Code.NOCHILDRENFOREPHEMERALS;\n    if (!valid) {\n      fail(\"Unexpected exception code for createin: \" + code);\n    }\n  }\n  try {\n    List<String> children=zk.getChildren(nodeName,false);\n    if (children.size() > 0) {\n      fail(\"ephemeral node \" + nodeName + \" should not have children\");\n    }\n  }\n catch (  KeeperException ke) {\n    Code code=ke.code();\n    boolean valid=code == KeeperException.Code.NONODE;\n    if (!valid) {\n      fail(\"Unexpected exception code for createin: \" + code);\n    }\n  }\n  firstGen=zk_1.getChildren(parentName,true);\n  stat=zk_1.exists(nodeName,true);\n  if (stat == null) {\n    fail(\"node \" + nodeName + \" should exist\");\n  }\n  System.out.println(\"session id of zk: \" + zk.getSessionId());\n  System.out.println(\"session id of zk_1: \" + zk_1.getSessionId());\n  zk.close();\n  stat=zk_1.exists(\"nosuchnode\",false);\n  event=this.getEvent(10);\n  if (event == null) {\n    throw new AssertionFailedError(\"First event was not delivered promptly\");\n  }\n  if (!((event.getType() == EventType.NodeChildrenChanged && event.getPath().equalsIgnoreCase(parentName)) || (event.getType() == EventType.NodeDeleted && event.getPath().equalsIgnoreCase(nodeName)))) {\n    System.out.print(parentName + \" \" + EventType.NodeChildrenChanged+ \" \"+ nodeName+ \" \"+ EventType.NodeDeleted);\n    fail(\"Unexpected first event was delivered: \" + event.toString());\n  }\n  event=this.getEvent(10);\n  if (event == null) {\n    throw new AssertionFailedError(\"Second event was not delivered promptly\");\n  }\n  if (!((event.getType() == EventType.NodeChildrenChanged && event.getPath().equalsIgnoreCase(parentName)) || (event.getType() == EventType.NodeDeleted && event.getPath().equalsIgnoreCase(nodeName)))) {\n    System.out.print(parentName + \" \" + EventType.NodeChildrenChanged+ \" \"+ nodeName+ \" \"+ EventType.NodeDeleted);\n    fail(\"Unexpected second event was delivered: \" + event.toString());\n  }\n  firstGen=zk_1.getChildren(parentName,false);\n  stat=zk_1.exists(nodeName,false);\n  if (stat != null) {\n    fail(\"node \" + nodeName + \" should have been deleted\");\n  }\n  if (firstGen.contains(nodeName)) {\n    fail(\"node \" + nodeName + \" should not be a children\");\n  }\n  deleteZKDir(zk_1,nodeName);\n  zk_1.close();\n}\n",
      "nodeType" : "MethodDeclaration",
      "astNodeNumber" : 736,
      "astHeight" : 14
    } ],
    "currentLineData" : {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 69,
        "startLineNumber" : 234,
        "startColumnNumber" : 6,
        "endLineNumber" : 234,
        "endColumnNumber" : 75
      },
      "nodeContext" : "boolean valid=code == KeeperException.Code.NOCHILDRENFOREPHEMERALS;\n",
      "nodeType" : "VariableDeclarationStatement",
      "astNodeNumber" : 11,
      "astHeight" : 6
    },
    "tokenLength" : 3,
    "type" : "org.apache.zookeeper.KeeperException.Code"
  } ],
  "positionList" : [ {
    "charLength" : 44,
    "startLineNumber" : 234,
    "startColumnNumber" : 30,
    "endLineNumber" : 234,
    "endColumnNumber" : 74
  } ],
  "layoutRelationDataList" : [ ]
}