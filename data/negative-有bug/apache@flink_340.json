{
  "id" : 340,
  "expression" : "variables",
  "projectName" : "apache@flink",
  "commitID" : "f8cb19e70ca7da6423dfb01b97e05c4d520c9fde",
  "filePath" : "/flink-runtime/src/main/java/org/apache/flink/runtime/broadcast/BroadcastVariableManager.java",
  "occurrences" : 2,
  "isArithmeticExpression" : 0,
  "isGetTypeMethod" : 0,
  "expressionList" : [ {
    "nodeContext" : "variables",
    "nodeType" : "SimpleName",
    "nodePosition" : {
      "charLength" : 9,
      "startLineNumber" : 63,
      "startColumnNumber" : 20,
      "endLineNumber" : 63,
      "endColumnNumber" : 29
    },
    "astNodeNumber" : 1,
    "astHeight" : 1,
    "parentDataList" : [ {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.VariableDeclarationFragment,initializer]",
      "nodePosition" : {
        "charLength" : 34,
        "startLineNumber" : 63,
        "startColumnNumber" : 20,
        "endLineNumber" : 63,
        "endColumnNumber" : 54
      },
      "nodeContext" : "variables.putIfAbsent(key,newMat)",
      "nodeType" : "MethodInvocation",
      "astNodeNumber" : 5,
      "astHeight" : 2
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.VariableDeclarationStatement,fragments]",
      "nodePosition" : {
        "charLength" : 65,
        "startLineNumber" : 62,
        "startColumnNumber" : 57,
        "endLineNumber" : 63,
        "endColumnNumber" : 54
      },
      "nodeContext" : "previous=variables.putIfAbsent(key,newMat)",
      "nodeType" : "VariableDeclarationFragment",
      "astNodeNumber" : 7,
      "astHeight" : 3
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 111,
        "startLineNumber" : 62,
        "startColumnNumber" : 12,
        "endLineNumber" : 63,
        "endColumnNumber" : 55
      },
      "nodeContext" : "final BroadcastVariableMaterialization<?,?> previous=variables.putIfAbsent(key,newMat);\n",
      "nodeType" : "VariableDeclarationStatement",
      "astNodeNumber" : 14,
      "astHeight" : 4
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.WhileStatement,body]",
      "nodePosition" : {
        "charLength" : 1813,
        "startLineNumber" : 58,
        "startColumnNumber" : 21,
        "endLineNumber" : 96,
        "endColumnNumber" : 9
      },
      "nodeContext" : "{\n  final BroadcastVariableMaterialization<T,Object> newMat=new BroadcastVariableMaterialization<T,Object>(key);\n  final BroadcastVariableMaterialization<?,?> previous=variables.putIfAbsent(key,newMat);\n  @SuppressWarnings(\"unchecked\") final BroadcastVariableMaterialization<T,?> materialization=(previous == null) ? newMat : (BroadcastVariableMaterialization<T,?>)previous;\n  try {\n    materialization.materializeVariable(reader,serializerFactory,holder);\n    return materialization;\n  }\n catch (  MaterializationExpiredException e) {\n    boolean replaceSuccessful=false;\n    try {\n      replaceSuccessful=variables.replace(key,materialization,newMat);\n    }\n catch (    Throwable t) {\n    }\n    if (replaceSuccessful) {\n      try {\n        newMat.materializeVariable(reader,serializerFactory,holder);\n        return newMat;\n      }\n catch (      MaterializationExpiredException ee) {\n      }\n    }\n  }\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 121,
      "astHeight" : 11
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 1826,
        "startLineNumber" : 58,
        "startColumnNumber" : 8,
        "endLineNumber" : 96,
        "endColumnNumber" : 9
      },
      "nodeContext" : "while (true) {\n  final BroadcastVariableMaterialization<T,Object> newMat=new BroadcastVariableMaterialization<T,Object>(key);\n  final BroadcastVariableMaterialization<?,?> previous=variables.putIfAbsent(key,newMat);\n  @SuppressWarnings(\"unchecked\") final BroadcastVariableMaterialization<T,?> materialization=(previous == null) ? newMat : (BroadcastVariableMaterialization<T,?>)previous;\n  try {\n    materialization.materializeVariable(reader,serializerFactory,holder);\n    return materialization;\n  }\n catch (  MaterializationExpiredException e) {\n    boolean replaceSuccessful=false;\n    try {\n      replaceSuccessful=variables.replace(key,materialization,newMat);\n    }\n catch (    Throwable t) {\n    }\n    if (replaceSuccessful) {\n      try {\n        newMat.materializeVariable(reader,serializerFactory,holder);\n        return newMat;\n      }\n catch (      MaterializationExpiredException ee) {\n      }\n    }\n  }\n}\n",
      "nodeType" : "WhileStatement",
      "astNodeNumber" : 123,
      "astHeight" : 12
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
      "nodePosition" : {
        "charLength" : 1985,
        "startLineNumber" : 54,
        "startColumnNumber" : 31,
        "endLineNumber" : 97,
        "endColumnNumber" : 5
      },
      "nodeContext" : "{\n  final BroadcastVariableKey key=new BroadcastVariableKey(holder.getEnvironment().getJobVertexId(),name,superstep);\n  while (true) {\n    final BroadcastVariableMaterialization<T,Object> newMat=new BroadcastVariableMaterialization<T,Object>(key);\n    final BroadcastVariableMaterialization<?,?> previous=variables.putIfAbsent(key,newMat);\n    @SuppressWarnings(\"unchecked\") final BroadcastVariableMaterialization<T,?> materialization=(previous == null) ? newMat : (BroadcastVariableMaterialization<T,?>)previous;\n    try {\n      materialization.materializeVariable(reader,serializerFactory,holder);\n      return materialization;\n    }\n catch (    MaterializationExpiredException e) {\n      boolean replaceSuccessful=false;\n      try {\n        replaceSuccessful=variables.replace(key,materialization,newMat);\n      }\n catch (      Throwable t) {\n      }\n      if (replaceSuccessful) {\n        try {\n          newMat.materializeVariable(reader,serializerFactory,holder);\n          return newMat;\n        }\n catch (        MaterializationExpiredException ee) {\n        }\n      }\n    }\n  }\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 140,
      "astHeight" : 13
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
      "nodePosition" : {
        "charLength" : 2531,
        "startLineNumber" : 43,
        "startColumnNumber" : 4,
        "endLineNumber" : 97,
        "endColumnNumber" : 5
      },
      "nodeContext" : "/** \n * Materializes the broadcast variable for the given name, scoped to the given task and its iteration superstep. An existing materialization created by another parallel subtask may be returned, if it hasn't expired yet.\n */\npublic <T>BroadcastVariableMaterialization<T,?> materializeBroadcastVariable(String name,int superstep,BatchTask<?,?> holder,MutableReader<?> reader,TypeSerializerFactory<T> serializerFactory) throws IOException {\n  final BroadcastVariableKey key=new BroadcastVariableKey(holder.getEnvironment().getJobVertexId(),name,superstep);\n  while (true) {\n    final BroadcastVariableMaterialization<T,Object> newMat=new BroadcastVariableMaterialization<T,Object>(key);\n    final BroadcastVariableMaterialization<?,?> previous=variables.putIfAbsent(key,newMat);\n    @SuppressWarnings(\"unchecked\") final BroadcastVariableMaterialization<T,?> materialization=(previous == null) ? newMat : (BroadcastVariableMaterialization<T,?>)previous;\n    try {\n      materialization.materializeVariable(reader,serializerFactory,holder);\n      return materialization;\n    }\n catch (    MaterializationExpiredException e) {\n      boolean replaceSuccessful=false;\n      try {\n        replaceSuccessful=variables.replace(key,materialization,newMat);\n      }\n catch (      Throwable t) {\n      }\n      if (replaceSuccessful) {\n        try {\n          newMat.materializeVariable(reader,serializerFactory,holder);\n          return newMat;\n        }\n catch (        MaterializationExpiredException ee) {\n        }\n      }\n    }\n  }\n}\n",
      "nodeType" : "MethodDeclaration",
      "astNodeNumber" : 181,
      "astHeight" : 14
    } ],
    "currentLineData" : {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.VariableDeclarationFragment,initializer]",
      "nodePosition" : {
        "charLength" : 34,
        "startLineNumber" : 63,
        "startColumnNumber" : 20,
        "endLineNumber" : 63,
        "endColumnNumber" : 54
      },
      "nodeContext" : "variables.putIfAbsent(key,newMat)",
      "nodeType" : "MethodInvocation",
      "astNodeNumber" : 5,
      "astHeight" : 2
    },
    "tokenLength" : 1,
    "type" : "java.util.concurrent.ConcurrentHashMap<org.apache.flink.runtime.broadcast.BroadcastVariableKey,org.apache.flink.runtime.broadcast.BroadcastVariableMaterialization<?,?>>"
  }, {
    "nodeContext" : "variables",
    "nodeType" : "SimpleName",
    "nodePosition" : {
      "charLength" : 9,
      "startLineNumber" : 81,
      "startColumnNumber" : 40,
      "endLineNumber" : 81,
      "endColumnNumber" : 49
    },
    "astNodeNumber" : 1,
    "astHeight" : 1,
    "parentDataList" : [ {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.Assignment,rightHandSide]",
      "nodePosition" : {
        "charLength" : 47,
        "startLineNumber" : 81,
        "startColumnNumber" : 40,
        "endLineNumber" : 81,
        "endColumnNumber" : 87
      },
      "nodeContext" : "variables.replace(key,materialization,newMat)",
      "nodeType" : "MethodInvocation",
      "astNodeNumber" : 6,
      "astHeight" : 2
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.ExpressionStatement,expression]",
      "nodePosition" : {
        "charLength" : 67,
        "startLineNumber" : 81,
        "startColumnNumber" : 20,
        "endLineNumber" : 81,
        "endColumnNumber" : 87
      },
      "nodeContext" : "replaceSuccessful=variables.replace(key,materialization,newMat)",
      "nodeType" : "Assignment",
      "astNodeNumber" : 8,
      "astHeight" : 3
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 68,
        "startLineNumber" : 81,
        "startColumnNumber" : 20,
        "endLineNumber" : 81,
        "endColumnNumber" : 88
      },
      "nodeContext" : "replaceSuccessful=variables.replace(key,materialization,newMat);\n",
      "nodeType" : "ExpressionStatement",
      "astNodeNumber" : 9,
      "astHeight" : 4
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.TryStatement,body]",
      "nodePosition" : {
        "charLength" : 108,
        "startLineNumber" : 80,
        "startColumnNumber" : 20,
        "endLineNumber" : 82,
        "endColumnNumber" : 17
      },
      "nodeContext" : "{\n  replaceSuccessful=variables.replace(key,materialization,newMat);\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 10,
      "astHeight" : 5
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 152,
        "startLineNumber" : 80,
        "startColumnNumber" : 16,
        "endLineNumber" : 83,
        "endColumnNumber" : 17
      },
      "nodeContext" : "try {\n  replaceSuccessful=variables.replace(key,materialization,newMat);\n}\n catch (Throwable t) {\n}\n",
      "nodeType" : "TryStatement",
      "astNodeNumber" : 17,
      "astHeight" : 6
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.CatchClause,body]",
      "nodePosition" : {
        "charLength" : 1108,
        "startLineNumber" : 72,
        "startColumnNumber" : 56,
        "endLineNumber" : 95,
        "endColumnNumber" : 13
      },
      "nodeContext" : "{\n  boolean replaceSuccessful=false;\n  try {\n    replaceSuccessful=variables.replace(key,materialization,newMat);\n  }\n catch (  Throwable t) {\n  }\n  if (replaceSuccessful) {\n    try {\n      newMat.materializeVariable(reader,serializerFactory,holder);\n      return newMat;\n    }\n catch (    MaterializationExpiredException ee) {\n    }\n  }\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 43,
      "astHeight" : 8
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.TryStatement,catchClauses]",
      "nodePosition" : {
        "charLength" : 1150,
        "startLineNumber" : 72,
        "startColumnNumber" : 14,
        "endLineNumber" : 95,
        "endColumnNumber" : 13
      },
      "nodeContext" : "catch (MaterializationExpiredException e) {\n  boolean replaceSuccessful=false;\n  try {\n    replaceSuccessful=variables.replace(key,materialization,newMat);\n  }\n catch (  Throwable t) {\n  }\n  if (replaceSuccessful) {\n    try {\n      newMat.materializeVariable(reader,serializerFactory,holder);\n      return newMat;\n    }\n catch (    MaterializationExpiredException ee) {\n    }\n  }\n}\n",
      "nodeType" : "CatchClause",
      "astNodeNumber" : 48,
      "astHeight" : 9
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 1298,
        "startLineNumber" : 69,
        "startColumnNumber" : 12,
        "endLineNumber" : 95,
        "endColumnNumber" : 13
      },
      "nodeContext" : "try {\n  materialization.materializeVariable(reader,serializerFactory,holder);\n  return materialization;\n}\n catch (MaterializationExpiredException e) {\n  boolean replaceSuccessful=false;\n  try {\n    replaceSuccessful=variables.replace(key,materialization,newMat);\n  }\n catch (  Throwable t) {\n  }\n  if (replaceSuccessful) {\n    try {\n      newMat.materializeVariable(reader,serializerFactory,holder);\n      return newMat;\n    }\n catch (    MaterializationExpiredException ee) {\n    }\n  }\n}\n",
      "nodeType" : "TryStatement",
      "astNodeNumber" : 59,
      "astHeight" : 10
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.WhileStatement,body]",
      "nodePosition" : {
        "charLength" : 1813,
        "startLineNumber" : 58,
        "startColumnNumber" : 21,
        "endLineNumber" : 96,
        "endColumnNumber" : 9
      },
      "nodeContext" : "{\n  final BroadcastVariableMaterialization<T,Object> newMat=new BroadcastVariableMaterialization<T,Object>(key);\n  final BroadcastVariableMaterialization<?,?> previous=variables.putIfAbsent(key,newMat);\n  @SuppressWarnings(\"unchecked\") final BroadcastVariableMaterialization<T,?> materialization=(previous == null) ? newMat : (BroadcastVariableMaterialization<T,?>)previous;\n  try {\n    materialization.materializeVariable(reader,serializerFactory,holder);\n    return materialization;\n  }\n catch (  MaterializationExpiredException e) {\n    boolean replaceSuccessful=false;\n    try {\n      replaceSuccessful=variables.replace(key,materialization,newMat);\n    }\n catch (    Throwable t) {\n    }\n    if (replaceSuccessful) {\n      try {\n        newMat.materializeVariable(reader,serializerFactory,holder);\n        return newMat;\n      }\n catch (      MaterializationExpiredException ee) {\n      }\n    }\n  }\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 121,
      "astHeight" : 11
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 1826,
        "startLineNumber" : 58,
        "startColumnNumber" : 8,
        "endLineNumber" : 96,
        "endColumnNumber" : 9
      },
      "nodeContext" : "while (true) {\n  final BroadcastVariableMaterialization<T,Object> newMat=new BroadcastVariableMaterialization<T,Object>(key);\n  final BroadcastVariableMaterialization<?,?> previous=variables.putIfAbsent(key,newMat);\n  @SuppressWarnings(\"unchecked\") final BroadcastVariableMaterialization<T,?> materialization=(previous == null) ? newMat : (BroadcastVariableMaterialization<T,?>)previous;\n  try {\n    materialization.materializeVariable(reader,serializerFactory,holder);\n    return materialization;\n  }\n catch (  MaterializationExpiredException e) {\n    boolean replaceSuccessful=false;\n    try {\n      replaceSuccessful=variables.replace(key,materialization,newMat);\n    }\n catch (    Throwable t) {\n    }\n    if (replaceSuccessful) {\n      try {\n        newMat.materializeVariable(reader,serializerFactory,holder);\n        return newMat;\n      }\n catch (      MaterializationExpiredException ee) {\n      }\n    }\n  }\n}\n",
      "nodeType" : "WhileStatement",
      "astNodeNumber" : 123,
      "astHeight" : 12
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
      "nodePosition" : {
        "charLength" : 1985,
        "startLineNumber" : 54,
        "startColumnNumber" : 31,
        "endLineNumber" : 97,
        "endColumnNumber" : 5
      },
      "nodeContext" : "{\n  final BroadcastVariableKey key=new BroadcastVariableKey(holder.getEnvironment().getJobVertexId(),name,superstep);\n  while (true) {\n    final BroadcastVariableMaterialization<T,Object> newMat=new BroadcastVariableMaterialization<T,Object>(key);\n    final BroadcastVariableMaterialization<?,?> previous=variables.putIfAbsent(key,newMat);\n    @SuppressWarnings(\"unchecked\") final BroadcastVariableMaterialization<T,?> materialization=(previous == null) ? newMat : (BroadcastVariableMaterialization<T,?>)previous;\n    try {\n      materialization.materializeVariable(reader,serializerFactory,holder);\n      return materialization;\n    }\n catch (    MaterializationExpiredException e) {\n      boolean replaceSuccessful=false;\n      try {\n        replaceSuccessful=variables.replace(key,materialization,newMat);\n      }\n catch (      Throwable t) {\n      }\n      if (replaceSuccessful) {\n        try {\n          newMat.materializeVariable(reader,serializerFactory,holder);\n          return newMat;\n        }\n catch (        MaterializationExpiredException ee) {\n        }\n      }\n    }\n  }\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 140,
      "astHeight" : 13
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
      "nodePosition" : {
        "charLength" : 2531,
        "startLineNumber" : 43,
        "startColumnNumber" : 4,
        "endLineNumber" : 97,
        "endColumnNumber" : 5
      },
      "nodeContext" : "/** \n * Materializes the broadcast variable for the given name, scoped to the given task and its iteration superstep. An existing materialization created by another parallel subtask may be returned, if it hasn't expired yet.\n */\npublic <T>BroadcastVariableMaterialization<T,?> materializeBroadcastVariable(String name,int superstep,BatchTask<?,?> holder,MutableReader<?> reader,TypeSerializerFactory<T> serializerFactory) throws IOException {\n  final BroadcastVariableKey key=new BroadcastVariableKey(holder.getEnvironment().getJobVertexId(),name,superstep);\n  while (true) {\n    final BroadcastVariableMaterialization<T,Object> newMat=new BroadcastVariableMaterialization<T,Object>(key);\n    final BroadcastVariableMaterialization<?,?> previous=variables.putIfAbsent(key,newMat);\n    @SuppressWarnings(\"unchecked\") final BroadcastVariableMaterialization<T,?> materialization=(previous == null) ? newMat : (BroadcastVariableMaterialization<T,?>)previous;\n    try {\n      materialization.materializeVariable(reader,serializerFactory,holder);\n      return materialization;\n    }\n catch (    MaterializationExpiredException e) {\n      boolean replaceSuccessful=false;\n      try {\n        replaceSuccessful=variables.replace(key,materialization,newMat);\n      }\n catch (      Throwable t) {\n      }\n      if (replaceSuccessful) {\n        try {\n          newMat.materializeVariable(reader,serializerFactory,holder);\n          return newMat;\n        }\n catch (        MaterializationExpiredException ee) {\n        }\n      }\n    }\n  }\n}\n",
      "nodeType" : "MethodDeclaration",
      "astNodeNumber" : 181,
      "astHeight" : 14
    } ],
    "currentLineData" : {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 68,
        "startLineNumber" : 81,
        "startColumnNumber" : 20,
        "endLineNumber" : 81,
        "endColumnNumber" : 88
      },
      "nodeContext" : "replaceSuccessful=variables.replace(key,materialization,newMat);\n",
      "nodeType" : "ExpressionStatement",
      "astNodeNumber" : 9,
      "astHeight" : 4
    },
    "tokenLength" : 1,
    "type" : "java.util.concurrent.ConcurrentHashMap<org.apache.flink.runtime.broadcast.BroadcastVariableKey,org.apache.flink.runtime.broadcast.BroadcastVariableMaterialization<?,?>>"
  } ],
  "positionList" : [ {
    "charLength" : 9,
    "startLineNumber" : 63,
    "startColumnNumber" : 20,
    "endLineNumber" : 63,
    "endColumnNumber" : 29
  }, {
    "charLength" : 9,
    "startLineNumber" : 81,
    "startColumnNumber" : 40,
    "endLineNumber" : 81,
    "endColumnNumber" : 49
  } ],
  "layoutRelationDataList" : [ {
    "firstKey" : 0,
    "secondKey" : 1,
    "layout" : 3
  }, {
    "firstKey" : 1,
    "secondKey" : 0,
    "layout" : 8
  } ]
}