{
  "id" : 424,
  "expression" : "new File(newParentDir,newName)",
  "projectName" : "arduino@Arduino",
  "commitID" : "cf1879f948e0c1fa9ddd91f7348fbdd07fd870cb",
  "filePath" : "/app/src/processing/app/Sketch.java",
  "occurrences" : 1,
  "isArithmeticExpression" : 0,
  "isGetTypeMethod" : 0,
  "expressionList" : [ {
    "nodeContext" : "new File(newParentDir,newName)",
    "nodeType" : "ClassInstanceCreation",
    "nodePosition" : {
      "charLength" : 31,
      "startLineNumber" : 670,
      "startColumnNumber" : 21,
      "endLineNumber" : 670,
      "endColumnNumber" : 52
    },
    "astNodeNumber" : 5,
    "astHeight" : 3,
    "parentDataList" : [ {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.VariableDeclarationStatement,fragments]",
      "nodePosition" : {
        "charLength" : 43,
        "startLineNumber" : 670,
        "startColumnNumber" : 9,
        "endLineNumber" : 670,
        "endColumnNumber" : 52
      },
      "nodeContext" : "newFolder=new File(newParentDir,newName)",
      "nodeType" : "VariableDeclarationFragment",
      "astNodeNumber" : 7,
      "astHeight" : 4
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 49,
        "startLineNumber" : 670,
        "startColumnNumber" : 4,
        "endLineNumber" : 670,
        "endColumnNumber" : 53
      },
      "nodeContext" : "File newFolder=new File(newParentDir,newName);\n",
      "nodeType" : "VariableDeclarationStatement",
      "astNodeNumber" : 10,
      "astHeight" : 5
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
      "nodePosition" : {
        "charLength" : 4576,
        "startLineNumber" : 644,
        "startColumnNumber" : 48,
        "endLineNumber" : 772,
        "endColumnNumber" : 3
      },
      "nodeContext" : "{\n  String newParentDir=null;\n  String newName=null;\n  FileDialog fd=new FileDialog(editor,_(\"Save sketch folder as...\"),FileDialog.SAVE);\n  if (isReadOnly() || isUntitled()) {\n    fd.setDirectory(Base.getSketchbookFolder().getAbsolutePath());\n  }\n else {\n    fd.setDirectory(data.getFolder().getParentFile().getAbsolutePath());\n  }\n  String oldName=data.getName();\n  fd.setFile(oldName);\n  fd.setVisible(true);\n  newParentDir=fd.getDirectory();\n  newName=fd.getFile();\n  if (newName == null)   return false;\n  newName=Sketch.checkName(newName);\n  File newFolder=new File(newParentDir,newName);\n  for (  SketchCode code : data.getCodes()) {\n    if (newName.equalsIgnoreCase(code.getPrettyName()) && code.isExtension(\"cpp\")) {\n      Base.showMessage(_(\"Nope\"),I18n.format(_(\"You can't save the sketch as \\\"{0}\\\"\\n\" + \"because the sketch already has a .cpp file with that name.\"),newName));\n      return false;\n    }\n  }\n  if (newFolder.equals(data.getFolder())) {\n    return save();\n  }\n  try {\n    String newPath=newFolder.getCanonicalPath() + File.separator;\n    String oldPath=data.getFolder().getCanonicalPath() + File.separator;\n    if (newPath.indexOf(oldPath) == 0) {\n      Base.showWarning(_(\"How very Borges of you\"),_(\"You cannot save the sketch into a folder\\n\" + \"inside itself. This would go on forever.\"),null);\n      return false;\n    }\n  }\n catch (  IOException e) {\n  }\n  if (newFolder.exists()) {\n    Base.removeDir(newFolder);\n  }\n  newFolder.mkdirs();\n  if (current.getCode().isModified()) {\n    current.getCode().setProgram(editor.getText());\n  }\n  for (  SketchCode code : data.getCodes()) {\n    if (data.indexOfCode(code) == 0)     continue;\n    File newFile=new File(newFolder,code.getFileName());\n    code.saveAs(newFile);\n  }\n  if (data.getDataFolder().exists()) {\n    File newDataFolder=new File(newFolder,\"data\");\n    Base.copyDir(data.getDataFolder(),newDataFolder);\n  }\n  if (data.getCodeFolder().exists()) {\n    File newCodeFolder=new File(newFolder,\"code\");\n    Base.copyDir(data.getCodeFolder(),newCodeFolder);\n  }\n  File customHtml=new File(data.getFolder(),\"applet.html\");\n  if (customHtml.exists()) {\n    File newHtml=new File(newFolder,\"applet.html\");\n    Base.copyFile(customHtml,newHtml);\n  }\n  File newFile=new File(newFolder,newName + \".ino\");\n  data.getCode(0).saveAs(newFile);\n  editor.handleOpenUnchecked(newFile,currentIndex,editor.getSelectionStart(),editor.getSelectionStop(),editor.getScrollPosition());\n  editor.base.rebuildSketchbookMenus();\n  setUntitled(false);\n  return true;\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 411,
      "astHeight" : 11
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
      "nodePosition" : {
        "charLength" : 5053,
        "startLineNumber" : 633,
        "startColumnNumber" : 2,
        "endLineNumber" : 772,
        "endColumnNumber" : 3
      },
      "nodeContext" : "/** \n * Handles 'Save As' for a sketch. <P> This basically just duplicates the current sketch folder to a new location, and then calls 'Save'. (needs to take the current state of the open files and save them to the new folder.. but not save over the old versions for the old sketch..) <P> Also removes the previously-generated .class and .jar files, because they can cause trouble.\n */\nprotected boolean saveAs() throws IOException {\n  String newParentDir=null;\n  String newName=null;\n  FileDialog fd=new FileDialog(editor,_(\"Save sketch folder as...\"),FileDialog.SAVE);\n  if (isReadOnly() || isUntitled()) {\n    fd.setDirectory(Base.getSketchbookFolder().getAbsolutePath());\n  }\n else {\n    fd.setDirectory(data.getFolder().getParentFile().getAbsolutePath());\n  }\n  String oldName=data.getName();\n  fd.setFile(oldName);\n  fd.setVisible(true);\n  newParentDir=fd.getDirectory();\n  newName=fd.getFile();\n  if (newName == null)   return false;\n  newName=Sketch.checkName(newName);\n  File newFolder=new File(newParentDir,newName);\n  for (  SketchCode code : data.getCodes()) {\n    if (newName.equalsIgnoreCase(code.getPrettyName()) && code.isExtension(\"cpp\")) {\n      Base.showMessage(_(\"Nope\"),I18n.format(_(\"You can't save the sketch as \\\"{0}\\\"\\n\" + \"because the sketch already has a .cpp file with that name.\"),newName));\n      return false;\n    }\n  }\n  if (newFolder.equals(data.getFolder())) {\n    return save();\n  }\n  try {\n    String newPath=newFolder.getCanonicalPath() + File.separator;\n    String oldPath=data.getFolder().getCanonicalPath() + File.separator;\n    if (newPath.indexOf(oldPath) == 0) {\n      Base.showWarning(_(\"How very Borges of you\"),_(\"You cannot save the sketch into a folder\\n\" + \"inside itself. This would go on forever.\"),null);\n      return false;\n    }\n  }\n catch (  IOException e) {\n  }\n  if (newFolder.exists()) {\n    Base.removeDir(newFolder);\n  }\n  newFolder.mkdirs();\n  if (current.getCode().isModified()) {\n    current.getCode().setProgram(editor.getText());\n  }\n  for (  SketchCode code : data.getCodes()) {\n    if (data.indexOfCode(code) == 0)     continue;\n    File newFile=new File(newFolder,code.getFileName());\n    code.saveAs(newFile);\n  }\n  if (data.getDataFolder().exists()) {\n    File newDataFolder=new File(newFolder,\"data\");\n    Base.copyDir(data.getDataFolder(),newDataFolder);\n  }\n  if (data.getCodeFolder().exists()) {\n    File newCodeFolder=new File(newFolder,\"code\");\n    Base.copyDir(data.getCodeFolder(),newCodeFolder);\n  }\n  File customHtml=new File(data.getFolder(),\"applet.html\");\n  if (customHtml.exists()) {\n    File newHtml=new File(newFolder,\"applet.html\");\n    Base.copyFile(customHtml,newHtml);\n  }\n  File newFile=new File(newFolder,newName + \".ino\");\n  data.getCode(0).saveAs(newFile);\n  editor.handleOpenUnchecked(newFile,currentIndex,editor.getSelectionStart(),editor.getSelectionStop(),editor.getScrollPosition());\n  editor.base.rebuildSketchbookMenus();\n  setUntitled(false);\n  return true;\n}\n",
      "nodeType" : "MethodDeclaration",
      "astNodeNumber" : 418,
      "astHeight" : 12
    } ],
    "currentLineData" : {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 49,
        "startLineNumber" : 670,
        "startColumnNumber" : 4,
        "endLineNumber" : 670,
        "endColumnNumber" : 53
      },
      "nodeContext" : "File newFolder=new File(newParentDir,newName);\n",
      "nodeType" : "VariableDeclarationStatement",
      "astNodeNumber" : 10,
      "astHeight" : 5
    },
    "tokenLength" : 3,
    "type" : "java.io.File"
  } ],
  "positionList" : [ {
    "charLength" : 31,
    "startLineNumber" : 670,
    "startColumnNumber" : 21,
    "endLineNumber" : 670,
    "endColumnNumber" : 52
  } ],
  "layoutRelationDataList" : [ ]
}