{
  "id" : 326,
  "expression" : "values.getValues()[i]",
  "projectName" : "apache@skywalking",
  "commitID" : "16b51d55baec4f779f312e07081d1397addbcfe9",
  "filePath" : "/oap-server/server-telemetry/telemetry-prometheus/src/main/java/org/apache/skywalking/oap/server/telemetry/prometheus/BaseMetrics.java",
  "occurrences" : 1,
  "isArithmeticExpression" : 0,
  "isGetTypeMethod" : 0,
  "expressionList" : [ {
    "nodeContext" : "values.getValues()[i]",
    "nodeType" : "ArrayAccess",
    "nodePosition" : {
      "charLength" : 21,
      "startLineNumber" : 73,
      "startColumnNumber" : 49,
      "endLineNumber" : 73,
      "endColumnNumber" : 70
    },
    "astNodeNumber" : 5,
    "astHeight" : 3,
    "parentDataList" : [ {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.ExpressionStatement,expression]",
      "nodePosition" : {
        "charLength" : 42,
        "startLineNumber" : 73,
        "startColumnNumber" : 28,
        "endLineNumber" : 73,
        "endColumnNumber" : 70
      },
      "nodeContext" : "labelValues[i + 1]=values.getValues()[i]",
      "nodeType" : "Assignment",
      "astNodeNumber" : 11,
      "astHeight" : 4
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 43,
        "startLineNumber" : 73,
        "startColumnNumber" : 28,
        "endLineNumber" : 73,
        "endColumnNumber" : 71
      },
      "nodeContext" : "labelValues[i + 1]=values.getValues()[i];\n",
      "nodeType" : "ExpressionStatement",
      "astNodeNumber" : 12,
      "astHeight" : 5
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.ForStatement,body]",
      "nodePosition" : {
        "charLength" : 99,
        "startLineNumber" : 72,
        "startColumnNumber" : 76,
        "endLineNumber" : 74,
        "endColumnNumber" : 25
      },
      "nodeContext" : "{\n  labelValues[i + 1]=values.getValues()[i];\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 13,
      "astHeight" : 6
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 151,
        "startLineNumber" : 72,
        "startColumnNumber" : 24,
        "endLineNumber" : 74,
        "endColumnNumber" : 25
      },
      "nodeContext" : "for (int i=0; i < values.getValues().length; i++) {\n  labelValues[i + 1]=values.getValues()[i];\n}\n",
      "nodeType" : "ForStatement",
      "astNodeNumber" : 28,
      "astHeight" : 7
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
      "nodePosition" : {
        "charLength" : 1193,
        "startLineNumber" : 63,
        "startColumnNumber" : 49,
        "endLineNumber" : 87,
        "endColumnNumber" : 21
      },
      "nodeContext" : "{\n  String[] labelNames=new String[labels.getKeys().length + 1];\n  labelNames[0]=\"sw_backend_instance\";\n  for (int i=0; i < labels.getKeys().length; i++) {\n    labelNames[i + 1]=labels.getKeys()[i];\n  }\n  String[] labelValues=new String[values.getValues().length + 1];\n  labelValues[0]=TelemetryRelatedContext.INSTANCE.getId();\n  for (int i=0; i < values.getValues().length; i++) {\n    labelValues[i + 1]=values.getValues()[i];\n  }\n  if (!ALL_METRICS.containsKey(name)) {\nsynchronized (ALL_METRICS) {\n      if (!ALL_METRICS.containsKey(name)) {\n        ALL_METRICS.put(name,create(labelNames));\n      }\n    }\n  }\n  T metrics=(T)ALL_METRICS.get(name);\n  metricsInstance=(C)metrics.labels(labelValues);\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 158,
      "astHeight" : 11
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 1222,
        "startLineNumber" : 63,
        "startColumnNumber" : 20,
        "endLineNumber" : 87,
        "endColumnNumber" : 21
      },
      "nodeContext" : "if (metricsInstance == null) {\n  String[] labelNames=new String[labels.getKeys().length + 1];\n  labelNames[0]=\"sw_backend_instance\";\n  for (int i=0; i < labels.getKeys().length; i++) {\n    labelNames[i + 1]=labels.getKeys()[i];\n  }\n  String[] labelValues=new String[values.getValues().length + 1];\n  labelValues[0]=TelemetryRelatedContext.INSTANCE.getId();\n  for (int i=0; i < values.getValues().length; i++) {\n    labelValues[i + 1]=values.getValues()[i];\n  }\n  if (!ALL_METRICS.containsKey(name)) {\nsynchronized (ALL_METRICS) {\n      if (!ALL_METRICS.containsKey(name)) {\n        ALL_METRICS.put(name,create(labelNames));\n      }\n    }\n  }\n  T metrics=(T)ALL_METRICS.get(name);\n  metricsInstance=(C)metrics.labels(labelValues);\n}\n",
      "nodeType" : "IfStatement",
      "astNodeNumber" : 162,
      "astHeight" : 12
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.TryStatement,body]",
      "nodePosition" : {
        "charLength" : 1262,
        "startLineNumber" : 62,
        "startColumnNumber" : 20,
        "endLineNumber" : 88,
        "endColumnNumber" : 17
      },
      "nodeContext" : "{\n  if (metricsInstance == null) {\n    String[] labelNames=new String[labels.getKeys().length + 1];\n    labelNames[0]=\"sw_backend_instance\";\n    for (int i=0; i < labels.getKeys().length; i++) {\n      labelNames[i + 1]=labels.getKeys()[i];\n    }\n    String[] labelValues=new String[values.getValues().length + 1];\n    labelValues[0]=TelemetryRelatedContext.INSTANCE.getId();\n    for (int i=0; i < values.getValues().length; i++) {\n      labelValues[i + 1]=values.getValues()[i];\n    }\n    if (!ALL_METRICS.containsKey(name)) {\nsynchronized (ALL_METRICS) {\n        if (!ALL_METRICS.containsKey(name)) {\n          ALL_METRICS.put(name,create(labelNames));\n        }\n      }\n    }\n    T metrics=(T)ALL_METRICS.get(name);\n    metricsInstance=(C)metrics.labels(labelValues);\n  }\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 163,
      "astHeight" : 13
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 1329,
        "startLineNumber" : 62,
        "startColumnNumber" : 16,
        "endLineNumber" : 90,
        "endColumnNumber" : 17
      },
      "nodeContext" : "try {\n  if (metricsInstance == null) {\n    String[] labelNames=new String[labels.getKeys().length + 1];\n    labelNames[0]=\"sw_backend_instance\";\n    for (int i=0; i < labels.getKeys().length; i++) {\n      labelNames[i + 1]=labels.getKeys()[i];\n    }\n    String[] labelValues=new String[values.getValues().length + 1];\n    labelValues[0]=TelemetryRelatedContext.INSTANCE.getId();\n    for (int i=0; i < values.getValues().length; i++) {\n      labelValues[i + 1]=values.getValues()[i];\n    }\n    if (!ALL_METRICS.containsKey(name)) {\nsynchronized (ALL_METRICS) {\n        if (!ALL_METRICS.containsKey(name)) {\n          ALL_METRICS.put(name,create(labelNames));\n        }\n      }\n    }\n    T metrics=(T)ALL_METRICS.get(name);\n    metricsInstance=(C)metrics.labels(labelValues);\n  }\n}\n  finally {\n  lock.unlock();\n}\n",
      "nodeType" : "TryStatement",
      "astNodeNumber" : 169,
      "astHeight" : 14
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
      "nodePosition" : {
        "charLength" : 1390,
        "startLineNumber" : 60,
        "startColumnNumber" : 29,
        "endLineNumber" : 91,
        "endColumnNumber" : 13
      },
      "nodeContext" : "{\n  lock.lock();\n  try {\n    if (metricsInstance == null) {\n      String[] labelNames=new String[labels.getKeys().length + 1];\n      labelNames[0]=\"sw_backend_instance\";\n      for (int i=0; i < labels.getKeys().length; i++) {\n        labelNames[i + 1]=labels.getKeys()[i];\n      }\n      String[] labelValues=new String[values.getValues().length + 1];\n      labelValues[0]=TelemetryRelatedContext.INSTANCE.getId();\n      for (int i=0; i < values.getValues().length; i++) {\n        labelValues[i + 1]=values.getValues()[i];\n      }\n      if (!ALL_METRICS.containsKey(name)) {\nsynchronized (ALL_METRICS) {\n          if (!ALL_METRICS.containsKey(name)) {\n            ALL_METRICS.put(name,create(labelNames));\n          }\n        }\n      }\n      T metrics=(T)ALL_METRICS.get(name);\n      metricsInstance=(C)metrics.labels(labelValues);\n    }\n  }\n  finally {\n    lock.unlock();\n  }\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 174,
      "astHeight" : 15
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 1407,
        "startLineNumber" : 60,
        "startColumnNumber" : 12,
        "endLineNumber" : 91,
        "endColumnNumber" : 13
      },
      "nodeContext" : "if (isIDReady()) {\n  lock.lock();\n  try {\n    if (metricsInstance == null) {\n      String[] labelNames=new String[labels.getKeys().length + 1];\n      labelNames[0]=\"sw_backend_instance\";\n      for (int i=0; i < labels.getKeys().length; i++) {\n        labelNames[i + 1]=labels.getKeys()[i];\n      }\n      String[] labelValues=new String[values.getValues().length + 1];\n      labelValues[0]=TelemetryRelatedContext.INSTANCE.getId();\n      for (int i=0; i < values.getValues().length; i++) {\n        labelValues[i + 1]=values.getValues()[i];\n      }\n      if (!ALL_METRICS.containsKey(name)) {\nsynchronized (ALL_METRICS) {\n          if (!ALL_METRICS.containsKey(name)) {\n            ALL_METRICS.put(name,create(labelNames));\n          }\n        }\n      }\n      T metrics=(T)ALL_METRICS.get(name);\n      metricsInstance=(C)metrics.labels(labelValues);\n    }\n  }\n  finally {\n    lock.unlock();\n  }\n}\n",
      "nodeType" : "IfStatement",
      "astNodeNumber" : 177,
      "astHeight" : 16
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
      "nodePosition" : {
        "charLength" : 1431,
        "startLineNumber" : 59,
        "startColumnNumber" : 37,
        "endLineNumber" : 92,
        "endColumnNumber" : 9
      },
      "nodeContext" : "{\n  if (isIDReady()) {\n    lock.lock();\n    try {\n      if (metricsInstance == null) {\n        String[] labelNames=new String[labels.getKeys().length + 1];\n        labelNames[0]=\"sw_backend_instance\";\n        for (int i=0; i < labels.getKeys().length; i++) {\n          labelNames[i + 1]=labels.getKeys()[i];\n        }\n        String[] labelValues=new String[values.getValues().length + 1];\n        labelValues[0]=TelemetryRelatedContext.INSTANCE.getId();\n        for (int i=0; i < values.getValues().length; i++) {\n          labelValues[i + 1]=values.getValues()[i];\n        }\n        if (!ALL_METRICS.containsKey(name)) {\nsynchronized (ALL_METRICS) {\n            if (!ALL_METRICS.containsKey(name)) {\n              ALL_METRICS.put(name,create(labelNames));\n            }\n          }\n        }\n        T metrics=(T)ALL_METRICS.get(name);\n        metricsInstance=(C)metrics.labels(labelValues);\n      }\n    }\n  finally {\n      lock.unlock();\n    }\n  }\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 178,
      "astHeight" : 17
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 1460,
        "startLineNumber" : 59,
        "startColumnNumber" : 8,
        "endLineNumber" : 92,
        "endColumnNumber" : 9
      },
      "nodeContext" : "if (metricsInstance == null) {\n  if (isIDReady()) {\n    lock.lock();\n    try {\n      if (metricsInstance == null) {\n        String[] labelNames=new String[labels.getKeys().length + 1];\n        labelNames[0]=\"sw_backend_instance\";\n        for (int i=0; i < labels.getKeys().length; i++) {\n          labelNames[i + 1]=labels.getKeys()[i];\n        }\n        String[] labelValues=new String[values.getValues().length + 1];\n        labelValues[0]=TelemetryRelatedContext.INSTANCE.getId();\n        for (int i=0; i < values.getValues().length; i++) {\n          labelValues[i + 1]=values.getValues()[i];\n        }\n        if (!ALL_METRICS.containsKey(name)) {\nsynchronized (ALL_METRICS) {\n            if (!ALL_METRICS.containsKey(name)) {\n              ALL_METRICS.put(name,create(labelNames));\n            }\n          }\n        }\n        T metrics=(T)ALL_METRICS.get(name);\n        metricsInstance=(C)metrics.labels(labelValues);\n      }\n    }\n  finally {\n      lock.unlock();\n    }\n  }\n}\n",
      "nodeType" : "IfStatement",
      "astNodeNumber" : 182,
      "astHeight" : 18
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
      "nodePosition" : {
        "charLength" : 1509,
        "startLineNumber" : 58,
        "startColumnNumber" : 28,
        "endLineNumber" : 95,
        "endColumnNumber" : 5
      },
      "nodeContext" : "{\n  if (metricsInstance == null) {\n    if (isIDReady()) {\n      lock.lock();\n      try {\n        if (metricsInstance == null) {\n          String[] labelNames=new String[labels.getKeys().length + 1];\n          labelNames[0]=\"sw_backend_instance\";\n          for (int i=0; i < labels.getKeys().length; i++) {\n            labelNames[i + 1]=labels.getKeys()[i];\n          }\n          String[] labelValues=new String[values.getValues().length + 1];\n          labelValues[0]=TelemetryRelatedContext.INSTANCE.getId();\n          for (int i=0; i < values.getValues().length; i++) {\n            labelValues[i + 1]=values.getValues()[i];\n          }\n          if (!ALL_METRICS.containsKey(name)) {\nsynchronized (ALL_METRICS) {\n              if (!ALL_METRICS.containsKey(name)) {\n                ALL_METRICS.put(name,create(labelNames));\n              }\n            }\n          }\n          T metrics=(T)ALL_METRICS.get(name);\n          metricsInstance=(C)metrics.labels(labelValues);\n        }\n      }\n  finally {\n        lock.unlock();\n      }\n    }\n  }\n  return metricsInstance;\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 185,
      "astHeight" : 19
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
      "nodePosition" : {
        "charLength" : 1796,
        "startLineNumber" : 52,
        "startColumnNumber" : 4,
        "endLineNumber" : 95,
        "endColumnNumber" : 5
      },
      "nodeContext" : "/** \n * Create real prometheus metrics with SkyWalking native labels, and provide to all metrics implementation. Metrics name should be unique.\n * @return metric reference if the service instance id has been initialized. Or NULL.\n */\nprotected C getMetric(){\n  if (metricsInstance == null) {\n    if (isIDReady()) {\n      lock.lock();\n      try {\n        if (metricsInstance == null) {\n          String[] labelNames=new String[labels.getKeys().length + 1];\n          labelNames[0]=\"sw_backend_instance\";\n          for (int i=0; i < labels.getKeys().length; i++) {\n            labelNames[i + 1]=labels.getKeys()[i];\n          }\n          String[] labelValues=new String[values.getValues().length + 1];\n          labelValues[0]=TelemetryRelatedContext.INSTANCE.getId();\n          for (int i=0; i < values.getValues().length; i++) {\n            labelValues[i + 1]=values.getValues()[i];\n          }\n          if (!ALL_METRICS.containsKey(name)) {\nsynchronized (ALL_METRICS) {\n              if (!ALL_METRICS.containsKey(name)) {\n                ALL_METRICS.put(name,create(labelNames));\n              }\n            }\n          }\n          T metrics=(T)ALL_METRICS.get(name);\n          metricsInstance=(C)metrics.labels(labelValues);\n        }\n      }\n  finally {\n        lock.unlock();\n      }\n    }\n  }\n  return metricsInstance;\n}\n",
      "nodeType" : "MethodDeclaration",
      "astNodeNumber" : 191,
      "astHeight" : 20
    } ],
    "currentLineData" : {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 43,
        "startLineNumber" : 73,
        "startColumnNumber" : 28,
        "endLineNumber" : 73,
        "endColumnNumber" : 71
      },
      "nodeContext" : "labelValues[i + 1]=values.getValues()[i];\n",
      "nodeType" : "ExpressionStatement",
      "astNodeNumber" : 12,
      "astHeight" : 5
    },
    "tokenLength" : 3,
    "type" : "java.lang.String"
  } ],
  "positionList" : [ {
    "charLength" : 21,
    "startLineNumber" : 73,
    "startColumnNumber" : 49,
    "endLineNumber" : 73,
    "endColumnNumber" : 70
  } ],
  "layoutRelationDataList" : [ ]
}