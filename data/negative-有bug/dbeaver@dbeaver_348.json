{
  "id" : 348,
  "expression" : "CommonUtils.isEmpty(entityAttrs)",
  "projectName" : "dbeaver@dbeaver",
  "commitID" : "aecf0da5baef5ea4aa1675578670cf057248123d",
  "filePath" : "/plugins/org.jkiss.dbeaver.model/src/org/jkiss/dbeaver/model/DBUtils.java",
  "occurrences" : 1,
  "isArithmeticExpression" : 0,
  "isGetTypeMethod" : 0,
  "expressionList" : [ {
    "nodeContext" : "CommonUtils.isEmpty(entityAttrs)",
    "nodeType" : "MethodInvocation",
    "nodePosition" : {
      "charLength" : 32,
      "startLineNumber" : 763,
      "startColumnNumber" : 29,
      "endLineNumber" : 763,
      "endColumnNumber" : 61
    },
    "astNodeNumber" : 4,
    "astHeight" : 2,
    "parentDataList" : [ {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
      "nodePosition" : {
        "charLength" : 33,
        "startLineNumber" : 763,
        "startColumnNumber" : 28,
        "endLineNumber" : 763,
        "endColumnNumber" : 61
      },
      "nodeContext" : "!CommonUtils.isEmpty(entityAttrs)",
      "nodeType" : "PrefixExpression",
      "astNodeNumber" : 5,
      "astHeight" : 3
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 282,
        "startLineNumber" : 763,
        "startColumnNumber" : 24,
        "endLineNumber" : 767,
        "endColumnNumber" : 25
      },
      "nodeContext" : "if (!CommonUtils.isEmpty(entityAttrs)) {\n  for (  DBSEntityAttribute ea : entityAttrs) {\n    metaColumns.add(new DBDAttributeBindingType(docBinding,ea,metaColumns.size()));\n  }\n}\n",
      "nodeType" : "IfStatement",
      "astNodeNumber" : 26,
      "astHeight" : 9
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
      "nodePosition" : {
        "charLength" : 464,
        "startLineNumber" : 761,
        "startColumnNumber" : 43,
        "endLineNumber" : 768,
        "endColumnNumber" : 21
      },
      "nodeContext" : "{\n  Collection<? extends DBSEntityAttribute> entityAttrs=docEntity.getAttributes(session.getProgressMonitor());\n  if (!CommonUtils.isEmpty(entityAttrs)) {\n    for (    DBSEntityAttribute ea : entityAttrs) {\n      metaColumns.add(new DBDAttributeBindingType(docBinding,ea,metaColumns.size()));\n    }\n  }\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 42,
      "astHeight" : 10
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 487,
        "startLineNumber" : 761,
        "startColumnNumber" : 20,
        "endLineNumber" : 768,
        "endColumnNumber" : 21
      },
      "nodeContext" : "if (docEntity != null) {\n  Collection<? extends DBSEntityAttribute> entityAttrs=docEntity.getAttributes(session.getProgressMonitor());\n  if (!CommonUtils.isEmpty(entityAttrs)) {\n    for (    DBSEntityAttribute ea : entityAttrs) {\n      metaColumns.add(new DBDAttributeBindingType(docBinding,ea,metaColumns.size()));\n    }\n  }\n}\n",
      "nodeType" : "IfStatement",
      "astNodeNumber" : 46,
      "astHeight" : 11
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.TryStatement,body]",
      "nodePosition" : {
        "charLength" : 688,
        "startLineNumber" : 759,
        "startColumnNumber" : 20,
        "endLineNumber" : 769,
        "endColumnNumber" : 17
      },
      "nodeContext" : "{\n  DBSEntity docEntity=getEntityFromMetaData(session.getProgressMonitor(),session.getExecutionContext(),attributeMeta.getEntityMetaData());\n  if (docEntity != null) {\n    Collection<? extends DBSEntityAttribute> entityAttrs=docEntity.getAttributes(session.getProgressMonitor());\n    if (!CommonUtils.isEmpty(entityAttrs)) {\n      for (      DBSEntityAttribute ea : entityAttrs) {\n        metaColumns.add(new DBDAttributeBindingType(docBinding,ea,metaColumns.size()));\n      }\n    }\n  }\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 63,
      "astHeight" : 12
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 817,
        "startLineNumber" : 759,
        "startColumnNumber" : 16,
        "endLineNumber" : 771,
        "endColumnNumber" : 17
      },
      "nodeContext" : "try {\n  DBSEntity docEntity=getEntityFromMetaData(session.getProgressMonitor(),session.getExecutionContext(),attributeMeta.getEntityMetaData());\n  if (docEntity != null) {\n    Collection<? extends DBSEntityAttribute> entityAttrs=docEntity.getAttributes(session.getProgressMonitor());\n    if (!CommonUtils.isEmpty(entityAttrs)) {\n      for (      DBSEntityAttribute ea : entityAttrs) {\n        metaColumns.add(new DBDAttributeBindingType(docBinding,ea,metaColumns.size()));\n      }\n    }\n  }\n}\n catch (DBException e) {\n  log.debug(\"Error getting attributes from document entity\",e);\n}\n",
      "nodeType" : "TryStatement",
      "astNodeNumber" : 76,
      "astHeight" : 13
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
      "nodePosition" : {
        "charLength" : 917,
        "startLineNumber" : 757,
        "startColumnNumber" : 19,
        "endLineNumber" : 772,
        "endColumnNumber" : 13
      },
      "nodeContext" : "{\n  try {\n    DBSEntity docEntity=getEntityFromMetaData(session.getProgressMonitor(),session.getExecutionContext(),attributeMeta.getEntityMetaData());\n    if (docEntity != null) {\n      Collection<? extends DBSEntityAttribute> entityAttrs=docEntity.getAttributes(session.getProgressMonitor());\n      if (!CommonUtils.isEmpty(entityAttrs)) {\n        for (        DBSEntityAttribute ea : entityAttrs) {\n          metaColumns.add(new DBDAttributeBindingType(docBinding,ea,metaColumns.size()));\n        }\n      }\n    }\n  }\n catch (  DBException e) {\n    log.debug(\"Error getting attributes from document entity\",e);\n  }\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 77,
      "astHeight" : 14
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 1016,
        "startLineNumber" : 755,
        "startColumnNumber" : 12,
        "endLineNumber" : 772,
        "endColumnNumber" : 13
      },
      "nodeContext" : "if (!CommonUtils.isEmpty(nested)) {\n  metaColumns.addAll(nested);\n}\n else {\n  try {\n    DBSEntity docEntity=getEntityFromMetaData(session.getProgressMonitor(),session.getExecutionContext(),attributeMeta.getEntityMetaData());\n    if (docEntity != null) {\n      Collection<? extends DBSEntityAttribute> entityAttrs=docEntity.getAttributes(session.getProgressMonitor());\n      if (!CommonUtils.isEmpty(entityAttrs)) {\n        for (        DBSEntityAttribute ea : entityAttrs) {\n          metaColumns.add(new DBDAttributeBindingType(docBinding,ea,metaColumns.size()));\n        }\n      }\n    }\n  }\n catch (  DBException e) {\n    log.debug(\"Error getting attributes from document entity\",e);\n  }\n}\n",
      "nodeType" : "IfStatement",
      "astNodeNumber" : 89,
      "astHeight" : 15
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
      "nodePosition" : {
        "charLength" : 1967,
        "startLineNumber" : 740,
        "startColumnNumber" : 95,
        "endLineNumber" : 773,
        "endColumnNumber" : 9
      },
      "nodeContext" : "{\n  DBCAttributeMetaData attributeMeta=attributes.get(0);\n  DBDAttributeBindingMeta docBinding=DBUtils.getAttributeBinding(dataContainer,session,attributeMeta);\n  try {\n    List<Object[]> sampleRows=Collections.emptyList();\n    if (resultSet instanceof DBCResultSetSampleProvider) {\n      session.getProgressMonitor().subTask(\"Read sample rows\");\n      sampleRows=((DBCResultSetSampleProvider)resultSet).getSampleRows(session,MAX_SAMPLE_ROWS);\n    }\n    session.getProgressMonitor().subTask(\"Discover attribute structure\");\n    docBinding.lateBinding(session,sampleRows);\n  }\n catch (  Exception e) {\n    log.error(\"Document attribute '\" + docBinding.getName() + \"' binding error\",e);\n  }\n  List<DBDAttributeBinding> nested=docBinding.getNestedBindings();\n  if (!CommonUtils.isEmpty(nested)) {\n    metaColumns.addAll(nested);\n  }\n else {\n    try {\n      DBSEntity docEntity=getEntityFromMetaData(session.getProgressMonitor(),session.getExecutionContext(),attributeMeta.getEntityMetaData());\n      if (docEntity != null) {\n        Collection<? extends DBSEntityAttribute> entityAttrs=docEntity.getAttributes(session.getProgressMonitor());\n        if (!CommonUtils.isEmpty(entityAttrs)) {\n          for (          DBSEntityAttribute ea : entityAttrs) {\n            metaColumns.add(new DBDAttributeBindingType(docBinding,ea,metaColumns.size()));\n          }\n        }\n      }\n    }\n catch (    DBException e) {\n      log.debug(\"Error getting attributes from document entity\",e);\n    }\n  }\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 191,
      "astHeight" : 16
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 2054,
        "startLineNumber" : 740,
        "startColumnNumber" : 8,
        "endLineNumber" : 773,
        "endColumnNumber" : 9
      },
      "nodeContext" : "if (attributes.size() == 1 && attributes.get(0).getDataKind() == DBPDataKind.DOCUMENT) {\n  DBCAttributeMetaData attributeMeta=attributes.get(0);\n  DBDAttributeBindingMeta docBinding=DBUtils.getAttributeBinding(dataContainer,session,attributeMeta);\n  try {\n    List<Object[]> sampleRows=Collections.emptyList();\n    if (resultSet instanceof DBCResultSetSampleProvider) {\n      session.getProgressMonitor().subTask(\"Read sample rows\");\n      sampleRows=((DBCResultSetSampleProvider)resultSet).getSampleRows(session,MAX_SAMPLE_ROWS);\n    }\n    session.getProgressMonitor().subTask(\"Discover attribute structure\");\n    docBinding.lateBinding(session,sampleRows);\n  }\n catch (  Exception e) {\n    log.error(\"Document attribute '\" + docBinding.getName() + \"' binding error\",e);\n  }\n  List<DBDAttributeBinding> nested=docBinding.getNestedBindings();\n  if (!CommonUtils.isEmpty(nested)) {\n    metaColumns.addAll(nested);\n  }\n else {\n    try {\n      DBSEntity docEntity=getEntityFromMetaData(session.getProgressMonitor(),session.getExecutionContext(),attributeMeta.getEntityMetaData());\n      if (docEntity != null) {\n        Collection<? extends DBSEntityAttribute> entityAttrs=docEntity.getAttributes(session.getProgressMonitor());\n        if (!CommonUtils.isEmpty(entityAttrs)) {\n          for (          DBSEntityAttribute ea : entityAttrs) {\n            metaColumns.add(new DBDAttributeBindingType(docBinding,ea,metaColumns.size()));\n          }\n        }\n      }\n    }\n catch (    DBException e) {\n      log.debug(\"Error getting attributes from document entity\",e);\n    }\n  }\n}\n",
      "nodeType" : "IfStatement",
      "astNodeNumber" : 208,
      "astHeight" : 17
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
      "nodePosition" : {
        "charLength" : 2846,
        "startLineNumber" : 737,
        "startColumnNumber" : 189,
        "endLineNumber" : 787,
        "endColumnNumber" : 5
      },
      "nodeContext" : "{\n  List<DBDAttributeBinding> metaColumns=new ArrayList<>();\n  List<DBCAttributeMetaData> attributes=resultSet.getMeta().getAttributes();\n  if (attributes.size() == 1 && attributes.get(0).getDataKind() == DBPDataKind.DOCUMENT) {\n    DBCAttributeMetaData attributeMeta=attributes.get(0);\n    DBDAttributeBindingMeta docBinding=DBUtils.getAttributeBinding(dataContainer,session,attributeMeta);\n    try {\n      List<Object[]> sampleRows=Collections.emptyList();\n      if (resultSet instanceof DBCResultSetSampleProvider) {\n        session.getProgressMonitor().subTask(\"Read sample rows\");\n        sampleRows=((DBCResultSetSampleProvider)resultSet).getSampleRows(session,MAX_SAMPLE_ROWS);\n      }\n      session.getProgressMonitor().subTask(\"Discover attribute structure\");\n      docBinding.lateBinding(session,sampleRows);\n    }\n catch (    Exception e) {\n      log.error(\"Document attribute '\" + docBinding.getName() + \"' binding error\",e);\n    }\n    List<DBDAttributeBinding> nested=docBinding.getNestedBindings();\n    if (!CommonUtils.isEmpty(nested)) {\n      metaColumns.addAll(nested);\n    }\n else {\n      try {\n        DBSEntity docEntity=getEntityFromMetaData(session.getProgressMonitor(),session.getExecutionContext(),attributeMeta.getEntityMetaData());\n        if (docEntity != null) {\n          Collection<? extends DBSEntityAttribute> entityAttrs=docEntity.getAttributes(session.getProgressMonitor());\n          if (!CommonUtils.isEmpty(entityAttrs)) {\n            for (            DBSEntityAttribute ea : entityAttrs) {\n              metaColumns.add(new DBDAttributeBindingType(docBinding,ea,metaColumns.size()));\n            }\n          }\n        }\n      }\n catch (      DBException e) {\n        log.debug(\"Error getting attributes from document entity\",e);\n      }\n    }\n  }\n  if (metaColumns.isEmpty()) {\n    for (    DBCAttributeMetaData attribute : attributes) {\n      DBDAttributeBinding columnBinding=DBUtils.getAttributeBinding(dataContainer,session,attribute);\n      metaColumns.add(columnBinding);\n    }\n  }\n  List<DBDAttributeBinding> result=new ArrayList<>(metaColumns.size());\n  for (  DBDAttributeBinding binding : metaColumns) {\n    addLeafBindings(result,binding);\n  }\n  return injectAndFilterAttributeBindings(session.getDataSource(),dataContainer,result.toArray(new DBDAttributeBinding[0]),true);\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 306,
      "astHeight" : 18
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
      "nodePosition" : {
        "charLength" : 3255,
        "startLineNumber" : 731,
        "startColumnNumber" : 4,
        "endLineNumber" : 787,
        "endColumnNumber" : 5
      },
      "nodeContext" : "/** \n * Returns \"bottom\" level attributes out of resultset. For regular resultsets it is the same as getAttributeBindings, for compelx types it returns only leaf attributes.\n * @return\n */\n@NotNull public static DBDAttributeBinding[] makeLeafAttributeBindings(@NotNull DBCSession session,@NotNull DBSDataContainer dataContainer,@NotNull DBCResultSet resultSet) throws DBCException {\n  List<DBDAttributeBinding> metaColumns=new ArrayList<>();\n  List<DBCAttributeMetaData> attributes=resultSet.getMeta().getAttributes();\n  if (attributes.size() == 1 && attributes.get(0).getDataKind() == DBPDataKind.DOCUMENT) {\n    DBCAttributeMetaData attributeMeta=attributes.get(0);\n    DBDAttributeBindingMeta docBinding=DBUtils.getAttributeBinding(dataContainer,session,attributeMeta);\n    try {\n      List<Object[]> sampleRows=Collections.emptyList();\n      if (resultSet instanceof DBCResultSetSampleProvider) {\n        session.getProgressMonitor().subTask(\"Read sample rows\");\n        sampleRows=((DBCResultSetSampleProvider)resultSet).getSampleRows(session,MAX_SAMPLE_ROWS);\n      }\n      session.getProgressMonitor().subTask(\"Discover attribute structure\");\n      docBinding.lateBinding(session,sampleRows);\n    }\n catch (    Exception e) {\n      log.error(\"Document attribute '\" + docBinding.getName() + \"' binding error\",e);\n    }\n    List<DBDAttributeBinding> nested=docBinding.getNestedBindings();\n    if (!CommonUtils.isEmpty(nested)) {\n      metaColumns.addAll(nested);\n    }\n else {\n      try {\n        DBSEntity docEntity=getEntityFromMetaData(session.getProgressMonitor(),session.getExecutionContext(),attributeMeta.getEntityMetaData());\n        if (docEntity != null) {\n          Collection<? extends DBSEntityAttribute> entityAttrs=docEntity.getAttributes(session.getProgressMonitor());\n          if (!CommonUtils.isEmpty(entityAttrs)) {\n            for (            DBSEntityAttribute ea : entityAttrs) {\n              metaColumns.add(new DBDAttributeBindingType(docBinding,ea,metaColumns.size()));\n            }\n          }\n        }\n      }\n catch (      DBException e) {\n        log.debug(\"Error getting attributes from document entity\",e);\n      }\n    }\n  }\n  if (metaColumns.isEmpty()) {\n    for (    DBCAttributeMetaData attribute : attributes) {\n      DBDAttributeBinding columnBinding=DBUtils.getAttributeBinding(dataContainer,session,attribute);\n      metaColumns.add(columnBinding);\n    }\n  }\n  List<DBDAttributeBinding> result=new ArrayList<>(metaColumns.size());\n  for (  DBDAttributeBinding binding : metaColumns) {\n    addLeafBindings(result,binding);\n  }\n  return injectAndFilterAttributeBindings(session.getDataSource(),dataContainer,result.toArray(new DBDAttributeBinding[0]),true);\n}\n",
      "nodeType" : "MethodDeclaration",
      "astNodeNumber" : 337,
      "astHeight" : 19
    } ],
    "currentLineData" : {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,expression]",
      "nodePosition" : {
        "charLength" : 33,
        "startLineNumber" : 763,
        "startColumnNumber" : 28,
        "endLineNumber" : 763,
        "endColumnNumber" : 61
      },
      "nodeContext" : "!CommonUtils.isEmpty(entityAttrs)",
      "nodeType" : "PrefixExpression",
      "astNodeNumber" : 5,
      "astHeight" : 3
    },
    "tokenLength" : 3,
    "type" : "boolean"
  } ],
  "positionList" : [ {
    "charLength" : 32,
    "startLineNumber" : 763,
    "startColumnNumber" : 29,
    "endLineNumber" : 763,
    "endColumnNumber" : 61
  } ],
  "layoutRelationDataList" : [ ]
}