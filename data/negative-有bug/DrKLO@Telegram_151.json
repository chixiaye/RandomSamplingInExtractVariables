{
  "id" : 151,
  "expression" : "actionBar.createMenu()",
  "projectName" : "DrKLO@Telegram",
  "commitID" : "11fbfb1329df700b203e1852a71c4c11b5ab12f4",
  "filePath" : "/TMessagesProj/src/main/java/org/telegram/ui/ChatEditActivity.java",
  "occurrences" : 1,
  "isArithmeticExpression" : 0,
  "isGetTypeMethod" : 0,
  "expressionList" : [ {
    "nodeContext" : "actionBar.createMenu()",
    "nodeType" : "MethodInvocation",
    "nodePosition" : {
      "charLength" : 22,
      "startLineNumber" : 728,
      "startColumnNumber" : 29,
      "endLineNumber" : 728,
      "endColumnNumber" : 51
    },
    "astNodeNumber" : 3,
    "astHeight" : 2,
    "parentDataList" : [ {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.VariableDeclarationStatement,fragments]",
      "nodePosition" : {
        "charLength" : 29,
        "startLineNumber" : 728,
        "startColumnNumber" : 22,
        "endLineNumber" : 728,
        "endColumnNumber" : 51
      },
      "nodeContext" : "menu=actionBar.createMenu()",
      "nodeType" : "VariableDeclarationFragment",
      "astNodeNumber" : 5,
      "astHeight" : 3
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 44,
        "startLineNumber" : 728,
        "startColumnNumber" : 8,
        "endLineNumber" : 728,
        "endColumnNumber" : 52
      },
      "nodeContext" : "ActionBarMenu menu=actionBar.createMenu();\n",
      "nodeType" : "VariableDeclarationStatement",
      "astNodeNumber" : 8,
      "astHeight" : 4
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
      "nodePosition" : {
        "charLength" : 33263,
        "startLineNumber" : 277,
        "startColumnNumber" : 44,
        "endLineNumber" : 879,
        "endColumnNumber" : 5
      },
      "nodeContext" : "{\n  if (nameTextView != null) {\n    nameTextView.onDestroy();\n  }\n  actionBar.setBackButtonImage(R.drawable.ic_ab_back);\n  actionBar.setAllowOverlayTitle(true);\n  actionBar.setActionBarMenuOnItemClick(new ActionBar.ActionBarMenuOnItemClick(){\n    @Override public void onItemClick(    int id){\n      if (id == -1) {\n        if (checkDiscard()) {\n          finishFragment();\n        }\n      }\n else       if (id == done_button) {\n        processDone();\n      }\n    }\n  }\n);\n  SizeNotifierFrameLayout sizeNotifierFrameLayout=new SizeNotifierFrameLayout(context){\n    private boolean ignoreLayout;\n    @Override protected void onMeasure(    int widthMeasureSpec,    int heightMeasureSpec){\n      int widthSize=MeasureSpec.getSize(widthMeasureSpec);\n      int heightSize=MeasureSpec.getSize(heightMeasureSpec);\n      setMeasuredDimension(widthSize,heightSize);\n      heightSize-=getPaddingTop();\n      measureChildWithMargins(actionBar,widthMeasureSpec,0,heightMeasureSpec,0);\n      int keyboardSize=measureKeyboardHeight();\n      if (keyboardSize > AndroidUtilities.dp(20)) {\n        ignoreLayout=true;\n        nameTextView.hideEmojiView();\n        ignoreLayout=false;\n      }\n      int childCount=getChildCount();\n      for (int i=0; i < childCount; i++) {\n        View child=getChildAt(i);\n        if (child == null || child.getVisibility() == GONE || child == actionBar) {\n          continue;\n        }\n        if (nameTextView != null && nameTextView.isPopupView(child)) {\n          if (AndroidUtilities.isInMultiwindow || AndroidUtilities.isTablet()) {\n            if (AndroidUtilities.isTablet()) {\n              child.measure(MeasureSpec.makeMeasureSpec(widthSize,MeasureSpec.EXACTLY),MeasureSpec.makeMeasureSpec(Math.min(AndroidUtilities.dp(AndroidUtilities.isTablet() ? 200 : 320),heightSize - AndroidUtilities.statusBarHeight + getPaddingTop()),MeasureSpec.EXACTLY));\n            }\n else {\n              child.measure(MeasureSpec.makeMeasureSpec(widthSize,MeasureSpec.EXACTLY),MeasureSpec.makeMeasureSpec(heightSize - AndroidUtilities.statusBarHeight + getPaddingTop(),MeasureSpec.EXACTLY));\n            }\n          }\n else {\n            child.measure(MeasureSpec.makeMeasureSpec(widthSize,MeasureSpec.EXACTLY),MeasureSpec.makeMeasureSpec(child.getLayoutParams().height,MeasureSpec.EXACTLY));\n          }\n        }\n else {\n          measureChildWithMargins(child,widthMeasureSpec,0,heightMeasureSpec,0);\n        }\n      }\n    }\n    @Override protected void onLayout(    boolean changed,    int l,    int t,    int r,    int b){\n      final int count=getChildCount();\n      int keyboardSize=measureKeyboardHeight();\n      int paddingBottom=keyboardSize <= AndroidUtilities.dp(20) && !AndroidUtilities.isInMultiwindow && !AndroidUtilities.isTablet() ? nameTextView.getEmojiPadding() : 0;\n      setBottomClip(paddingBottom);\n      for (int i=0; i < count; i++) {\n        final View child=getChildAt(i);\n        if (child.getVisibility() == GONE) {\n          continue;\n        }\n        final LayoutParams lp=(LayoutParams)child.getLayoutParams();\n        final int width=child.getMeasuredWidth();\n        final int height=child.getMeasuredHeight();\n        int childLeft;\n        int childTop;\n        int gravity=lp.gravity;\n        if (gravity == -1) {\n          gravity=Gravity.TOP | Gravity.LEFT;\n        }\n        final int absoluteGravity=gravity & Gravity.HORIZONTAL_GRAVITY_MASK;\n        final int verticalGravity=gravity & Gravity.VERTICAL_GRAVITY_MASK;\nswitch (absoluteGravity & Gravity.HORIZONTAL_GRAVITY_MASK) {\ncase Gravity.CENTER_HORIZONTAL:          childLeft=(r - l - width) / 2 + lp.leftMargin - lp.rightMargin;\n        break;\ncase Gravity.RIGHT:      childLeft=r - width - lp.rightMargin;\n    break;\ncase Gravity.LEFT:default:  childLeft=lp.leftMargin;\n}\nswitch (verticalGravity) {\ncase Gravity.TOP:childTop=lp.topMargin + getPaddingTop();\nbreak;\ncase Gravity.CENTER_VERTICAL:childTop=((b - paddingBottom) - t - height) / 2 + lp.topMargin - lp.bottomMargin;\nbreak;\ncase Gravity.BOTTOM:childTop=((b - paddingBottom) - t) - height - lp.bottomMargin;\nbreak;\ndefault:childTop=lp.topMargin;\n}\nif (nameTextView != null && nameTextView.isPopupView(child)) {\nif (AndroidUtilities.isTablet()) {\nchildTop=getMeasuredHeight() - child.getMeasuredHeight();\n}\n else {\nchildTop=getMeasuredHeight() + keyboardSize - child.getMeasuredHeight();\n}\n}\nchild.layout(childLeft,childTop,childLeft + width,childTop + height);\n}\nnotifyHeightChanged();\n}\n@Override public void requestLayout(){\nif (ignoreLayout) {\nreturn;\n}\nsuper.requestLayout();\n}\n}\n;\nsizeNotifierFrameLayout.setOnTouchListener((v,event) -> true);\nfragmentView=sizeNotifierFrameLayout;\nfragmentView.setBackgroundColor(Theme.getColor(Theme.key_windowBackgroundGray));\nScrollView scrollView=new ScrollView(context);\nscrollView.setFillViewport(true);\nsizeNotifierFrameLayout.addView(scrollView,LayoutHelper.createFrame(LayoutHelper.MATCH_PARENT,LayoutHelper.MATCH_PARENT));\nLinearLayout linearLayout1=new LinearLayout(context);\nscrollView.addView(linearLayout1,new ScrollView.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT,ViewGroup.LayoutParams.WRAP_CONTENT));\nlinearLayout1.setOrientation(LinearLayout.VERTICAL);\nactionBar.setTitle(LocaleController.getString(\"ChannelEdit\",R.string.ChannelEdit));\navatarContainer=new LinearLayout(context);\navatarContainer.setOrientation(LinearLayout.VERTICAL);\navatarContainer.setBackgroundColor(Theme.getColor(Theme.key_windowBackgroundWhite));\nlinearLayout1.addView(avatarContainer,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\nFrameLayout frameLayout=new FrameLayout(context);\navatarContainer.addView(frameLayout,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\navatarImage=new BackupImageView(context){\n@Override public void invalidate(){\nif (avatarOverlay != null) {\navatarOverlay.invalidate();\n}\nsuper.invalidate();\n}\n@Override public void invalidate(int l,int t,int r,int b){\nif (avatarOverlay != null) {\navatarOverlay.invalidate();\n}\nsuper.invalidate(l,t,r,b);\n}\n}\n;\navatarImage.setRoundRadius(AndroidUtilities.dp(32));\nif (ChatObject.canChangeChatInfo(currentChat)) {\nframeLayout.addView(avatarImage,LayoutHelper.createFrame(64,64,Gravity.TOP | (LocaleController.isRTL ? Gravity.RIGHT : Gravity.LEFT),LocaleController.isRTL ? 0 : 16,12,LocaleController.isRTL ? 16 : 0,8));\nPaint paint=new Paint(Paint.ANTI_ALIAS_FLAG);\npaint.setColor(0x55000000);\navatarOverlay=new View(context){\n@Override protected void onDraw(Canvas canvas){\nif (avatarImage != null && avatarImage.getImageReceiver().hasNotThumb()) {\npaint.setAlpha((int)(0x55 * avatarImage.getImageReceiver().getCurrentAlpha()));\ncanvas.drawCircle(getMeasuredWidth() / 2.0f,getMeasuredHeight() / 2.0f,getMeasuredWidth() / 2.0f,paint);\n}\n}\n}\n;\nframeLayout.addView(avatarOverlay,LayoutHelper.createFrame(64,64,Gravity.TOP | (LocaleController.isRTL ? Gravity.RIGHT : Gravity.LEFT),LocaleController.isRTL ? 0 : 16,12,LocaleController.isRTL ? 16 : 0,8));\navatarProgressView=new RadialProgressView(context);\navatarProgressView.setSize(AndroidUtilities.dp(30));\navatarProgressView.setProgressColor(0xffffffff);\navatarProgressView.setNoProgress(false);\nframeLayout.addView(avatarProgressView,LayoutHelper.createFrame(64,64,Gravity.TOP | (LocaleController.isRTL ? Gravity.RIGHT : Gravity.LEFT),LocaleController.isRTL ? 0 : 16,12,LocaleController.isRTL ? 16 : 0,8));\nshowAvatarProgress(false,false);\navatarContainer.setOnClickListener(v -> {\nif (imageUpdater.isUploadingImage()) {\nreturn;\n}\nTLRPC.Chat chat=getMessagesController().getChat(chatId);\nif (chat.photo != null && chat.photo.photo_big != null) {\nPhotoViewer.getInstance().setParentActivity(getParentActivity());\nif (chat.photo.dc_id != 0) {\nchat.photo.photo_big.dc_id=chat.photo.dc_id;\n}\nImageLocation videoLocation;\nif (info != null && (info.chat_photo instanceof TLRPC.TL_photo) && !info.chat_photo.video_sizes.isEmpty()) {\nvideoLocation=ImageLocation.getForPhoto(info.chat_photo.video_sizes.get(0),info.chat_photo);\n}\n else {\nvideoLocation=null;\n}\nPhotoViewer.getInstance().openPhotoWithVideo(chat.photo.photo_big,videoLocation,provider);\n}\n}\n);\n}\n else {\nframeLayout.addView(avatarImage,LayoutHelper.createFrame(64,64,Gravity.TOP | (LocaleController.isRTL ? Gravity.RIGHT : Gravity.LEFT),LocaleController.isRTL ? 0 : 16,12,LocaleController.isRTL ? 16 : 0,12));\n}\nnameTextView=new EditTextEmoji(context,sizeNotifierFrameLayout,this,EditTextEmoji.STYLE_FRAGMENT);\nif (isChannel) {\nnameTextView.setHint(LocaleController.getString(\"EnterChannelName\",R.string.EnterChannelName));\n}\n else {\nnameTextView.setHint(LocaleController.getString(\"GroupName\",R.string.GroupName));\n}\nnameTextView.setEnabled(ChatObject.canChangeChatInfo(currentChat));\nnameTextView.setFocusable(nameTextView.isEnabled());\nnameTextView.getEditText().addTextChangedListener(new TextWatcher(){\n@Override public void beforeTextChanged(CharSequence s,int start,int count,int after){\n}\n@Override public void onTextChanged(CharSequence s,int start,int before,int count){\n}\n@Override public void afterTextChanged(Editable s){\navatarDrawable.setInfo(5,nameTextView.getText().toString(),null);\nif (avatarImage != null) {\navatarImage.invalidate();\n}\n}\n}\n);\nInputFilter[] inputFilters=new InputFilter[1];\ninputFilters[0]=new InputFilter.LengthFilter(128);\nnameTextView.setFilters(inputFilters);\nframeLayout.addView(nameTextView,LayoutHelper.createFrame(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT,Gravity.CENTER_VERTICAL,LocaleController.isRTL ? 5 : 96,0,LocaleController.isRTL ? 96 : 5,0));\nsettingsContainer=new LinearLayout(context);\nsettingsContainer.setOrientation(LinearLayout.VERTICAL);\nsettingsContainer.setBackgroundColor(Theme.getColor(Theme.key_windowBackgroundWhite));\nlinearLayout1.addView(settingsContainer,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\nif (ChatObject.canChangeChatInfo(currentChat)) {\nsetAvatarCell=new TextCell(context){\n@Override protected void onDraw(Canvas canvas){\ncanvas.drawLine(LocaleController.isRTL ? 0 : AndroidUtilities.dp(20),getMeasuredHeight() - 1,getMeasuredWidth() - (LocaleController.isRTL ? AndroidUtilities.dp(20) : 0),getMeasuredHeight() - 1,Theme.dividerPaint);\n}\n}\n;\nsetAvatarCell.setBackgroundDrawable(Theme.getSelectorDrawable(false));\nsetAvatarCell.setColors(Theme.key_windowBackgroundWhiteBlueIcon,Theme.key_windowBackgroundWhiteBlueButton);\nsetAvatarCell.setOnClickListener(v -> imageUpdater.openMenu(avatar != null,() -> {\navatar=null;\nMessagesController.getInstance(currentAccount).changeChatAvatar(chatId,null,null,null,0,null,null,null);\nshowAvatarProgress(false,true);\navatarImage.setImage(null,null,avatarDrawable,currentChat);\n}\n));\nsettingsContainer.addView(setAvatarCell,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\n}\ndescriptionTextView=new EditTextBoldCursor(context);\ndescriptionTextView.setTextSize(TypedValue.COMPLEX_UNIT_DIP,16);\ndescriptionTextView.setHintTextColor(Theme.getColor(Theme.key_windowBackgroundWhiteHintText));\ndescriptionTextView.setTextColor(Theme.getColor(Theme.key_windowBackgroundWhiteBlackText));\ndescriptionTextView.setPadding(0,0,0,AndroidUtilities.dp(6));\ndescriptionTextView.setBackgroundDrawable(null);\ndescriptionTextView.setGravity(LocaleController.isRTL ? Gravity.RIGHT : Gravity.LEFT);\ndescriptionTextView.setInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_FLAG_CAP_SENTENCES | InputType.TYPE_TEXT_FLAG_MULTI_LINE| InputType.TYPE_TEXT_FLAG_AUTO_CORRECT);\ndescriptionTextView.setImeOptions(EditorInfo.IME_ACTION_DONE);\ndescriptionTextView.setEnabled(ChatObject.canChangeChatInfo(currentChat));\ndescriptionTextView.setFocusable(descriptionTextView.isEnabled());\ninputFilters=new InputFilter[1];\ninputFilters[0]=new InputFilter.LengthFilter(255);\ndescriptionTextView.setFilters(inputFilters);\ndescriptionTextView.setHint(LocaleController.getString(\"DescriptionOptionalPlaceholder\",R.string.DescriptionOptionalPlaceholder));\ndescriptionTextView.setCursorColor(Theme.getColor(Theme.key_windowBackgroundWhiteBlackText));\ndescriptionTextView.setCursorSize(AndroidUtilities.dp(20));\ndescriptionTextView.setCursorWidth(1.5f);\nif (descriptionTextView.isEnabled()) {\nsettingsContainer.addView(descriptionTextView,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT,23,15,23,9));\n}\n else {\nsettingsContainer.addView(descriptionTextView,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT,23,12,23,6));\n}\ndescriptionTextView.setOnEditorActionListener((textView,i,keyEvent) -> {\nif (i == EditorInfo.IME_ACTION_DONE && doneButton != null) {\ndoneButton.performClick();\nreturn true;\n}\nreturn false;\n}\n);\ndescriptionTextView.addTextChangedListener(new TextWatcher(){\n@Override public void beforeTextChanged(CharSequence charSequence,int i,int i2,int i3){\n}\n@Override public void onTextChanged(CharSequence charSequence,int i,int i2,int i3){\n}\n@Override public void afterTextChanged(Editable editable){\n}\n}\n);\nsettingsTopSectionCell=new ShadowSectionCell(context);\nlinearLayout1.addView(settingsTopSectionCell,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\ntypeEditContainer=new LinearLayout(context);\ntypeEditContainer.setOrientation(LinearLayout.VERTICAL);\ntypeEditContainer.setBackgroundColor(Theme.getColor(Theme.key_windowBackgroundWhite));\nlinearLayout1.addView(typeEditContainer,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\nif (currentChat.megagroup && (info == null || info.can_set_location)) {\nlocationCell=new TextDetailCell(context);\nlocationCell.setBackgroundDrawable(Theme.getSelectorDrawable(false));\ntypeEditContainer.addView(locationCell,LayoutHelper.createLinear(ViewGroup.LayoutParams.MATCH_PARENT,ViewGroup.LayoutParams.WRAP_CONTENT));\nlocationCell.setOnClickListener(v -> {\nif (!AndroidUtilities.isGoogleMapsInstalled(ChatEditActivity.this)) {\nreturn;\n}\nLocationActivity fragment=new LocationActivity(LocationActivity.LOCATION_TYPE_GROUP);\nfragment.setDialogId(-chatId);\nif (info != null && info.location instanceof TLRPC.TL_channelLocation) {\nfragment.setInitialLocation((TLRPC.TL_channelLocation)info.location);\n}\nfragment.setDelegate((location,live,notify,scheduleDate) -> {\nTLRPC.TL_channelLocation channelLocation=new TLRPC.TL_channelLocation();\nchannelLocation.address=location.address;\nchannelLocation.geo_point=location.geo;\ninfo.location=channelLocation;\ninfo.flags|=32768;\nupdateFields(false);\ngetMessagesController().loadFullChat(chatId,0,true);\n}\n);\npresentFragment(fragment);\n}\n);\n}\nif (currentChat.creator && (info == null || info.can_set_username)) {\ntypeCell=new TextDetailCell(context);\ntypeCell.setBackgroundDrawable(Theme.getSelectorDrawable(false));\ntypeEditContainer.addView(typeCell,LayoutHelper.createLinear(ViewGroup.LayoutParams.MATCH_PARENT,ViewGroup.LayoutParams.WRAP_CONTENT));\ntypeCell.setOnClickListener(v -> {\nChatEditTypeActivity fragment=new ChatEditTypeActivity(chatId,locationCell != null && locationCell.getVisibility() == View.VISIBLE);\nfragment.setInfo(info);\npresentFragment(fragment);\n}\n);\n}\nif (ChatObject.isChannel(currentChat) && (isChannel && ChatObject.canUserDoAdminAction(currentChat,ChatObject.ACTION_CHANGE_INFO) || !isChannel && ChatObject.canUserDoAdminAction(currentChat,ChatObject.ACTION_PIN))) {\nlinkedCell=new TextDetailCell(context);\nlinkedCell.setBackgroundDrawable(Theme.getSelectorDrawable(false));\ntypeEditContainer.addView(linkedCell,LayoutHelper.createLinear(ViewGroup.LayoutParams.MATCH_PARENT,ViewGroup.LayoutParams.WRAP_CONTENT));\nlinkedCell.setOnClickListener(v -> {\nChatLinkActivity fragment=new ChatLinkActivity(chatId);\nfragment.setInfo(info);\npresentFragment(fragment);\n}\n);\n}\nif (!isChannel && ChatObject.canBlockUsers(currentChat) && (ChatObject.isChannel(currentChat) || currentChat.creator)) {\nhistoryCell=new TextDetailCell(context);\nhistoryCell.setBackgroundDrawable(Theme.getSelectorDrawable(false));\ntypeEditContainer.addView(historyCell,LayoutHelper.createLinear(ViewGroup.LayoutParams.MATCH_PARENT,ViewGroup.LayoutParams.WRAP_CONTENT));\nhistoryCell.setOnClickListener(v -> {\nBottomSheet.Builder builder=new BottomSheet.Builder(context);\nbuilder.setApplyTopPadding(false);\nLinearLayout linearLayout=new LinearLayout(context);\nlinearLayout.setOrientation(LinearLayout.VERTICAL);\nHeaderCell headerCell=new HeaderCell(context,Theme.key_dialogTextBlue2,23,15,false);\nheaderCell.setHeight(47);\nheaderCell.setText(LocaleController.getString(\"ChatHistory\",R.string.ChatHistory));\nlinearLayout.addView(headerCell);\nLinearLayout linearLayoutInviteContainer=new LinearLayout(context);\nlinearLayoutInviteContainer.setOrientation(LinearLayout.VERTICAL);\nlinearLayout.addView(linearLayoutInviteContainer,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\nRadioButtonCell[] buttons=new RadioButtonCell[2];\nfor (int a=0; a < 2; a++) {\nbuttons[a]=new RadioButtonCell(context,true);\nbuttons[a].setTag(a);\nbuttons[a].setBackgroundDrawable(Theme.getSelectorDrawable(false));\nif (a == 0) {\nbuttons[a].setTextAndValue(LocaleController.getString(\"ChatHistoryVisible\",R.string.ChatHistoryVisible),LocaleController.getString(\"ChatHistoryVisibleInfo\",R.string.ChatHistoryVisibleInfo),true,!historyHidden);\n}\n else {\nif (ChatObject.isChannel(currentChat)) {\nbuttons[a].setTextAndValue(LocaleController.getString(\"ChatHistoryHidden\",R.string.ChatHistoryHidden),LocaleController.getString(\"ChatHistoryHiddenInfo\",R.string.ChatHistoryHiddenInfo),false,historyHidden);\n}\n else {\nbuttons[a].setTextAndValue(LocaleController.getString(\"ChatHistoryHidden\",R.string.ChatHistoryHidden),LocaleController.getString(\"ChatHistoryHiddenInfo2\",R.string.ChatHistoryHiddenInfo2),false,historyHidden);\n}\n}\nlinearLayoutInviteContainer.addView(buttons[a],LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\nbuttons[a].setOnClickListener(v2 -> {\nInteger tag=(Integer)v2.getTag();\nbuttons[0].setChecked(tag == 0,true);\nbuttons[1].setChecked(tag == 1,true);\nhistoryHidden=tag == 1;\nbuilder.getDismissRunnable().run();\nupdateFields(true);\n}\n);\n}\nbuilder.setCustomView(linearLayout);\nshowDialog(builder.create());\n}\n);\n}\nif (isChannel) {\nsignCell=new TextCheckCell(context);\nsignCell.setBackgroundDrawable(Theme.getSelectorDrawable(false));\nsignCell.setTextAndValueAndCheck(LocaleController.getString(\"ChannelSignMessages\",R.string.ChannelSignMessages),LocaleController.getString(\"ChannelSignMessagesInfo\",R.string.ChannelSignMessagesInfo),signMessages,true,false);\ntypeEditContainer.addView(signCell,LayoutHelper.createFrame(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\nsignCell.setOnClickListener(v -> {\nsignMessages=!signMessages;\n((TextCheckCell)v).setChecked(signMessages);\n}\n);\n}\nActionBarMenu menu=actionBar.createMenu();\nif (ChatObject.canChangeChatInfo(currentChat) || signCell != null || historyCell != null) {\ndoneButton=menu.addItemWithWidth(done_button,R.drawable.ic_done,AndroidUtilities.dp(56));\ndoneButton.setContentDescription(LocaleController.getString(\"Done\",R.string.Done));\n}\nif (locationCell != null || signCell != null || historyCell != null || typeCell != null || linkedCell != null) {\nsettingsSectionCell=new ShadowSectionCell(context);\nlinearLayout1.addView(settingsSectionCell,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\n}\ninfoContainer=new LinearLayout(context);\ninfoContainer.setOrientation(LinearLayout.VERTICAL);\ninfoContainer.setBackgroundColor(Theme.getColor(Theme.key_windowBackgroundWhite));\nlinearLayout1.addView(infoContainer,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\nblockCell=new TextCell(context);\nblockCell.setBackgroundDrawable(Theme.getSelectorDrawable(false));\nblockCell.setVisibility(ChatObject.isChannel(currentChat) || currentChat.creator ? View.VISIBLE : View.GONE);\nblockCell.setOnClickListener(v -> {\nBundle args=new Bundle();\nargs.putInt(\"chat_id\",chatId);\nargs.putInt(\"type\",!isChannel ? ChatUsersActivity.TYPE_KICKED : ChatUsersActivity.TYPE_BANNED);\nChatUsersActivity fragment=new ChatUsersActivity(args);\nfragment.setInfo(info);\npresentFragment(fragment);\n}\n);\nadminCell=new TextCell(context);\nadminCell.setBackgroundDrawable(Theme.getSelectorDrawable(false));\nadminCell.setOnClickListener(v -> {\nBundle args=new Bundle();\nargs.putInt(\"chat_id\",chatId);\nargs.putInt(\"type\",ChatUsersActivity.TYPE_ADMIN);\nChatUsersActivity fragment=new ChatUsersActivity(args);\nfragment.setInfo(info);\npresentFragment(fragment);\n}\n);\nmembersCell=new TextCell(context);\nmembersCell.setBackgroundDrawable(Theme.getSelectorDrawable(false));\nmembersCell.setOnClickListener(v -> {\nBundle args=new Bundle();\nargs.putInt(\"chat_id\",chatId);\nargs.putInt(\"type\",ChatUsersActivity.TYPE_USERS);\nChatUsersActivity fragment=new ChatUsersActivity(args);\nfragment.setInfo(info);\npresentFragment(fragment);\n}\n);\nif (ChatObject.isChannel(currentChat)) {\nlogCell=new TextCell(context);\nlogCell.setTextAndIcon(LocaleController.getString(\"EventLog\",R.string.EventLog),R.drawable.group_log,false);\nlogCell.setBackgroundDrawable(Theme.getSelectorDrawable(false));\nlogCell.setOnClickListener(v -> presentFragment(new ChannelAdminLogActivity(currentChat)));\n}\nif (!isChannel) {\ninfoContainer.addView(blockCell,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\n}\ninfoContainer.addView(adminCell,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\ninfoContainer.addView(membersCell,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\nif (isChannel) {\ninfoContainer.addView(blockCell,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\n}\nif (logCell != null) {\ninfoContainer.addView(logCell,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\n}\ninfoSectionCell=new ShadowSectionCell(context);\nlinearLayout1.addView(infoSectionCell,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\nif (!ChatObject.hasAdminRights(currentChat)) {\ninfoContainer.setVisibility(View.GONE);\nsettingsTopSectionCell.setVisibility(View.GONE);\n}\nif (!isChannel && info != null && info.can_set_stickers) {\nstickersContainer=new FrameLayout(context);\nstickersContainer.setBackgroundColor(Theme.getColor(Theme.key_windowBackgroundWhite));\nlinearLayout1.addView(stickersContainer,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\nstickersCell=new TextSettingsCell(context);\nstickersCell.setTextColor(Theme.getColor(Theme.key_windowBackgroundWhiteBlackText));\nstickersCell.setBackgroundDrawable(Theme.getSelectorDrawable(false));\nstickersContainer.addView(stickersCell,LayoutHelper.createFrame(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\nstickersCell.setOnClickListener(v -> {\nGroupStickersActivity groupStickersActivity=new GroupStickersActivity(currentChat.id);\ngroupStickersActivity.setInfo(info);\npresentFragment(groupStickersActivity);\n}\n);\nstickersInfoCell3=new TextInfoPrivacyCell(context);\nstickersInfoCell3.setText(LocaleController.getString(\"GroupStickersInfo\",R.string.GroupStickersInfo));\nlinearLayout1.addView(stickersInfoCell3,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\n}\nif (currentChat.creator) {\ndeleteContainer=new FrameLayout(context);\ndeleteContainer.setBackgroundColor(Theme.getColor(Theme.key_windowBackgroundWhite));\nlinearLayout1.addView(deleteContainer,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\ndeleteCell=new TextSettingsCell(context);\ndeleteCell.setTextColor(Theme.getColor(Theme.key_windowBackgroundWhiteRedText5));\ndeleteCell.setBackgroundDrawable(Theme.getSelectorDrawable(false));\nif (isChannel) {\ndeleteCell.setText(LocaleController.getString(\"ChannelDelete\",R.string.ChannelDelete),false);\n}\n else if (currentChat.megagroup) {\ndeleteCell.setText(LocaleController.getString(\"DeleteMega\",R.string.DeleteMega),false);\n}\n else {\ndeleteCell.setText(LocaleController.getString(\"DeleteAndExitButton\",R.string.DeleteAndExitButton),false);\n}\ndeleteContainer.addView(deleteCell,LayoutHelper.createFrame(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\ndeleteCell.setOnClickListener(v -> AlertsCreator.createClearOrDeleteDialogAlert(ChatEditActivity.this,false,true,false,currentChat,null,false,(param) -> {\nif (AndroidUtilities.isTablet()) {\nNotificationCenter.getInstance(currentAccount).postNotificationName(NotificationCenter.closeChats,-(long)chatId);\n}\n else {\nNotificationCenter.getInstance(currentAccount).postNotificationName(NotificationCenter.closeChats);\n}\nMessagesController.getInstance(currentAccount).deleteUserFromChat(chatId,MessagesController.getInstance(currentAccount).getUser(UserConfig.getInstance(currentAccount).getClientUserId()),info,true,false);\nfinishFragment();\n}\n));\ndeleteInfoCell=new ShadowSectionCell(context);\ndeleteInfoCell.setBackgroundDrawable(Theme.getThemedDrawable(context,R.drawable.greydivider_bottom,Theme.key_windowBackgroundGrayShadow));\nlinearLayout1.addView(deleteInfoCell,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\n}\n else {\nif (!isChannel) {\nif (stickersInfoCell3 == null) {\ninfoSectionCell.setBackgroundDrawable(Theme.getThemedDrawable(context,R.drawable.greydivider_bottom,Theme.key_windowBackgroundGrayShadow));\n}\n}\n}\nif (stickersInfoCell3 != null) {\nif (deleteInfoCell == null) {\nstickersInfoCell3.setBackgroundDrawable(Theme.getThemedDrawable(context,R.drawable.greydivider_bottom,Theme.key_windowBackgroundGrayShadow));\n}\n else {\nstickersInfoCell3.setBackgroundDrawable(Theme.getThemedDrawable(context,R.drawable.greydivider,Theme.key_windowBackgroundGrayShadow));\n}\n}\nnameTextView.setText(currentChat.title);\nnameTextView.setSelection(nameTextView.length());\nif (info != null) {\ndescriptionTextView.setText(info.about);\n}\nsetAvatar();\nupdateFields(true);\nreturn fragmentView;\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 3872,
      "astHeight" : 23
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
      "nodePosition" : {
        "charLength" : 33317,
        "startLineNumber" : 276,
        "startColumnNumber" : 4,
        "endLineNumber" : 879,
        "endColumnNumber" : 5
      },
      "nodeContext" : "@Override public View createView(Context context){\n  if (nameTextView != null) {\n    nameTextView.onDestroy();\n  }\n  actionBar.setBackButtonImage(R.drawable.ic_ab_back);\n  actionBar.setAllowOverlayTitle(true);\n  actionBar.setActionBarMenuOnItemClick(new ActionBar.ActionBarMenuOnItemClick(){\n    @Override public void onItemClick(    int id){\n      if (id == -1) {\n        if (checkDiscard()) {\n          finishFragment();\n        }\n      }\n else       if (id == done_button) {\n        processDone();\n      }\n    }\n  }\n);\n  SizeNotifierFrameLayout sizeNotifierFrameLayout=new SizeNotifierFrameLayout(context){\n    private boolean ignoreLayout;\n    @Override protected void onMeasure(    int widthMeasureSpec,    int heightMeasureSpec){\n      int widthSize=MeasureSpec.getSize(widthMeasureSpec);\n      int heightSize=MeasureSpec.getSize(heightMeasureSpec);\n      setMeasuredDimension(widthSize,heightSize);\n      heightSize-=getPaddingTop();\n      measureChildWithMargins(actionBar,widthMeasureSpec,0,heightMeasureSpec,0);\n      int keyboardSize=measureKeyboardHeight();\n      if (keyboardSize > AndroidUtilities.dp(20)) {\n        ignoreLayout=true;\n        nameTextView.hideEmojiView();\n        ignoreLayout=false;\n      }\n      int childCount=getChildCount();\n      for (int i=0; i < childCount; i++) {\n        View child=getChildAt(i);\n        if (child == null || child.getVisibility() == GONE || child == actionBar) {\n          continue;\n        }\n        if (nameTextView != null && nameTextView.isPopupView(child)) {\n          if (AndroidUtilities.isInMultiwindow || AndroidUtilities.isTablet()) {\n            if (AndroidUtilities.isTablet()) {\n              child.measure(MeasureSpec.makeMeasureSpec(widthSize,MeasureSpec.EXACTLY),MeasureSpec.makeMeasureSpec(Math.min(AndroidUtilities.dp(AndroidUtilities.isTablet() ? 200 : 320),heightSize - AndroidUtilities.statusBarHeight + getPaddingTop()),MeasureSpec.EXACTLY));\n            }\n else {\n              child.measure(MeasureSpec.makeMeasureSpec(widthSize,MeasureSpec.EXACTLY),MeasureSpec.makeMeasureSpec(heightSize - AndroidUtilities.statusBarHeight + getPaddingTop(),MeasureSpec.EXACTLY));\n            }\n          }\n else {\n            child.measure(MeasureSpec.makeMeasureSpec(widthSize,MeasureSpec.EXACTLY),MeasureSpec.makeMeasureSpec(child.getLayoutParams().height,MeasureSpec.EXACTLY));\n          }\n        }\n else {\n          measureChildWithMargins(child,widthMeasureSpec,0,heightMeasureSpec,0);\n        }\n      }\n    }\n    @Override protected void onLayout(    boolean changed,    int l,    int t,    int r,    int b){\n      final int count=getChildCount();\n      int keyboardSize=measureKeyboardHeight();\n      int paddingBottom=keyboardSize <= AndroidUtilities.dp(20) && !AndroidUtilities.isInMultiwindow && !AndroidUtilities.isTablet() ? nameTextView.getEmojiPadding() : 0;\n      setBottomClip(paddingBottom);\n      for (int i=0; i < count; i++) {\n        final View child=getChildAt(i);\n        if (child.getVisibility() == GONE) {\n          continue;\n        }\n        final LayoutParams lp=(LayoutParams)child.getLayoutParams();\n        final int width=child.getMeasuredWidth();\n        final int height=child.getMeasuredHeight();\n        int childLeft;\n        int childTop;\n        int gravity=lp.gravity;\n        if (gravity == -1) {\n          gravity=Gravity.TOP | Gravity.LEFT;\n        }\n        final int absoluteGravity=gravity & Gravity.HORIZONTAL_GRAVITY_MASK;\n        final int verticalGravity=gravity & Gravity.VERTICAL_GRAVITY_MASK;\nswitch (absoluteGravity & Gravity.HORIZONTAL_GRAVITY_MASK) {\ncase Gravity.CENTER_HORIZONTAL:          childLeft=(r - l - width) / 2 + lp.leftMargin - lp.rightMargin;\n        break;\ncase Gravity.RIGHT:      childLeft=r - width - lp.rightMargin;\n    break;\ncase Gravity.LEFT:default:  childLeft=lp.leftMargin;\n}\nswitch (verticalGravity) {\ncase Gravity.TOP:childTop=lp.topMargin + getPaddingTop();\nbreak;\ncase Gravity.CENTER_VERTICAL:childTop=((b - paddingBottom) - t - height) / 2 + lp.topMargin - lp.bottomMargin;\nbreak;\ncase Gravity.BOTTOM:childTop=((b - paddingBottom) - t) - height - lp.bottomMargin;\nbreak;\ndefault:childTop=lp.topMargin;\n}\nif (nameTextView != null && nameTextView.isPopupView(child)) {\nif (AndroidUtilities.isTablet()) {\nchildTop=getMeasuredHeight() - child.getMeasuredHeight();\n}\n else {\nchildTop=getMeasuredHeight() + keyboardSize - child.getMeasuredHeight();\n}\n}\nchild.layout(childLeft,childTop,childLeft + width,childTop + height);\n}\nnotifyHeightChanged();\n}\n@Override public void requestLayout(){\nif (ignoreLayout) {\nreturn;\n}\nsuper.requestLayout();\n}\n}\n;\nsizeNotifierFrameLayout.setOnTouchListener((v,event) -> true);\nfragmentView=sizeNotifierFrameLayout;\nfragmentView.setBackgroundColor(Theme.getColor(Theme.key_windowBackgroundGray));\nScrollView scrollView=new ScrollView(context);\nscrollView.setFillViewport(true);\nsizeNotifierFrameLayout.addView(scrollView,LayoutHelper.createFrame(LayoutHelper.MATCH_PARENT,LayoutHelper.MATCH_PARENT));\nLinearLayout linearLayout1=new LinearLayout(context);\nscrollView.addView(linearLayout1,new ScrollView.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT,ViewGroup.LayoutParams.WRAP_CONTENT));\nlinearLayout1.setOrientation(LinearLayout.VERTICAL);\nactionBar.setTitle(LocaleController.getString(\"ChannelEdit\",R.string.ChannelEdit));\navatarContainer=new LinearLayout(context);\navatarContainer.setOrientation(LinearLayout.VERTICAL);\navatarContainer.setBackgroundColor(Theme.getColor(Theme.key_windowBackgroundWhite));\nlinearLayout1.addView(avatarContainer,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\nFrameLayout frameLayout=new FrameLayout(context);\navatarContainer.addView(frameLayout,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\navatarImage=new BackupImageView(context){\n@Override public void invalidate(){\nif (avatarOverlay != null) {\navatarOverlay.invalidate();\n}\nsuper.invalidate();\n}\n@Override public void invalidate(int l,int t,int r,int b){\nif (avatarOverlay != null) {\navatarOverlay.invalidate();\n}\nsuper.invalidate(l,t,r,b);\n}\n}\n;\navatarImage.setRoundRadius(AndroidUtilities.dp(32));\nif (ChatObject.canChangeChatInfo(currentChat)) {\nframeLayout.addView(avatarImage,LayoutHelper.createFrame(64,64,Gravity.TOP | (LocaleController.isRTL ? Gravity.RIGHT : Gravity.LEFT),LocaleController.isRTL ? 0 : 16,12,LocaleController.isRTL ? 16 : 0,8));\nPaint paint=new Paint(Paint.ANTI_ALIAS_FLAG);\npaint.setColor(0x55000000);\navatarOverlay=new View(context){\n@Override protected void onDraw(Canvas canvas){\nif (avatarImage != null && avatarImage.getImageReceiver().hasNotThumb()) {\npaint.setAlpha((int)(0x55 * avatarImage.getImageReceiver().getCurrentAlpha()));\ncanvas.drawCircle(getMeasuredWidth() / 2.0f,getMeasuredHeight() / 2.0f,getMeasuredWidth() / 2.0f,paint);\n}\n}\n}\n;\nframeLayout.addView(avatarOverlay,LayoutHelper.createFrame(64,64,Gravity.TOP | (LocaleController.isRTL ? Gravity.RIGHT : Gravity.LEFT),LocaleController.isRTL ? 0 : 16,12,LocaleController.isRTL ? 16 : 0,8));\navatarProgressView=new RadialProgressView(context);\navatarProgressView.setSize(AndroidUtilities.dp(30));\navatarProgressView.setProgressColor(0xffffffff);\navatarProgressView.setNoProgress(false);\nframeLayout.addView(avatarProgressView,LayoutHelper.createFrame(64,64,Gravity.TOP | (LocaleController.isRTL ? Gravity.RIGHT : Gravity.LEFT),LocaleController.isRTL ? 0 : 16,12,LocaleController.isRTL ? 16 : 0,8));\nshowAvatarProgress(false,false);\navatarContainer.setOnClickListener(v -> {\nif (imageUpdater.isUploadingImage()) {\nreturn;\n}\nTLRPC.Chat chat=getMessagesController().getChat(chatId);\nif (chat.photo != null && chat.photo.photo_big != null) {\nPhotoViewer.getInstance().setParentActivity(getParentActivity());\nif (chat.photo.dc_id != 0) {\nchat.photo.photo_big.dc_id=chat.photo.dc_id;\n}\nImageLocation videoLocation;\nif (info != null && (info.chat_photo instanceof TLRPC.TL_photo) && !info.chat_photo.video_sizes.isEmpty()) {\nvideoLocation=ImageLocation.getForPhoto(info.chat_photo.video_sizes.get(0),info.chat_photo);\n}\n else {\nvideoLocation=null;\n}\nPhotoViewer.getInstance().openPhotoWithVideo(chat.photo.photo_big,videoLocation,provider);\n}\n}\n);\n}\n else {\nframeLayout.addView(avatarImage,LayoutHelper.createFrame(64,64,Gravity.TOP | (LocaleController.isRTL ? Gravity.RIGHT : Gravity.LEFT),LocaleController.isRTL ? 0 : 16,12,LocaleController.isRTL ? 16 : 0,12));\n}\nnameTextView=new EditTextEmoji(context,sizeNotifierFrameLayout,this,EditTextEmoji.STYLE_FRAGMENT);\nif (isChannel) {\nnameTextView.setHint(LocaleController.getString(\"EnterChannelName\",R.string.EnterChannelName));\n}\n else {\nnameTextView.setHint(LocaleController.getString(\"GroupName\",R.string.GroupName));\n}\nnameTextView.setEnabled(ChatObject.canChangeChatInfo(currentChat));\nnameTextView.setFocusable(nameTextView.isEnabled());\nnameTextView.getEditText().addTextChangedListener(new TextWatcher(){\n@Override public void beforeTextChanged(CharSequence s,int start,int count,int after){\n}\n@Override public void onTextChanged(CharSequence s,int start,int before,int count){\n}\n@Override public void afterTextChanged(Editable s){\navatarDrawable.setInfo(5,nameTextView.getText().toString(),null);\nif (avatarImage != null) {\navatarImage.invalidate();\n}\n}\n}\n);\nInputFilter[] inputFilters=new InputFilter[1];\ninputFilters[0]=new InputFilter.LengthFilter(128);\nnameTextView.setFilters(inputFilters);\nframeLayout.addView(nameTextView,LayoutHelper.createFrame(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT,Gravity.CENTER_VERTICAL,LocaleController.isRTL ? 5 : 96,0,LocaleController.isRTL ? 96 : 5,0));\nsettingsContainer=new LinearLayout(context);\nsettingsContainer.setOrientation(LinearLayout.VERTICAL);\nsettingsContainer.setBackgroundColor(Theme.getColor(Theme.key_windowBackgroundWhite));\nlinearLayout1.addView(settingsContainer,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\nif (ChatObject.canChangeChatInfo(currentChat)) {\nsetAvatarCell=new TextCell(context){\n@Override protected void onDraw(Canvas canvas){\ncanvas.drawLine(LocaleController.isRTL ? 0 : AndroidUtilities.dp(20),getMeasuredHeight() - 1,getMeasuredWidth() - (LocaleController.isRTL ? AndroidUtilities.dp(20) : 0),getMeasuredHeight() - 1,Theme.dividerPaint);\n}\n}\n;\nsetAvatarCell.setBackgroundDrawable(Theme.getSelectorDrawable(false));\nsetAvatarCell.setColors(Theme.key_windowBackgroundWhiteBlueIcon,Theme.key_windowBackgroundWhiteBlueButton);\nsetAvatarCell.setOnClickListener(v -> imageUpdater.openMenu(avatar != null,() -> {\navatar=null;\nMessagesController.getInstance(currentAccount).changeChatAvatar(chatId,null,null,null,0,null,null,null);\nshowAvatarProgress(false,true);\navatarImage.setImage(null,null,avatarDrawable,currentChat);\n}\n));\nsettingsContainer.addView(setAvatarCell,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\n}\ndescriptionTextView=new EditTextBoldCursor(context);\ndescriptionTextView.setTextSize(TypedValue.COMPLEX_UNIT_DIP,16);\ndescriptionTextView.setHintTextColor(Theme.getColor(Theme.key_windowBackgroundWhiteHintText));\ndescriptionTextView.setTextColor(Theme.getColor(Theme.key_windowBackgroundWhiteBlackText));\ndescriptionTextView.setPadding(0,0,0,AndroidUtilities.dp(6));\ndescriptionTextView.setBackgroundDrawable(null);\ndescriptionTextView.setGravity(LocaleController.isRTL ? Gravity.RIGHT : Gravity.LEFT);\ndescriptionTextView.setInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_FLAG_CAP_SENTENCES | InputType.TYPE_TEXT_FLAG_MULTI_LINE| InputType.TYPE_TEXT_FLAG_AUTO_CORRECT);\ndescriptionTextView.setImeOptions(EditorInfo.IME_ACTION_DONE);\ndescriptionTextView.setEnabled(ChatObject.canChangeChatInfo(currentChat));\ndescriptionTextView.setFocusable(descriptionTextView.isEnabled());\ninputFilters=new InputFilter[1];\ninputFilters[0]=new InputFilter.LengthFilter(255);\ndescriptionTextView.setFilters(inputFilters);\ndescriptionTextView.setHint(LocaleController.getString(\"DescriptionOptionalPlaceholder\",R.string.DescriptionOptionalPlaceholder));\ndescriptionTextView.setCursorColor(Theme.getColor(Theme.key_windowBackgroundWhiteBlackText));\ndescriptionTextView.setCursorSize(AndroidUtilities.dp(20));\ndescriptionTextView.setCursorWidth(1.5f);\nif (descriptionTextView.isEnabled()) {\nsettingsContainer.addView(descriptionTextView,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT,23,15,23,9));\n}\n else {\nsettingsContainer.addView(descriptionTextView,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT,23,12,23,6));\n}\ndescriptionTextView.setOnEditorActionListener((textView,i,keyEvent) -> {\nif (i == EditorInfo.IME_ACTION_DONE && doneButton != null) {\ndoneButton.performClick();\nreturn true;\n}\nreturn false;\n}\n);\ndescriptionTextView.addTextChangedListener(new TextWatcher(){\n@Override public void beforeTextChanged(CharSequence charSequence,int i,int i2,int i3){\n}\n@Override public void onTextChanged(CharSequence charSequence,int i,int i2,int i3){\n}\n@Override public void afterTextChanged(Editable editable){\n}\n}\n);\nsettingsTopSectionCell=new ShadowSectionCell(context);\nlinearLayout1.addView(settingsTopSectionCell,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\ntypeEditContainer=new LinearLayout(context);\ntypeEditContainer.setOrientation(LinearLayout.VERTICAL);\ntypeEditContainer.setBackgroundColor(Theme.getColor(Theme.key_windowBackgroundWhite));\nlinearLayout1.addView(typeEditContainer,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\nif (currentChat.megagroup && (info == null || info.can_set_location)) {\nlocationCell=new TextDetailCell(context);\nlocationCell.setBackgroundDrawable(Theme.getSelectorDrawable(false));\ntypeEditContainer.addView(locationCell,LayoutHelper.createLinear(ViewGroup.LayoutParams.MATCH_PARENT,ViewGroup.LayoutParams.WRAP_CONTENT));\nlocationCell.setOnClickListener(v -> {\nif (!AndroidUtilities.isGoogleMapsInstalled(ChatEditActivity.this)) {\nreturn;\n}\nLocationActivity fragment=new LocationActivity(LocationActivity.LOCATION_TYPE_GROUP);\nfragment.setDialogId(-chatId);\nif (info != null && info.location instanceof TLRPC.TL_channelLocation) {\nfragment.setInitialLocation((TLRPC.TL_channelLocation)info.location);\n}\nfragment.setDelegate((location,live,notify,scheduleDate) -> {\nTLRPC.TL_channelLocation channelLocation=new TLRPC.TL_channelLocation();\nchannelLocation.address=location.address;\nchannelLocation.geo_point=location.geo;\ninfo.location=channelLocation;\ninfo.flags|=32768;\nupdateFields(false);\ngetMessagesController().loadFullChat(chatId,0,true);\n}\n);\npresentFragment(fragment);\n}\n);\n}\nif (currentChat.creator && (info == null || info.can_set_username)) {\ntypeCell=new TextDetailCell(context);\ntypeCell.setBackgroundDrawable(Theme.getSelectorDrawable(false));\ntypeEditContainer.addView(typeCell,LayoutHelper.createLinear(ViewGroup.LayoutParams.MATCH_PARENT,ViewGroup.LayoutParams.WRAP_CONTENT));\ntypeCell.setOnClickListener(v -> {\nChatEditTypeActivity fragment=new ChatEditTypeActivity(chatId,locationCell != null && locationCell.getVisibility() == View.VISIBLE);\nfragment.setInfo(info);\npresentFragment(fragment);\n}\n);\n}\nif (ChatObject.isChannel(currentChat) && (isChannel && ChatObject.canUserDoAdminAction(currentChat,ChatObject.ACTION_CHANGE_INFO) || !isChannel && ChatObject.canUserDoAdminAction(currentChat,ChatObject.ACTION_PIN))) {\nlinkedCell=new TextDetailCell(context);\nlinkedCell.setBackgroundDrawable(Theme.getSelectorDrawable(false));\ntypeEditContainer.addView(linkedCell,LayoutHelper.createLinear(ViewGroup.LayoutParams.MATCH_PARENT,ViewGroup.LayoutParams.WRAP_CONTENT));\nlinkedCell.setOnClickListener(v -> {\nChatLinkActivity fragment=new ChatLinkActivity(chatId);\nfragment.setInfo(info);\npresentFragment(fragment);\n}\n);\n}\nif (!isChannel && ChatObject.canBlockUsers(currentChat) && (ChatObject.isChannel(currentChat) || currentChat.creator)) {\nhistoryCell=new TextDetailCell(context);\nhistoryCell.setBackgroundDrawable(Theme.getSelectorDrawable(false));\ntypeEditContainer.addView(historyCell,LayoutHelper.createLinear(ViewGroup.LayoutParams.MATCH_PARENT,ViewGroup.LayoutParams.WRAP_CONTENT));\nhistoryCell.setOnClickListener(v -> {\nBottomSheet.Builder builder=new BottomSheet.Builder(context);\nbuilder.setApplyTopPadding(false);\nLinearLayout linearLayout=new LinearLayout(context);\nlinearLayout.setOrientation(LinearLayout.VERTICAL);\nHeaderCell headerCell=new HeaderCell(context,Theme.key_dialogTextBlue2,23,15,false);\nheaderCell.setHeight(47);\nheaderCell.setText(LocaleController.getString(\"ChatHistory\",R.string.ChatHistory));\nlinearLayout.addView(headerCell);\nLinearLayout linearLayoutInviteContainer=new LinearLayout(context);\nlinearLayoutInviteContainer.setOrientation(LinearLayout.VERTICAL);\nlinearLayout.addView(linearLayoutInviteContainer,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\nRadioButtonCell[] buttons=new RadioButtonCell[2];\nfor (int a=0; a < 2; a++) {\nbuttons[a]=new RadioButtonCell(context,true);\nbuttons[a].setTag(a);\nbuttons[a].setBackgroundDrawable(Theme.getSelectorDrawable(false));\nif (a == 0) {\nbuttons[a].setTextAndValue(LocaleController.getString(\"ChatHistoryVisible\",R.string.ChatHistoryVisible),LocaleController.getString(\"ChatHistoryVisibleInfo\",R.string.ChatHistoryVisibleInfo),true,!historyHidden);\n}\n else {\nif (ChatObject.isChannel(currentChat)) {\nbuttons[a].setTextAndValue(LocaleController.getString(\"ChatHistoryHidden\",R.string.ChatHistoryHidden),LocaleController.getString(\"ChatHistoryHiddenInfo\",R.string.ChatHistoryHiddenInfo),false,historyHidden);\n}\n else {\nbuttons[a].setTextAndValue(LocaleController.getString(\"ChatHistoryHidden\",R.string.ChatHistoryHidden),LocaleController.getString(\"ChatHistoryHiddenInfo2\",R.string.ChatHistoryHiddenInfo2),false,historyHidden);\n}\n}\nlinearLayoutInviteContainer.addView(buttons[a],LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\nbuttons[a].setOnClickListener(v2 -> {\nInteger tag=(Integer)v2.getTag();\nbuttons[0].setChecked(tag == 0,true);\nbuttons[1].setChecked(tag == 1,true);\nhistoryHidden=tag == 1;\nbuilder.getDismissRunnable().run();\nupdateFields(true);\n}\n);\n}\nbuilder.setCustomView(linearLayout);\nshowDialog(builder.create());\n}\n);\n}\nif (isChannel) {\nsignCell=new TextCheckCell(context);\nsignCell.setBackgroundDrawable(Theme.getSelectorDrawable(false));\nsignCell.setTextAndValueAndCheck(LocaleController.getString(\"ChannelSignMessages\",R.string.ChannelSignMessages),LocaleController.getString(\"ChannelSignMessagesInfo\",R.string.ChannelSignMessagesInfo),signMessages,true,false);\ntypeEditContainer.addView(signCell,LayoutHelper.createFrame(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\nsignCell.setOnClickListener(v -> {\nsignMessages=!signMessages;\n((TextCheckCell)v).setChecked(signMessages);\n}\n);\n}\nActionBarMenu menu=actionBar.createMenu();\nif (ChatObject.canChangeChatInfo(currentChat) || signCell != null || historyCell != null) {\ndoneButton=menu.addItemWithWidth(done_button,R.drawable.ic_done,AndroidUtilities.dp(56));\ndoneButton.setContentDescription(LocaleController.getString(\"Done\",R.string.Done));\n}\nif (locationCell != null || signCell != null || historyCell != null || typeCell != null || linkedCell != null) {\nsettingsSectionCell=new ShadowSectionCell(context);\nlinearLayout1.addView(settingsSectionCell,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\n}\ninfoContainer=new LinearLayout(context);\ninfoContainer.setOrientation(LinearLayout.VERTICAL);\ninfoContainer.setBackgroundColor(Theme.getColor(Theme.key_windowBackgroundWhite));\nlinearLayout1.addView(infoContainer,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\nblockCell=new TextCell(context);\nblockCell.setBackgroundDrawable(Theme.getSelectorDrawable(false));\nblockCell.setVisibility(ChatObject.isChannel(currentChat) || currentChat.creator ? View.VISIBLE : View.GONE);\nblockCell.setOnClickListener(v -> {\nBundle args=new Bundle();\nargs.putInt(\"chat_id\",chatId);\nargs.putInt(\"type\",!isChannel ? ChatUsersActivity.TYPE_KICKED : ChatUsersActivity.TYPE_BANNED);\nChatUsersActivity fragment=new ChatUsersActivity(args);\nfragment.setInfo(info);\npresentFragment(fragment);\n}\n);\nadminCell=new TextCell(context);\nadminCell.setBackgroundDrawable(Theme.getSelectorDrawable(false));\nadminCell.setOnClickListener(v -> {\nBundle args=new Bundle();\nargs.putInt(\"chat_id\",chatId);\nargs.putInt(\"type\",ChatUsersActivity.TYPE_ADMIN);\nChatUsersActivity fragment=new ChatUsersActivity(args);\nfragment.setInfo(info);\npresentFragment(fragment);\n}\n);\nmembersCell=new TextCell(context);\nmembersCell.setBackgroundDrawable(Theme.getSelectorDrawable(false));\nmembersCell.setOnClickListener(v -> {\nBundle args=new Bundle();\nargs.putInt(\"chat_id\",chatId);\nargs.putInt(\"type\",ChatUsersActivity.TYPE_USERS);\nChatUsersActivity fragment=new ChatUsersActivity(args);\nfragment.setInfo(info);\npresentFragment(fragment);\n}\n);\nif (ChatObject.isChannel(currentChat)) {\nlogCell=new TextCell(context);\nlogCell.setTextAndIcon(LocaleController.getString(\"EventLog\",R.string.EventLog),R.drawable.group_log,false);\nlogCell.setBackgroundDrawable(Theme.getSelectorDrawable(false));\nlogCell.setOnClickListener(v -> presentFragment(new ChannelAdminLogActivity(currentChat)));\n}\nif (!isChannel) {\ninfoContainer.addView(blockCell,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\n}\ninfoContainer.addView(adminCell,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\ninfoContainer.addView(membersCell,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\nif (isChannel) {\ninfoContainer.addView(blockCell,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\n}\nif (logCell != null) {\ninfoContainer.addView(logCell,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\n}\ninfoSectionCell=new ShadowSectionCell(context);\nlinearLayout1.addView(infoSectionCell,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\nif (!ChatObject.hasAdminRights(currentChat)) {\ninfoContainer.setVisibility(View.GONE);\nsettingsTopSectionCell.setVisibility(View.GONE);\n}\nif (!isChannel && info != null && info.can_set_stickers) {\nstickersContainer=new FrameLayout(context);\nstickersContainer.setBackgroundColor(Theme.getColor(Theme.key_windowBackgroundWhite));\nlinearLayout1.addView(stickersContainer,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\nstickersCell=new TextSettingsCell(context);\nstickersCell.setTextColor(Theme.getColor(Theme.key_windowBackgroundWhiteBlackText));\nstickersCell.setBackgroundDrawable(Theme.getSelectorDrawable(false));\nstickersContainer.addView(stickersCell,LayoutHelper.createFrame(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\nstickersCell.setOnClickListener(v -> {\nGroupStickersActivity groupStickersActivity=new GroupStickersActivity(currentChat.id);\ngroupStickersActivity.setInfo(info);\npresentFragment(groupStickersActivity);\n}\n);\nstickersInfoCell3=new TextInfoPrivacyCell(context);\nstickersInfoCell3.setText(LocaleController.getString(\"GroupStickersInfo\",R.string.GroupStickersInfo));\nlinearLayout1.addView(stickersInfoCell3,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\n}\nif (currentChat.creator) {\ndeleteContainer=new FrameLayout(context);\ndeleteContainer.setBackgroundColor(Theme.getColor(Theme.key_windowBackgroundWhite));\nlinearLayout1.addView(deleteContainer,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\ndeleteCell=new TextSettingsCell(context);\ndeleteCell.setTextColor(Theme.getColor(Theme.key_windowBackgroundWhiteRedText5));\ndeleteCell.setBackgroundDrawable(Theme.getSelectorDrawable(false));\nif (isChannel) {\ndeleteCell.setText(LocaleController.getString(\"ChannelDelete\",R.string.ChannelDelete),false);\n}\n else if (currentChat.megagroup) {\ndeleteCell.setText(LocaleController.getString(\"DeleteMega\",R.string.DeleteMega),false);\n}\n else {\ndeleteCell.setText(LocaleController.getString(\"DeleteAndExitButton\",R.string.DeleteAndExitButton),false);\n}\ndeleteContainer.addView(deleteCell,LayoutHelper.createFrame(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\ndeleteCell.setOnClickListener(v -> AlertsCreator.createClearOrDeleteDialogAlert(ChatEditActivity.this,false,true,false,currentChat,null,false,(param) -> {\nif (AndroidUtilities.isTablet()) {\nNotificationCenter.getInstance(currentAccount).postNotificationName(NotificationCenter.closeChats,-(long)chatId);\n}\n else {\nNotificationCenter.getInstance(currentAccount).postNotificationName(NotificationCenter.closeChats);\n}\nMessagesController.getInstance(currentAccount).deleteUserFromChat(chatId,MessagesController.getInstance(currentAccount).getUser(UserConfig.getInstance(currentAccount).getClientUserId()),info,true,false);\nfinishFragment();\n}\n));\ndeleteInfoCell=new ShadowSectionCell(context);\ndeleteInfoCell.setBackgroundDrawable(Theme.getThemedDrawable(context,R.drawable.greydivider_bottom,Theme.key_windowBackgroundGrayShadow));\nlinearLayout1.addView(deleteInfoCell,LayoutHelper.createLinear(LayoutHelper.MATCH_PARENT,LayoutHelper.WRAP_CONTENT));\n}\n else {\nif (!isChannel) {\nif (stickersInfoCell3 == null) {\ninfoSectionCell.setBackgroundDrawable(Theme.getThemedDrawable(context,R.drawable.greydivider_bottom,Theme.key_windowBackgroundGrayShadow));\n}\n}\n}\nif (stickersInfoCell3 != null) {\nif (deleteInfoCell == null) {\nstickersInfoCell3.setBackgroundDrawable(Theme.getThemedDrawable(context,R.drawable.greydivider_bottom,Theme.key_windowBackgroundGrayShadow));\n}\n else {\nstickersInfoCell3.setBackgroundDrawable(Theme.getThemedDrawable(context,R.drawable.greydivider,Theme.key_windowBackgroundGrayShadow));\n}\n}\nnameTextView.setText(currentChat.title);\nnameTextView.setSelection(nameTextView.length());\nif (info != null) {\ndescriptionTextView.setText(info.about);\n}\nsetAvatar();\nupdateFields(true);\nreturn fragmentView;\n}\n",
      "nodeType" : "MethodDeclaration",
      "astNodeNumber" : 3883,
      "astHeight" : 24
    } ],
    "currentLineData" : {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 44,
        "startLineNumber" : 728,
        "startColumnNumber" : 8,
        "endLineNumber" : 728,
        "endColumnNumber" : 52
      },
      "nodeContext" : "ActionBarMenu menu=actionBar.createMenu();\n",
      "nodeType" : "VariableDeclarationStatement",
      "astNodeNumber" : 8,
      "astHeight" : 4
    },
    "tokenLength" : 2,
    "type" : "org.telegram.ui.ActionBar.ActionBarMenu"
  } ],
  "positionList" : [ {
    "charLength" : 22,
    "startLineNumber" : 728,
    "startColumnNumber" : 29,
    "endLineNumber" : 728,
    "endColumnNumber" : 51
  } ],
  "layoutRelationDataList" : [ ]
}