{
  "id" : 188,
  "expression" : "LongMessageViewModel.Factory",
  "projectName" : "signalapp@Signal-Android",
  "commitID" : "7e91132e7ed62a58b5f347de252ab1eda3f43b90",
  "filePath" : "/app/src/main/java/org/thoughtcrime/securesms/longmessage/LongMessageActivity.java",
  "occurrences" : 1,
  "isArithmeticExpression" : 0,
  "isGetTypeMethod" : 0,
  "expressionList" : [ {
    "nodeContext" : "LongMessageViewModel.Factory",
    "nodeType" : "QualifiedName",
    "nodePosition" : {
      "charLength" : 28,
      "startLineNumber" : 113,
      "startColumnNumber" : 48,
      "endLineNumber" : 113,
      "endColumnNumber" : 76
    },
    "astNodeNumber" : 3,
    "astHeight" : 2,
    "parentDataList" : [ {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.ClassInstanceCreation,type]",
      "nodePosition" : {
        "charLength" : 28,
        "startLineNumber" : 113,
        "startColumnNumber" : 48,
        "endLineNumber" : 113,
        "endColumnNumber" : 76
      },
      "nodeContext" : "LongMessageViewModel.Factory",
      "nodeType" : "SimpleType",
      "astNodeNumber" : 4,
      "astHeight" : 3
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.MethodInvocation,arguments]",
      "nodePosition" : {
        "charLength" : 101,
        "startLineNumber" : 113,
        "startColumnNumber" : 44,
        "endLineNumber" : 113,
        "endColumnNumber" : 145
      },
      "nodeContext" : "new LongMessageViewModel.Factory(getApplication(),new LongMessageRepository(this),messageId,isMms)",
      "nodeType" : "ClassInstanceCreation",
      "astNodeNumber" : 13,
      "astHeight" : 4
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.MethodInvocation,expression]",
      "nodePosition" : {
        "charLength" : 130,
        "startLineNumber" : 113,
        "startColumnNumber" : 16,
        "endLineNumber" : 113,
        "endColumnNumber" : 146
      },
      "nodeContext" : "ViewModelProviders.of(this,new LongMessageViewModel.Factory(getApplication(),new LongMessageRepository(this),messageId,isMms))",
      "nodeType" : "MethodInvocation",
      "astNodeNumber" : 17,
      "astHeight" : 5
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.Assignment,rightHandSide]",
      "nodePosition" : {
        "charLength" : 197,
        "startLineNumber" : 113,
        "startColumnNumber" : 16,
        "endLineNumber" : 114,
        "endColumnNumber" : 66
      },
      "nodeContext" : "ViewModelProviders.of(this,new LongMessageViewModel.Factory(getApplication(),new LongMessageRepository(this),messageId,isMms)).get(LongMessageViewModel.class)",
      "nodeType" : "MethodInvocation",
      "astNodeNumber" : 22,
      "astHeight" : 6
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.ExpressionStatement,expression]",
      "nodePosition" : {
        "charLength" : 209,
        "startLineNumber" : 113,
        "startColumnNumber" : 4,
        "endLineNumber" : 114,
        "endColumnNumber" : 66
      },
      "nodeContext" : "viewModel=ViewModelProviders.of(this,new LongMessageViewModel.Factory(getApplication(),new LongMessageRepository(this),messageId,isMms)).get(LongMessageViewModel.class)",
      "nodeType" : "Assignment",
      "astNodeNumber" : 24,
      "astHeight" : 7
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 210,
        "startLineNumber" : 113,
        "startColumnNumber" : 4,
        "endLineNumber" : 114,
        "endColumnNumber" : 67
      },
      "nodeContext" : "viewModel=ViewModelProviders.of(this,new LongMessageViewModel.Factory(getApplication(),new LongMessageRepository(this),messageId,isMms)).get(LongMessageViewModel.class);\n",
      "nodeType" : "ExpressionStatement",
      "astNodeNumber" : 25,
      "astHeight" : 8
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
      "nodePosition" : {
        "charLength" : 2697,
        "startLineNumber" : 112,
        "startColumnNumber" : 60,
        "endLineNumber" : 165,
        "endColumnNumber" : 3
      },
      "nodeContext" : "{\n  viewModel=ViewModelProviders.of(this,new LongMessageViewModel.Factory(getApplication(),new LongMessageRepository(this),messageId,isMms)).get(LongMessageViewModel.class);\n  viewModel.getMessage().observe(this,message -> {\n    if (message == null)     return;\n    if (!message.isPresent()) {\n      Toast.makeText(this,R.string.LongMessageActivity_unable_to_find_message,Toast.LENGTH_SHORT).show();\n      finish();\n      return;\n    }\n    if (message.get().getMessageRecord().isOutgoing()) {\n      getSupportActionBar().setTitle(getString(R.string.LongMessageActivity_your_message));\n    }\n else {\n      Recipient recipient=message.get().getMessageRecord().getRecipient();\n      String name=recipient.getDisplayName(this);\n      getSupportActionBar().setTitle(getString(R.string.LongMessageActivity_message_from_s,name));\n    }\n    ViewGroup bubble;\n    if (message.get().getMessageRecord().isOutgoing()) {\n      bubble=sentBubble.get();\n      colorizerView.setVisibility(View.VISIBLE);\n      colorizerView.setBackground(message.get().getMessageRecord().getRecipient().getChatColors().getChatBubbleMask());\n      bubble.getBackground().setColorFilter(message.get().getMessageRecord().getRecipient().getChatColors().getChatBubbleColorFilter());\n      bubble.addOnLayoutChangeListener(bubbleLayoutListener);\n      bubbleLayoutListener.onLayoutChange(bubble,0,0,0,0,0,0,0,0);\n    }\n else {\n      bubble=receivedBubble.get();\n      bubble.getBackground().setColorFilter(ContextCompat.getColor(this,R.color.signal_background_secondary),PorterDuff.Mode.MULTIPLY);\n    }\n    EmojiTextView text=bubble.findViewById(R.id.longmessage_text);\n    ConversationItemFooter footer=bubble.findViewById(R.id.longmessage_footer);\n    CharSequence trimmedBody=getTrimmedBody(message.get().getFullBody(this));\n    SpannableString styledBody=linkifyMessageBody(new SpannableString(trimmedBody));\n    bubble.setVisibility(View.VISIBLE);\n    text.setText(styledBody);\n    text.setMovementMethod(LinkMovementMethod.getInstance());\n    text.setTextSize(TypedValue.COMPLEX_UNIT_SP,SignalStore.settings().getMessageFontSize());\n    if (!message.get().getMessageRecord().isOutgoing()) {\n      text.setMentionBackgroundTint(ContextCompat.getColor(this,isDarkTheme(this) ? R.color.core_grey_60 : R.color.core_grey_20));\n    }\n else {\n      text.setMentionBackgroundTint(ContextCompat.getColor(this,R.color.transparent_black_40));\n    }\n    footer.setMessageRecord(message.get().getMessageRecord(),dynamicLanguage.getCurrentLocale());\n  }\n);\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 366,
      "astHeight" : 15
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
      "nodePosition" : {
        "charLength" : 2755,
        "startLineNumber" : 112,
        "startColumnNumber" : 2,
        "endLineNumber" : 165,
        "endColumnNumber" : 3
      },
      "nodeContext" : "private void initViewModel(long messageId,boolean isMms){\n  viewModel=ViewModelProviders.of(this,new LongMessageViewModel.Factory(getApplication(),new LongMessageRepository(this),messageId,isMms)).get(LongMessageViewModel.class);\n  viewModel.getMessage().observe(this,message -> {\n    if (message == null)     return;\n    if (!message.isPresent()) {\n      Toast.makeText(this,R.string.LongMessageActivity_unable_to_find_message,Toast.LENGTH_SHORT).show();\n      finish();\n      return;\n    }\n    if (message.get().getMessageRecord().isOutgoing()) {\n      getSupportActionBar().setTitle(getString(R.string.LongMessageActivity_your_message));\n    }\n else {\n      Recipient recipient=message.get().getMessageRecord().getRecipient();\n      String name=recipient.getDisplayName(this);\n      getSupportActionBar().setTitle(getString(R.string.LongMessageActivity_message_from_s,name));\n    }\n    ViewGroup bubble;\n    if (message.get().getMessageRecord().isOutgoing()) {\n      bubble=sentBubble.get();\n      colorizerView.setVisibility(View.VISIBLE);\n      colorizerView.setBackground(message.get().getMessageRecord().getRecipient().getChatColors().getChatBubbleMask());\n      bubble.getBackground().setColorFilter(message.get().getMessageRecord().getRecipient().getChatColors().getChatBubbleColorFilter());\n      bubble.addOnLayoutChangeListener(bubbleLayoutListener);\n      bubbleLayoutListener.onLayoutChange(bubble,0,0,0,0,0,0,0,0);\n    }\n else {\n      bubble=receivedBubble.get();\n      bubble.getBackground().setColorFilter(ContextCompat.getColor(this,R.color.signal_background_secondary),PorterDuff.Mode.MULTIPLY);\n    }\n    EmojiTextView text=bubble.findViewById(R.id.longmessage_text);\n    ConversationItemFooter footer=bubble.findViewById(R.id.longmessage_footer);\n    CharSequence trimmedBody=getTrimmedBody(message.get().getFullBody(this));\n    SpannableString styledBody=linkifyMessageBody(new SpannableString(trimmedBody));\n    bubble.setVisibility(View.VISIBLE);\n    text.setText(styledBody);\n    text.setMovementMethod(LinkMovementMethod.getInstance());\n    text.setTextSize(TypedValue.COMPLEX_UNIT_SP,SignalStore.settings().getMessageFontSize());\n    if (!message.get().getMessageRecord().isOutgoing()) {\n      text.setMentionBackgroundTint(ContextCompat.getColor(this,isDarkTheme(this) ? R.color.core_grey_60 : R.color.core_grey_20));\n    }\n else {\n      text.setMentionBackgroundTint(ContextCompat.getColor(this,R.color.transparent_black_40));\n    }\n    footer.setMessageRecord(message.get().getMessageRecord(),dynamicLanguage.getCurrentLocale());\n  }\n);\n}\n",
      "nodeType" : "MethodDeclaration",
      "astNodeNumber" : 376,
      "astHeight" : 16
    } ],
    "currentLineData" : {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.MethodInvocation,expression]",
      "nodePosition" : {
        "charLength" : 130,
        "startLineNumber" : 113,
        "startColumnNumber" : 16,
        "endLineNumber" : 113,
        "endColumnNumber" : 146
      },
      "nodeContext" : "ViewModelProviders.of(this,new LongMessageViewModel.Factory(getApplication(),new LongMessageRepository(this),messageId,isMms))",
      "nodeType" : "MethodInvocation",
      "astNodeNumber" : 17,
      "astHeight" : 5
    },
    "tokenLength" : 2,
    "type" : "org.thoughtcrime.securesms.longmessage.LongMessageViewModel.Factory"
  } ],
  "positionList" : [ {
    "charLength" : 28,
    "startLineNumber" : 113,
    "startColumnNumber" : 48,
    "endLineNumber" : 113,
    "endColumnNumber" : 76
  } ],
  "layoutRelationDataList" : [ ]
}