{
  "id" : 494,
  "expression" : "geomAttrs",
  "projectName" : "dbeaver@dbeaver",
  "commitID" : "aecf0da5baef5ea4aa1675578670cf057248123d",
  "filePath" : "/plugins/org.jkiss.dbeaver.data.gis.view/src/org/jkiss/dbeaver/ui/gis/panel/GISBrowserViewer.java",
  "occurrences" : 1,
  "isArithmeticExpression" : 0,
  "isGetTypeMethod" : 0,
  "expressionList" : [ {
    "nodeContext" : "geomAttrs",
    "nodeType" : "SimpleName",
    "nodePosition" : {
      "charLength" : 9,
      "startLineNumber" : 107,
      "startColumnNumber" : 62,
      "endLineNumber" : 107,
      "endColumnNumber" : 71
    },
    "astNodeNumber" : 1,
    "astHeight" : 1,
    "parentDataList" : [ {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 326,
        "startLineNumber" : 107,
        "startColumnNumber" : 24,
        "endLineNumber" : 112,
        "endColumnNumber" : 25
      },
      "nodeContext" : "for (GeometryDataUtils.GeomAttrs ga : geomAttrs) {\n  if (ga.geomAttr.matches(attr,false)) {\n    GeometryDataUtils.setGeometryProperties(resultSetController,ga,geometry,row);\n    break;\n  }\n}\n",
      "nodeType" : "EnhancedForStatement",
      "astNodeNumber" : 27,
      "astHeight" : 7
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
      "nodePosition" : {
        "charLength" : 374,
        "startLineNumber" : 106,
        "startColumnNumber" : 63,
        "endLineNumber" : 113,
        "endColumnNumber" : 21
      },
      "nodeContext" : "{\n  for (  GeometryDataUtils.GeomAttrs ga : geomAttrs) {\n    if (ga.geomAttr.matches(attr,false)) {\n      GeometryDataUtils.setGeometryProperties(resultSetController,ga,geometry,row);\n      break;\n    }\n  }\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 28,
      "astHeight" : 8
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 417,
        "startLineNumber" : 106,
        "startColumnNumber" : 20,
        "endLineNumber" : 113,
        "endColumnNumber" : 21
      },
      "nodeContext" : "if (valueType instanceof DBSAttributeBase) {\n  for (  GeometryDataUtils.GeomAttrs ga : geomAttrs) {\n    if (ga.geomAttr.matches(attr,false)) {\n      GeometryDataUtils.setGeometryProperties(resultSetController,ga,geometry,row);\n      break;\n    }\n  }\n}\n",
      "nodeType" : "IfStatement",
      "astNodeNumber" : 33,
      "astHeight" : 9
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
      "nodePosition" : {
        "charLength" : 728,
        "startLineNumber" : 102,
        "startColumnNumber" : 38,
        "endLineNumber" : 117,
        "endColumnNumber" : 17
      },
      "nodeContext" : "{\n  geometries.add(geometry);\n  if (valueType instanceof DBSAttributeBase) {\n    for (    GeometryDataUtils.GeomAttrs ga : geomAttrs) {\n      if (ga.geomAttr.matches(attr,false)) {\n        GeometryDataUtils.setGeometryProperties(resultSetController,ga,geometry,row);\n        break;\n      }\n    }\n  }\n  if (geometry.getProperties() == null) {\n    geometry.setProperties(Collections.singletonMap(\"Object\",geometry.getSRID()));\n  }\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 57,
      "astHeight" : 10
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 750,
        "startLineNumber" : 102,
        "startColumnNumber" : 16,
        "endLineNumber" : 117,
        "endColumnNumber" : 17
      },
      "nodeContext" : "if (geometry != null) {\n  geometries.add(geometry);\n  if (valueType instanceof DBSAttributeBase) {\n    for (    GeometryDataUtils.GeomAttrs ga : geomAttrs) {\n      if (ga.geomAttr.matches(attr,false)) {\n        GeometryDataUtils.setGeometryProperties(resultSetController,ga,geometry,row);\n        break;\n      }\n    }\n  }\n  if (geometry.getProperties() == null) {\n    geometry.setProperties(Collections.singletonMap(\"Object\",geometry.getSRID()));\n  }\n}\n",
      "nodeType" : "IfStatement",
      "astNodeNumber" : 61,
      "astHeight" : 11
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.EnhancedForStatement,body]",
      "nodePosition" : {
        "charLength" : 1720,
        "startLineNumber" : 83,
        "startColumnNumber" : 47,
        "endLineNumber" : 118,
        "endColumnNumber" : 13
      },
      "nodeContext" : "{\n  DBGeometry geometry;\n  DBDAttributeBinding attr;\n  ResultSetRow row;\n  if (cell instanceof DBGeometry) {\n    attr=resultSetController.getActivePresentation().getCurrentAttribute();\n    row=resultSetController.getCurrentRow();\n    geometry=(DBGeometry)cell;\n  }\n else {\n    attr=selection.getElementAttribute(cell);\n    row=selection.getElementRow(cell);\n    Object cellValue=resultSetController.getModel().getCellValue(attr,row);\n    geometry=GisTransformUtils.getGeometryValueFromObject(valueController.getDataController().getDataContainer(),valueController.getValueHandler(),valueController.getValueType(),cellValue);\n  }\n  if (geometry != null) {\n    geometries.add(geometry);\n    if (valueType instanceof DBSAttributeBase) {\n      for (      GeometryDataUtils.GeomAttrs ga : geomAttrs) {\n        if (ga.geomAttr.matches(attr,false)) {\n          GeometryDataUtils.setGeometryProperties(resultSetController,ga,geometry,row);\n          break;\n        }\n      }\n    }\n    if (geometry.getProperties() == null) {\n      geometry.setProperties(Collections.singletonMap(\"Object\",geometry.getSRID()));\n    }\n  }\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 149,
      "astHeight" : 12
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 1755,
        "startLineNumber" : 83,
        "startColumnNumber" : 12,
        "endLineNumber" : 118,
        "endColumnNumber" : 13
      },
      "nodeContext" : "for (Object cell : selectedValues) {\n  DBGeometry geometry;\n  DBDAttributeBinding attr;\n  ResultSetRow row;\n  if (cell instanceof DBGeometry) {\n    attr=resultSetController.getActivePresentation().getCurrentAttribute();\n    row=resultSetController.getCurrentRow();\n    geometry=(DBGeometry)cell;\n  }\n else {\n    attr=selection.getElementAttribute(cell);\n    row=selection.getElementRow(cell);\n    Object cellValue=resultSetController.getModel().getCellValue(attr,row);\n    geometry=GisTransformUtils.getGeometryValueFromObject(valueController.getDataController().getDataContainer(),valueController.getValueHandler(),valueController.getValueType(),cellValue);\n  }\n  if (geometry != null) {\n    geometries.add(geometry);\n    if (valueType instanceof DBSAttributeBase) {\n      for (      GeometryDataUtils.GeomAttrs ga : geomAttrs) {\n        if (ga.geomAttr.matches(attr,false)) {\n          GeometryDataUtils.setGeometryProperties(resultSetController,ga,geometry,row);\n          break;\n        }\n      }\n    }\n    if (geometry.getProperties() == null) {\n      geometry.setProperties(Collections.singletonMap(\"Object\",geometry.getSRID()));\n    }\n  }\n}\n",
      "nodeType" : "EnhancedForStatement",
      "astNodeNumber" : 155,
      "astHeight" : 13
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
      "nodePosition" : {
        "charLength" : 2439,
        "startLineNumber" : 69,
        "startColumnNumber" : 60,
        "endLineNumber" : 119,
        "endColumnNumber" : 9
      },
      "nodeContext" : "{\n  IResultSetController resultSetController=(IResultSetController)dataController;\n  DBSTypedObject valueType=valueController.getValueType();\n  List<GeometryDataUtils.GeomAttrs> geomAttrs=null;\n  if (valueType instanceof DBSAttributeBase) {\n    geomAttrs=GeometryDataUtils.extractGeometryAttributes(resultSetController);\n  }\n  IResultSetSelection selection=resultSetController.getSelection();\n  Object[] selectedValues=selection.toArray();\n  if (ArrayUtils.isEmpty(selectedValues)) {\n    selectedValues=new Object[]{value};\n  }\n  for (  Object cell : selectedValues) {\n    DBGeometry geometry;\n    DBDAttributeBinding attr;\n    ResultSetRow row;\n    if (cell instanceof DBGeometry) {\n      attr=resultSetController.getActivePresentation().getCurrentAttribute();\n      row=resultSetController.getCurrentRow();\n      geometry=(DBGeometry)cell;\n    }\n else {\n      attr=selection.getElementAttribute(cell);\n      row=selection.getElementRow(cell);\n      Object cellValue=resultSetController.getModel().getCellValue(attr,row);\n      geometry=GisTransformUtils.getGeometryValueFromObject(valueController.getDataController().getDataContainer(),valueController.getValueHandler(),valueController.getValueType(),cellValue);\n    }\n    if (geometry != null) {\n      geometries.add(geometry);\n      if (valueType instanceof DBSAttributeBase) {\n        for (        GeometryDataUtils.GeomAttrs ga : geomAttrs) {\n          if (ga.geomAttr.matches(attr,false)) {\n            GeometryDataUtils.setGeometryProperties(resultSetController,ga,geometry,row);\n            break;\n          }\n        }\n      }\n      if (geometry.getProperties() == null) {\n        geometry.setProperties(Collections.singletonMap(\"Object\",geometry.getSRID()));\n      }\n    }\n  }\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 231,
      "astHeight" : 14
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 2491,
        "startLineNumber" : 69,
        "startColumnNumber" : 8,
        "endLineNumber" : 119,
        "endColumnNumber" : 9
      },
      "nodeContext" : "if (dataController instanceof IResultSetController) {\n  IResultSetController resultSetController=(IResultSetController)dataController;\n  DBSTypedObject valueType=valueController.getValueType();\n  List<GeometryDataUtils.GeomAttrs> geomAttrs=null;\n  if (valueType instanceof DBSAttributeBase) {\n    geomAttrs=GeometryDataUtils.extractGeometryAttributes(resultSetController);\n  }\n  IResultSetSelection selection=resultSetController.getSelection();\n  Object[] selectedValues=selection.toArray();\n  if (ArrayUtils.isEmpty(selectedValues)) {\n    selectedValues=new Object[]{value};\n  }\n  for (  Object cell : selectedValues) {\n    DBGeometry geometry;\n    DBDAttributeBinding attr;\n    ResultSetRow row;\n    if (cell instanceof DBGeometry) {\n      attr=resultSetController.getActivePresentation().getCurrentAttribute();\n      row=resultSetController.getCurrentRow();\n      geometry=(DBGeometry)cell;\n    }\n else {\n      attr=selection.getElementAttribute(cell);\n      row=selection.getElementRow(cell);\n      Object cellValue=resultSetController.getModel().getCellValue(attr,row);\n      geometry=GisTransformUtils.getGeometryValueFromObject(valueController.getDataController().getDataContainer(),valueController.getValueHandler(),valueController.getValueType(),cellValue);\n    }\n    if (geometry != null) {\n      geometries.add(geometry);\n      if (valueType instanceof DBSAttributeBase) {\n        for (        GeometryDataUtils.GeomAttrs ga : geomAttrs) {\n          if (ga.geomAttr.matches(attr,false)) {\n            GeometryDataUtils.setGeometryProperties(resultSetController,ga,geometry,row);\n            break;\n          }\n        }\n      }\n      if (geometry.getProperties() == null) {\n        geometry.setProperties(Collections.singletonMap(\"Object\",geometry.getSRID()));\n      }\n    }\n  }\n}\n",
      "nodeType" : "IfStatement",
      "astNodeNumber" : 236,
      "astHeight" : 15
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
      "nodePosition" : {
        "charLength" : 2720,
        "startLineNumber" : 66,
        "startColumnNumber" : 4,
        "endLineNumber" : 121,
        "endColumnNumber" : 5
      },
      "nodeContext" : "{\n  List<DBGeometry> geometries=new ArrayList<>();\n  IDataController dataController=valueController.getDataController();\n  if (dataController instanceof IResultSetController) {\n    IResultSetController resultSetController=(IResultSetController)dataController;\n    DBSTypedObject valueType=valueController.getValueType();\n    List<GeometryDataUtils.GeomAttrs> geomAttrs=null;\n    if (valueType instanceof DBSAttributeBase) {\n      geomAttrs=GeometryDataUtils.extractGeometryAttributes(resultSetController);\n    }\n    IResultSetSelection selection=resultSetController.getSelection();\n    Object[] selectedValues=selection.toArray();\n    if (ArrayUtils.isEmpty(selectedValues)) {\n      selectedValues=new Object[]{value};\n    }\n    for (    Object cell : selectedValues) {\n      DBGeometry geometry;\n      DBDAttributeBinding attr;\n      ResultSetRow row;\n      if (cell instanceof DBGeometry) {\n        attr=resultSetController.getActivePresentation().getCurrentAttribute();\n        row=resultSetController.getCurrentRow();\n        geometry=(DBGeometry)cell;\n      }\n else {\n        attr=selection.getElementAttribute(cell);\n        row=selection.getElementRow(cell);\n        Object cellValue=resultSetController.getModel().getCellValue(attr,row);\n        geometry=GisTransformUtils.getGeometryValueFromObject(valueController.getDataController().getDataContainer(),valueController.getValueHandler(),valueController.getValueType(),cellValue);\n      }\n      if (geometry != null) {\n        geometries.add(geometry);\n        if (valueType instanceof DBSAttributeBase) {\n          for (          GeometryDataUtils.GeomAttrs ga : geomAttrs) {\n            if (ga.geomAttr.matches(attr,false)) {\n              GeometryDataUtils.setGeometryProperties(resultSetController,ga,geometry,row);\n              break;\n            }\n          }\n        }\n        if (geometry.getProperties() == null) {\n          geometry.setProperties(Collections.singletonMap(\"Object\",geometry.getSRID()));\n        }\n      }\n    }\n  }\n  leafletViewer.setGeometryData(geometries.toArray(new DBGeometry[0]));\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 270,
      "astHeight" : 16
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
      "nodePosition" : {
        "charLength" : 2810,
        "startLineNumber" : 64,
        "startColumnNumber" : 4,
        "endLineNumber" : 121,
        "endColumnNumber" : 5
      },
      "nodeContext" : "@Override public void primeEditorValue(@Nullable Object value) throws DBException {\n  List<DBGeometry> geometries=new ArrayList<>();\n  IDataController dataController=valueController.getDataController();\n  if (dataController instanceof IResultSetController) {\n    IResultSetController resultSetController=(IResultSetController)dataController;\n    DBSTypedObject valueType=valueController.getValueType();\n    List<GeometryDataUtils.GeomAttrs> geomAttrs=null;\n    if (valueType instanceof DBSAttributeBase) {\n      geomAttrs=GeometryDataUtils.extractGeometryAttributes(resultSetController);\n    }\n    IResultSetSelection selection=resultSetController.getSelection();\n    Object[] selectedValues=selection.toArray();\n    if (ArrayUtils.isEmpty(selectedValues)) {\n      selectedValues=new Object[]{value};\n    }\n    for (    Object cell : selectedValues) {\n      DBGeometry geometry;\n      DBDAttributeBinding attr;\n      ResultSetRow row;\n      if (cell instanceof DBGeometry) {\n        attr=resultSetController.getActivePresentation().getCurrentAttribute();\n        row=resultSetController.getCurrentRow();\n        geometry=(DBGeometry)cell;\n      }\n else {\n        attr=selection.getElementAttribute(cell);\n        row=selection.getElementRow(cell);\n        Object cellValue=resultSetController.getModel().getCellValue(attr,row);\n        geometry=GisTransformUtils.getGeometryValueFromObject(valueController.getDataController().getDataContainer(),valueController.getValueHandler(),valueController.getValueType(),cellValue);\n      }\n      if (geometry != null) {\n        geometries.add(geometry);\n        if (valueType instanceof DBSAttributeBase) {\n          for (          GeometryDataUtils.GeomAttrs ga : geomAttrs) {\n            if (ga.geomAttr.matches(attr,false)) {\n              GeometryDataUtils.setGeometryProperties(resultSetController,ga,geometry,row);\n              break;\n            }\n          }\n        }\n        if (geometry.getProperties() == null) {\n          geometry.setProperties(Collections.singletonMap(\"Object\",geometry.getSRID()));\n        }\n      }\n    }\n  }\n  leafletViewer.setGeometryData(geometries.toArray(new DBGeometry[0]));\n}\n",
      "nodeType" : "MethodDeclaration",
      "astNodeNumber" : 284,
      "astHeight" : 17
    } ],
    "currentLineData" : {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 326,
        "startLineNumber" : 107,
        "startColumnNumber" : 24,
        "endLineNumber" : 112,
        "endColumnNumber" : 25
      },
      "nodeContext" : "for (GeometryDataUtils.GeomAttrs ga : geomAttrs) {\n  if (ga.geomAttr.matches(attr,false)) {\n    GeometryDataUtils.setGeometryProperties(resultSetController,ga,geometry,row);\n    break;\n  }\n}\n",
      "nodeType" : "EnhancedForStatement",
      "astNodeNumber" : 27,
      "astHeight" : 7
    },
    "tokenLength" : 1,
    "type" : "java.util.List<org.jkiss.dbeaver.ui.gis.GeometryDataUtils.GeomAttrs>"
  } ],
  "positionList" : [ {
    "charLength" : 9,
    "startLineNumber" : 107,
    "startColumnNumber" : 62,
    "endLineNumber" : 107,
    "endColumnNumber" : 71
  } ],
  "layoutRelationDataList" : [ ]
}