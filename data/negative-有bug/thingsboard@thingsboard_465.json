{
  "id" : 465,
  "expression" : "\"[{}] Devices attributes keys list is empty for: [{}]\"",
  "projectName" : "thingsboard@thingsboard",
  "commitID" : "7c2b3a9fbf84cc58aa7546029c5c7c10a662c55a",
  "filePath" : "/common/transport/mqtt/src/main/java/org/thingsboard/server/transport/mqtt/session/GatewaySessionHandler.java",
  "occurrences" : 1,
  "isArithmeticExpression" : 0,
  "isGetTypeMethod" : 0,
  "expressionList" : [ {
    "nodeContext" : "\"[{}] Devices attributes keys list is empty for: [{}]\"",
    "nodeType" : "StringLiteral",
    "nodePosition" : {
      "charLength" : 54,
      "startLineNumber" : 544,
      "startColumnNumber" : 26,
      "endLineNumber" : 544,
      "endColumnNumber" : 80
    },
    "astNodeNumber" : 1,
    "astHeight" : 1,
    "parentDataList" : [ {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.ExpressionStatement,expression]",
      "nodePosition" : {
        "charLength" : 99,
        "startLineNumber" : 544,
        "startColumnNumber" : 16,
        "endLineNumber" : 544,
        "endColumnNumber" : 115
      },
      "nodeContext" : "log.debug(\"[{}] Devices attributes keys list is empty for: [{}]\",sessionId,gateway.getDeviceId())",
      "nodeType" : "MethodInvocation",
      "astNodeNumber" : 8,
      "astHeight" : 3
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 100,
        "startLineNumber" : 544,
        "startColumnNumber" : 16,
        "endLineNumber" : 544,
        "endColumnNumber" : 116
      },
      "nodeContext" : "log.debug(\"[{}] Devices attributes keys list is empty for: [{}]\",sessionId,gateway.getDeviceId());\n",
      "nodeType" : "ExpressionStatement",
      "astNodeNumber" : 9,
      "astHeight" : 4
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
      "nodePosition" : {
        "charLength" : 281,
        "startLineNumber" : 543,
        "startColumnNumber" : 19,
        "endLineNumber" : 546,
        "endColumnNumber" : 13
      },
      "nodeContext" : "{\n  log.debug(\"[{}] Devices attributes keys list is empty for: [{}]\",sessionId,gateway.getDeviceId());\n  throw new IllegalArgumentException(\"[\" + sessionId + \"] Devices attributes keys list is empty for [\"+ gateway.getDeviceId()+ \"]\");\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 22,
      "astHeight" : 6
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 2096,
        "startLineNumber" : 518,
        "startColumnNumber" : 12,
        "endLineNumber" : 546,
        "endColumnNumber" : 13
      },
      "nodeContext" : "if (!CollectionUtils.isEmpty(attributesMsgList)) {\n  attributesMsgList.forEach(attributesMsg -> {\n    String deviceName=checkDeviceName(attributesMsg.getDeviceName());\n    Futures.addCallback(checkDeviceConnected(deviceName),new FutureCallback<GatewayDeviceSessionCtx>(){\n      @Override public void onSuccess(      @Nullable GatewayDeviceSessionCtx deviceCtx){\n        TransportProtos.PostAttributeMsg kvListProto=attributesMsg.getMsg();\n        if (kvListProto == null) {\n          throw new IllegalArgumentException(\"Attributes List for device: \" + deviceName + \" is empty!\");\n        }\n        try {\n          TransportProtos.PostAttributeMsg postAttributeMsg=ProtoConverter.validatePostAttributeMsg(kvListProto.toByteArray());\n          processPostAttributesMsg(deviceCtx,postAttributeMsg,deviceName,msgId);\n        }\n catch (        Throwable e) {\n          log.warn(\"[{}][{}] Failed to process device attributes command: {}\",gateway.getDeviceId(),deviceName,kvListProto,e);\n        }\n      }\n      @Override public void onFailure(      Throwable t){\n        log.debug(\"[{}] Failed to process device attributes command: {}\",sessionId,deviceName,t);\n      }\n    }\n,context.getExecutor());\n  }\n);\n}\n else {\n  log.debug(\"[{}] Devices attributes keys list is empty for: [{}]\",sessionId,gateway.getDeviceId());\n  throw new IllegalArgumentException(\"[\" + sessionId + \"] Devices attributes keys list is empty for [\"+ gateway.getDeviceId()+ \"]\");\n}\n",
      "nodeType" : "IfStatement",
      "astNodeNumber" : 158,
      "astHeight" : 19
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.TryStatement,body]",
      "nodePosition" : {
        "charLength" : 2367,
        "startLineNumber" : 515,
        "startColumnNumber" : 12,
        "endLineNumber" : 547,
        "endColumnNumber" : 9
      },
      "nodeContext" : "{\n  TransportApiProtos.GatewayAttributesMsg attributesMsgProto=TransportApiProtos.GatewayAttributesMsg.parseFrom(getBytes(payload));\n  List<TransportApiProtos.AttributesMsg> attributesMsgList=attributesMsgProto.getMsgList();\n  if (!CollectionUtils.isEmpty(attributesMsgList)) {\n    attributesMsgList.forEach(attributesMsg -> {\n      String deviceName=checkDeviceName(attributesMsg.getDeviceName());\n      Futures.addCallback(checkDeviceConnected(deviceName),new FutureCallback<GatewayDeviceSessionCtx>(){\n        @Override public void onSuccess(        @Nullable GatewayDeviceSessionCtx deviceCtx){\n          TransportProtos.PostAttributeMsg kvListProto=attributesMsg.getMsg();\n          if (kvListProto == null) {\n            throw new IllegalArgumentException(\"Attributes List for device: \" + deviceName + \" is empty!\");\n          }\n          try {\n            TransportProtos.PostAttributeMsg postAttributeMsg=ProtoConverter.validatePostAttributeMsg(kvListProto.toByteArray());\n            processPostAttributesMsg(deviceCtx,postAttributeMsg,deviceName,msgId);\n          }\n catch (          Throwable e) {\n            log.warn(\"[{}][{}] Failed to process device attributes command: {}\",gateway.getDeviceId(),deviceName,kvListProto,e);\n          }\n        }\n        @Override public void onFailure(        Throwable t){\n          log.debug(\"[{}] Failed to process device attributes command: {}\",sessionId,deviceName,t);\n        }\n      }\n,context.getExecutor());\n    }\n);\n  }\n else {\n    log.debug(\"[{}] Devices attributes keys list is empty for: [{}]\",sessionId,gateway.getDeviceId());\n    throw new IllegalArgumentException(\"[\" + sessionId + \"] Devices attributes keys list is empty for [\"+ gateway.getDeviceId()+ \"]\");\n  }\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 187,
      "astHeight" : 20
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 2486,
        "startLineNumber" : 515,
        "startColumnNumber" : 8,
        "endLineNumber" : 549,
        "endColumnNumber" : 9
      },
      "nodeContext" : "try {\n  TransportApiProtos.GatewayAttributesMsg attributesMsgProto=TransportApiProtos.GatewayAttributesMsg.parseFrom(getBytes(payload));\n  List<TransportApiProtos.AttributesMsg> attributesMsgList=attributesMsgProto.getMsgList();\n  if (!CollectionUtils.isEmpty(attributesMsgList)) {\n    attributesMsgList.forEach(attributesMsg -> {\n      String deviceName=checkDeviceName(attributesMsg.getDeviceName());\n      Futures.addCallback(checkDeviceConnected(deviceName),new FutureCallback<GatewayDeviceSessionCtx>(){\n        @Override public void onSuccess(        @Nullable GatewayDeviceSessionCtx deviceCtx){\n          TransportProtos.PostAttributeMsg kvListProto=attributesMsg.getMsg();\n          if (kvListProto == null) {\n            throw new IllegalArgumentException(\"Attributes List for device: \" + deviceName + \" is empty!\");\n          }\n          try {\n            TransportProtos.PostAttributeMsg postAttributeMsg=ProtoConverter.validatePostAttributeMsg(kvListProto.toByteArray());\n            processPostAttributesMsg(deviceCtx,postAttributeMsg,deviceName,msgId);\n          }\n catch (          Throwable e) {\n            log.warn(\"[{}][{}] Failed to process device attributes command: {}\",gateway.getDeviceId(),deviceName,kvListProto,e);\n          }\n        }\n        @Override public void onFailure(        Throwable t){\n          log.debug(\"[{}] Failed to process device attributes command: {}\",sessionId,deviceName,t);\n        }\n      }\n,context.getExecutor());\n    }\n);\n  }\n else {\n    log.debug(\"[{}] Devices attributes keys list is empty for: [{}]\",sessionId,gateway.getDeviceId());\n    throw new IllegalArgumentException(\"[\" + sessionId + \"] Devices attributes keys list is empty for [\"+ gateway.getDeviceId()+ \"]\");\n  }\n}\n catch (RuntimeException|InvalidProtocolBufferException e) {\n  throw new AdaptorException(e);\n}\n",
      "nodeType" : "TryStatement",
      "astNodeNumber" : 202,
      "astHeight" : 21
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
      "nodePosition" : {
        "charLength" : 2502,
        "startLineNumber" : 514,
        "startColumnNumber" : 93,
        "endLineNumber" : 550,
        "endColumnNumber" : 5
      },
      "nodeContext" : "{\n  try {\n    TransportApiProtos.GatewayAttributesMsg attributesMsgProto=TransportApiProtos.GatewayAttributesMsg.parseFrom(getBytes(payload));\n    List<TransportApiProtos.AttributesMsg> attributesMsgList=attributesMsgProto.getMsgList();\n    if (!CollectionUtils.isEmpty(attributesMsgList)) {\n      attributesMsgList.forEach(attributesMsg -> {\n        String deviceName=checkDeviceName(attributesMsg.getDeviceName());\n        Futures.addCallback(checkDeviceConnected(deviceName),new FutureCallback<GatewayDeviceSessionCtx>(){\n          @Override public void onSuccess(          @Nullable GatewayDeviceSessionCtx deviceCtx){\n            TransportProtos.PostAttributeMsg kvListProto=attributesMsg.getMsg();\n            if (kvListProto == null) {\n              throw new IllegalArgumentException(\"Attributes List for device: \" + deviceName + \" is empty!\");\n            }\n            try {\n              TransportProtos.PostAttributeMsg postAttributeMsg=ProtoConverter.validatePostAttributeMsg(kvListProto.toByteArray());\n              processPostAttributesMsg(deviceCtx,postAttributeMsg,deviceName,msgId);\n            }\n catch (            Throwable e) {\n              log.warn(\"[{}][{}] Failed to process device attributes command: {}\",gateway.getDeviceId(),deviceName,kvListProto,e);\n            }\n          }\n          @Override public void onFailure(          Throwable t){\n            log.debug(\"[{}] Failed to process device attributes command: {}\",sessionId,deviceName,t);\n          }\n        }\n,context.getExecutor());\n      }\n);\n    }\n else {\n      log.debug(\"[{}] Devices attributes keys list is empty for: [{}]\",sessionId,gateway.getDeviceId());\n      throw new IllegalArgumentException(\"[\" + sessionId + \"] Devices attributes keys list is empty for [\"+ gateway.getDeviceId()+ \"]\");\n    }\n  }\n catch (  RuntimeException|InvalidProtocolBufferException e) {\n    throw new AdaptorException(e);\n  }\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 203,
      "astHeight" : 22
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
      "nodePosition" : {
        "charLength" : 2591,
        "startLineNumber" : 514,
        "startColumnNumber" : 4,
        "endLineNumber" : 550,
        "endColumnNumber" : 5
      },
      "nodeContext" : "private void onDeviceAttributesProto(int msgId,ByteBuf payload) throws AdaptorException {\n  try {\n    TransportApiProtos.GatewayAttributesMsg attributesMsgProto=TransportApiProtos.GatewayAttributesMsg.parseFrom(getBytes(payload));\n    List<TransportApiProtos.AttributesMsg> attributesMsgList=attributesMsgProto.getMsgList();\n    if (!CollectionUtils.isEmpty(attributesMsgList)) {\n      attributesMsgList.forEach(attributesMsg -> {\n        String deviceName=checkDeviceName(attributesMsg.getDeviceName());\n        Futures.addCallback(checkDeviceConnected(deviceName),new FutureCallback<GatewayDeviceSessionCtx>(){\n          @Override public void onSuccess(          @Nullable GatewayDeviceSessionCtx deviceCtx){\n            TransportProtos.PostAttributeMsg kvListProto=attributesMsg.getMsg();\n            if (kvListProto == null) {\n              throw new IllegalArgumentException(\"Attributes List for device: \" + deviceName + \" is empty!\");\n            }\n            try {\n              TransportProtos.PostAttributeMsg postAttributeMsg=ProtoConverter.validatePostAttributeMsg(kvListProto.toByteArray());\n              processPostAttributesMsg(deviceCtx,postAttributeMsg,deviceName,msgId);\n            }\n catch (            Throwable e) {\n              log.warn(\"[{}][{}] Failed to process device attributes command: {}\",gateway.getDeviceId(),deviceName,kvListProto,e);\n            }\n          }\n          @Override public void onFailure(          Throwable t){\n            log.debug(\"[{}] Failed to process device attributes command: {}\",sessionId,deviceName,t);\n          }\n        }\n,context.getExecutor());\n      }\n);\n    }\n else {\n      log.debug(\"[{}] Devices attributes keys list is empty for: [{}]\",sessionId,gateway.getDeviceId());\n      throw new IllegalArgumentException(\"[\" + sessionId + \"] Devices attributes keys list is empty for [\"+ gateway.getDeviceId()+ \"]\");\n    }\n  }\n catch (  RuntimeException|InvalidProtocolBufferException e) {\n    throw new AdaptorException(e);\n  }\n}\n",
      "nodeType" : "MethodDeclaration",
      "astNodeNumber" : 216,
      "astHeight" : 23
    } ],
    "currentLineData" : {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 100,
        "startLineNumber" : 544,
        "startColumnNumber" : 16,
        "endLineNumber" : 544,
        "endColumnNumber" : 116
      },
      "nodeContext" : "log.debug(\"[{}] Devices attributes keys list is empty for: [{}]\",sessionId,gateway.getDeviceId());\n",
      "nodeType" : "ExpressionStatement",
      "astNodeNumber" : 9,
      "astHeight" : 4
    },
    "tokenLength" : 6,
    "type" : "java.lang.String"
  } ],
  "positionList" : [ {
    "charLength" : 54,
    "startLineNumber" : 544,
    "startColumnNumber" : 26,
    "endLineNumber" : 544,
    "endColumnNumber" : 80
  } ],
  "layoutRelationDataList" : [ ]
}