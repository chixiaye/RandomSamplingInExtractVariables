{
  "id" : 355,
  "expression" : "(ExitTypeSpan)span",
  "projectName" : "apache@skywalking",
  "commitID" : "16b51d55baec4f779f312e07081d1397addbcfe9",
  "filePath" : "/apm-sniffer/apm-sdk-plugin/finagle-6.25.x-plugin/src/main/java/org/apache/skywalking/apm/plugin/finagle/ContextCarrierHelper.java",
  "occurrences" : 1,
  "isArithmeticExpression" : 0,
  "isGetTypeMethod" : 0,
  "expressionList" : [ {
    "nodeContext" : "(ExitTypeSpan)span",
    "nodeType" : "CastExpression",
    "nodePosition" : {
      "charLength" : 19,
      "startLineNumber" : 55,
      "startColumnNumber" : 13,
      "endLineNumber" : 55,
      "endColumnNumber" : 32
    },
    "astNodeNumber" : 4,
    "astHeight" : 3,
    "parentDataList" : [ {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.MethodInvocation,expression]",
      "nodePosition" : {
        "charLength" : 21,
        "startLineNumber" : 55,
        "startColumnNumber" : 12,
        "endLineNumber" : 55,
        "endColumnNumber" : 33
      },
      "nodeContext" : "((ExitTypeSpan)span)",
      "nodeType" : "ParenthesizedExpression",
      "astNodeNumber" : 5,
      "astHeight" : 4
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.ExpressionStatement,expression]",
      "nodePosition" : {
        "charLength" : 44,
        "startLineNumber" : 55,
        "startColumnNumber" : 12,
        "endLineNumber" : 55,
        "endColumnNumber" : 56
      },
      "nodeContext" : "((ExitTypeSpan)span).inject(contextCarrier)",
      "nodeType" : "MethodInvocation",
      "astNodeNumber" : 8,
      "astHeight" : 5
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 45,
        "startLineNumber" : 55,
        "startColumnNumber" : 12,
        "endLineNumber" : 55,
        "endColumnNumber" : 57
      },
      "nodeContext" : "((ExitTypeSpan)span).inject(contextCarrier);\n",
      "nodeType" : "ExpressionStatement",
      "astNodeNumber" : 9,
      "astHeight" : 6
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
      "nodePosition" : {
        "charLength" : 695,
        "startLineNumber" : 43,
        "startColumnNumber" : 43,
        "endLineNumber" : 61,
        "endColumnNumber" : 9
      },
      "nodeContext" : "{\n  String operationName=span.getOperationName();\n  if (PENDING_OP_NAME.equals(operationName)) {\n    return;\n  }\n  String peer=getPeerHost();\n  if (peer == null) {\n    return;\n  }\n  span.setPeer(peer);\n  ContextCarrier contextCarrier=new ContextCarrier();\n  ((ExitTypeSpan)span).inject(contextCarrier);\n  SWContextCarrier swContextCarrier=getSWContextCarrier();\n  swContextCarrier.setContextCarrier(contextCarrier);\n  swContextCarrier.setOperationName(operationName);\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 68,
      "astHeight" : 7
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 730,
        "startLineNumber" : 43,
        "startColumnNumber" : 8,
        "endLineNumber" : 61,
        "endColumnNumber" : 9
      },
      "nodeContext" : "if (span != null && span.isExit()) {\n  String operationName=span.getOperationName();\n  if (PENDING_OP_NAME.equals(operationName)) {\n    return;\n  }\n  String peer=getPeerHost();\n  if (peer == null) {\n    return;\n  }\n  span.setPeer(peer);\n  ContextCarrier contextCarrier=new ContextCarrier();\n  ((ExitTypeSpan)span).inject(contextCarrier);\n  SWContextCarrier swContextCarrier=getSWContextCarrier();\n  swContextCarrier.setContextCarrier(contextCarrier);\n  swContextCarrier.setOperationName(operationName);\n}\n",
      "nodeType" : "IfStatement",
      "astNodeNumber" : 76,
      "astHeight" : 8
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
      "nodePosition" : {
        "charLength" : 812,
        "startLineNumber" : 39,
        "startColumnNumber" : 52,
        "endLineNumber" : 62,
        "endColumnNumber" : 5
      },
      "nodeContext" : "{\n  if (span != null && span.isExit()) {\n    String operationName=span.getOperationName();\n    if (PENDING_OP_NAME.equals(operationName)) {\n      return;\n    }\n    String peer=getPeerHost();\n    if (peer == null) {\n      return;\n    }\n    span.setPeer(peer);\n    ContextCarrier contextCarrier=new ContextCarrier();\n    ((ExitTypeSpan)span).inject(contextCarrier);\n    SWContextCarrier swContextCarrier=getSWContextCarrier();\n    swContextCarrier.setContextCarrier(contextCarrier);\n    swContextCarrier.setOperationName(operationName);\n  }\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 77,
      "astHeight" : 9
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
      "nodePosition" : {
        "charLength" : 1383,
        "startLineNumber" : 32,
        "startColumnNumber" : 4,
        "endLineNumber" : 62,
        "endColumnNumber" : 5
      },
      "nodeContext" : "/** \n * In  {@link ClientTracingFilterInterceptor}, we create  {@link ExitSpan} without op name and peer information, andwe use  {@link AnnotationInterceptor.Rpc} and {@link ClientDestTracingFilterInterceptor} to put op name andpeer information into LocalContext, but the order of these two interceptors are uncertain, so after each interceptor, we check if the op name and peer information are exists in LocalContext, if it exists, we set it to span and inject to contextCarrier.\n */\nstatic void tryInjectContext(AbstractSpan span){\n  if (span != null && span.isExit()) {\n    String operationName=span.getOperationName();\n    if (PENDING_OP_NAME.equals(operationName)) {\n      return;\n    }\n    String peer=getPeerHost();\n    if (peer == null) {\n      return;\n    }\n    span.setPeer(peer);\n    ContextCarrier contextCarrier=new ContextCarrier();\n    ((ExitTypeSpan)span).inject(contextCarrier);\n    SWContextCarrier swContextCarrier=getSWContextCarrier();\n    swContextCarrier.setContextCarrier(contextCarrier);\n    swContextCarrier.setOperationName(operationName);\n  }\n}\n",
      "nodeType" : "MethodDeclaration",
      "astNodeNumber" : 86,
      "astHeight" : 10
    } ],
    "currentLineData" : {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 45,
        "startLineNumber" : 55,
        "startColumnNumber" : 12,
        "endLineNumber" : 55,
        "endColumnNumber" : 57
      },
      "nodeContext" : "((ExitTypeSpan)span).inject(contextCarrier);\n",
      "nodeType" : "ExpressionStatement",
      "astNodeNumber" : 9,
      "astHeight" : 6
    },
    "tokenLength" : 2,
    "type" : "org.apache.skywalking.apm.agent.core.context.trace.ExitTypeSpan"
  } ],
  "positionList" : [ {
    "charLength" : 19,
    "startLineNumber" : 55,
    "startColumnNumber" : 13,
    "endLineNumber" : 55,
    "endColumnNumber" : 32
  } ],
  "layoutRelationDataList" : [ ]
}