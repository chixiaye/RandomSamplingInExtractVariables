{
  "id" : 170,
  "expression" : "6",
  "projectName" : "DrKLO@Telegram",
  "commitID" : "11fbfb1329df700b203e1852a71c4c11b5ab12f4",
  "filePath" : "/TMessagesProj/src/main/java/org/telegram/ui/Components/Premium/GiftPremiumBottomSheet.java",
  "occurrences" : 1,
  "isArithmeticExpression" : 0,
  "isGetTypeMethod" : 0,
  "expressionList" : [ {
    "nodeContext" : "6",
    "nodeType" : "NumberLiteral",
    "nodePosition" : {
      "charLength" : 1,
      "startLineNumber" : 283,
      "startColumnNumber" : 97,
      "endLineNumber" : 283,
      "endColumnNumber" : 98
    },
    "astNodeNumber" : 1,
    "astHeight" : 1,
    "parentDataList" : [ {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.InfixExpression,rightOperand]",
      "nodePosition" : {
        "charLength" : 15,
        "startLineNumber" : 283,
        "startColumnNumber" : 84,
        "endLineNumber" : 283,
        "endColumnNumber" : 99
      },
      "nodeContext" : "Math.pow(10,6)",
      "nodeType" : "MethodInvocation",
      "astNodeNumber" : 5,
      "astHeight" : 2
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.ParenthesizedExpression,expression]",
      "nodePosition" : {
        "charLength" : 53,
        "startLineNumber" : 283,
        "startColumnNumber" : 46,
        "endLineNumber" : 283,
        "endColumnNumber" : 99
      },
      "nodeContext" : "offerDetails.getPriceAmountMicros() / Math.pow(10,6)",
      "nodeType" : "InfixExpression",
      "astNodeNumber" : 9,
      "astHeight" : 3
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.InfixExpression,leftOperand]",
      "nodePosition" : {
        "charLength" : 55,
        "startLineNumber" : 283,
        "startColumnNumber" : 45,
        "endLineNumber" : 283,
        "endColumnNumber" : 100
      },
      "nodeContext" : "(offerDetails.getPriceAmountMicros() / Math.pow(10,6))",
      "nodeType" : "ParenthesizedExpression",
      "astNodeNumber" : 10,
      "astHeight" : 4
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.ParenthesizedExpression,expression]",
      "nodePosition" : {
        "charLength" : 140,
        "startLineNumber" : 283,
        "startColumnNumber" : 45,
        "endLineNumber" : 283,
        "endColumnNumber" : 185
      },
      "nodeContext" : "(offerDetails.getPriceAmountMicros() / Math.pow(10,6)) * Math.pow(10,BillingController.getInstance().getCurrencyExp(giftPremium.currency))",
      "nodeType" : "InfixExpression",
      "astNodeNumber" : 23,
      "astHeight" : 5
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.CastExpression,expression]",
      "nodePosition" : {
        "charLength" : 142,
        "startLineNumber" : 283,
        "startColumnNumber" : 44,
        "endLineNumber" : 283,
        "endColumnNumber" : 186
      },
      "nodeContext" : "((offerDetails.getPriceAmountMicros() / Math.pow(10,6)) * Math.pow(10,BillingController.getInstance().getCurrencyExp(giftPremium.currency)))",
      "nodeType" : "ParenthesizedExpression",
      "astNodeNumber" : 24,
      "astHeight" : 6
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.Assignment,rightHandSide]",
      "nodePosition" : {
        "charLength" : 149,
        "startLineNumber" : 283,
        "startColumnNumber" : 37,
        "endLineNumber" : 283,
        "endColumnNumber" : 186
      },
      "nodeContext" : "(long)((offerDetails.getPriceAmountMicros() / Math.pow(10,6)) * Math.pow(10,BillingController.getInstance().getCurrencyExp(giftPremium.currency)))",
      "nodeType" : "CastExpression",
      "astNodeNumber" : 26,
      "astHeight" : 7
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.ExpressionStatement,expression]",
      "nodePosition" : {
        "charLength" : 170,
        "startLineNumber" : 283,
        "startColumnNumber" : 16,
        "endLineNumber" : 283,
        "endColumnNumber" : 186
      },
      "nodeContext" : "giftPremium.amount=(long)((offerDetails.getPriceAmountMicros() / Math.pow(10,6)) * Math.pow(10,BillingController.getInstance().getCurrencyExp(giftPremium.currency)))",
      "nodeType" : "Assignment",
      "astNodeNumber" : 30,
      "astHeight" : 8
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 171,
        "startLineNumber" : 283,
        "startColumnNumber" : 16,
        "endLineNumber" : 283,
        "endColumnNumber" : 187
      },
      "nodeContext" : "giftPremium.amount=(long)((offerDetails.getPriceAmountMicros() / Math.pow(10,6)) * Math.pow(10,BillingController.getInstance().getCurrencyExp(giftPremium.currency)));\n",
      "nodeType" : "ExpressionStatement",
      "astNodeNumber" : 31,
      "astHeight" : 9
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,thenStatement]",
      "nodePosition" : {
        "charLength" : 1914,
        "startLineNumber" : 278,
        "startColumnNumber" : 100,
        "endLineNumber" : 302,
        "endColumnNumber" : 13
      },
      "nodeContext" : "{\n  TLRPC.TL_inputStorePaymentGiftPremium giftPremium=new TLRPC.TL_inputStorePaymentGiftPremium();\n  giftPremium.user_id=MessagesController.getInstance(currentAccount).getInputUser(user);\n  ProductDetails.OneTimePurchaseOfferDetails offerDetails=tier.googlePlayProductDetails.getOneTimePurchaseOfferDetails();\n  giftPremium.currency=offerDetails.getPriceCurrencyCode();\n  giftPremium.amount=(long)((offerDetails.getPriceAmountMicros() / Math.pow(10,6)) * Math.pow(10,BillingController.getInstance().getCurrencyExp(giftPremium.currency)));\n  BillingController.getInstance().addResultListener(tier.giftOption.store_product,billingResult -> {\n    if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK) {\n      AndroidUtilities.runOnUIThread(() -> onGiftSuccess(true));\n    }\n  }\n);\n  TLRPC.TL_payments_canPurchasePremium req=new TLRPC.TL_payments_canPurchasePremium();\n  req.purpose=giftPremium;\n  ConnectionsManager.getInstance(currentAccount).sendRequest(req,(response,error) -> AndroidUtilities.runOnUIThread(() -> {\n    if (response instanceof TLRPC.TL_boolTrue) {\n      BillingController.getInstance().launchBillingFlow(getBaseFragment().getParentActivity(),AccountInstance.getInstance(currentAccount),giftPremium,Collections.singletonList(BillingFlowParams.ProductDetailsParams.newBuilder().setProductDetails(tier.googlePlayProductDetails).build()));\n    }\n else     if (error != null) {\n      AlertsCreator.processError(currentAccount,error,getBaseFragment(),req);\n    }\n  }\n));\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 198,
      "astHeight" : 17
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 2002,
        "startLineNumber" : 278,
        "startColumnNumber" : 12,
        "endLineNumber" : 302,
        "endColumnNumber" : 13
      },
      "nodeContext" : "if (BillingController.getInstance().isReady() && tier.googlePlayProductDetails != null) {\n  TLRPC.TL_inputStorePaymentGiftPremium giftPremium=new TLRPC.TL_inputStorePaymentGiftPremium();\n  giftPremium.user_id=MessagesController.getInstance(currentAccount).getInputUser(user);\n  ProductDetails.OneTimePurchaseOfferDetails offerDetails=tier.googlePlayProductDetails.getOneTimePurchaseOfferDetails();\n  giftPremium.currency=offerDetails.getPriceCurrencyCode();\n  giftPremium.amount=(long)((offerDetails.getPriceAmountMicros() / Math.pow(10,6)) * Math.pow(10,BillingController.getInstance().getCurrencyExp(giftPremium.currency)));\n  BillingController.getInstance().addResultListener(tier.giftOption.store_product,billingResult -> {\n    if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK) {\n      AndroidUtilities.runOnUIThread(() -> onGiftSuccess(true));\n    }\n  }\n);\n  TLRPC.TL_payments_canPurchasePremium req=new TLRPC.TL_payments_canPurchasePremium();\n  req.purpose=giftPremium;\n  ConnectionsManager.getInstance(currentAccount).sendRequest(req,(response,error) -> AndroidUtilities.runOnUIThread(() -> {\n    if (response instanceof TLRPC.TL_boolTrue) {\n      BillingController.getInstance().launchBillingFlow(getBaseFragment().getParentActivity(),AccountInstance.getInstance(currentAccount),giftPremium,Collections.singletonList(BillingFlowParams.ProductDetailsParams.newBuilder().setProductDetails(tier.googlePlayProductDetails).build()));\n    }\n else     if (error != null) {\n      AlertsCreator.processError(currentAccount,error,getBaseFragment(),req);\n    }\n  }\n));\n}\n",
      "nodeType" : "IfStatement",
      "astNodeNumber" : 210,
      "astHeight" : 18
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.IfStatement,elseStatement]",
      "nodePosition" : {
        "charLength" : 2028,
        "startLineNumber" : 277,
        "startColumnNumber" : 15,
        "endLineNumber" : 303,
        "endColumnNumber" : 9
      },
      "nodeContext" : "{\n  if (BillingController.getInstance().isReady() && tier.googlePlayProductDetails != null) {\n    TLRPC.TL_inputStorePaymentGiftPremium giftPremium=new TLRPC.TL_inputStorePaymentGiftPremium();\n    giftPremium.user_id=MessagesController.getInstance(currentAccount).getInputUser(user);\n    ProductDetails.OneTimePurchaseOfferDetails offerDetails=tier.googlePlayProductDetails.getOneTimePurchaseOfferDetails();\n    giftPremium.currency=offerDetails.getPriceCurrencyCode();\n    giftPremium.amount=(long)((offerDetails.getPriceAmountMicros() / Math.pow(10,6)) * Math.pow(10,BillingController.getInstance().getCurrencyExp(giftPremium.currency)));\n    BillingController.getInstance().addResultListener(tier.giftOption.store_product,billingResult -> {\n      if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK) {\n        AndroidUtilities.runOnUIThread(() -> onGiftSuccess(true));\n      }\n    }\n);\n    TLRPC.TL_payments_canPurchasePremium req=new TLRPC.TL_payments_canPurchasePremium();\n    req.purpose=giftPremium;\n    ConnectionsManager.getInstance(currentAccount).sendRequest(req,(response,error) -> AndroidUtilities.runOnUIThread(() -> {\n      if (response instanceof TLRPC.TL_boolTrue) {\n        BillingController.getInstance().launchBillingFlow(getBaseFragment().getParentActivity(),AccountInstance.getInstance(currentAccount),giftPremium,Collections.singletonList(BillingFlowParams.ProductDetailsParams.newBuilder().setProductDetails(tier.googlePlayProductDetails).build()));\n      }\n else       if (error != null) {\n        AlertsCreator.processError(currentAccount,error,getBaseFragment(),req);\n      }\n    }\n));\n  }\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 211,
      "astHeight" : 19
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 2824,
        "startLineNumber" : 265,
        "startColumnNumber" : 8,
        "endLineNumber" : 303,
        "endColumnNumber" : 9
      },
      "nodeContext" : "if (BuildVars.useInvoiceBilling()) {\n  if (getBaseFragment().getParentActivity() instanceof LaunchActivity) {\n    Uri uri=Uri.parse(tier.giftOption.bot_url);\n    if (uri.getHost().equals(\"t.me\")) {\n      if (!uri.getPath().startsWith(\"/$\") && !uri.getPath().startsWith(\"/invoice/\")) {\n        ((LaunchActivity)getBaseFragment().getParentActivity()).setNavigateToPremiumBot(true);\n      }\n else {\n        ((LaunchActivity)getBaseFragment().getParentActivity()).setNavigateToPremiumGiftCallback(() -> onGiftSuccess(false));\n      }\n    }\n    Browser.openUrl(getBaseFragment().getParentActivity(),tier.giftOption.bot_url);\n  }\n}\n else {\n  if (BillingController.getInstance().isReady() && tier.googlePlayProductDetails != null) {\n    TLRPC.TL_inputStorePaymentGiftPremium giftPremium=new TLRPC.TL_inputStorePaymentGiftPremium();\n    giftPremium.user_id=MessagesController.getInstance(currentAccount).getInputUser(user);\n    ProductDetails.OneTimePurchaseOfferDetails offerDetails=tier.googlePlayProductDetails.getOneTimePurchaseOfferDetails();\n    giftPremium.currency=offerDetails.getPriceCurrencyCode();\n    giftPremium.amount=(long)((offerDetails.getPriceAmountMicros() / Math.pow(10,6)) * Math.pow(10,BillingController.getInstance().getCurrencyExp(giftPremium.currency)));\n    BillingController.getInstance().addResultListener(tier.giftOption.store_product,billingResult -> {\n      if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK) {\n        AndroidUtilities.runOnUIThread(() -> onGiftSuccess(true));\n      }\n    }\n);\n    TLRPC.TL_payments_canPurchasePremium req=new TLRPC.TL_payments_canPurchasePremium();\n    req.purpose=giftPremium;\n    ConnectionsManager.getInstance(currentAccount).sendRequest(req,(response,error) -> AndroidUtilities.runOnUIThread(() -> {\n      if (response instanceof TLRPC.TL_boolTrue) {\n        BillingController.getInstance().launchBillingFlow(getBaseFragment().getParentActivity(),AccountInstance.getInstance(currentAccount),giftPremium,Collections.singletonList(BillingFlowParams.ProductDetailsParams.newBuilder().setProductDetails(tier.googlePlayProductDetails).build()));\n      }\n else       if (error != null) {\n        AlertsCreator.processError(currentAccount,error,getBaseFragment(),req);\n      }\n    }\n));\n  }\n}\n",
      "nodeType" : "IfStatement",
      "astNodeNumber" : 304,
      "astHeight" : 20
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
      "nodePosition" : {
        "charLength" : 2901,
        "startLineNumber" : 263,
        "startColumnNumber" : 33,
        "endLineNumber" : 304,
        "endColumnNumber" : 5
      },
      "nodeContext" : "{\n  GiftTier tier=giftTiers.get(selectedTierIndex);\n  if (BuildVars.useInvoiceBilling()) {\n    if (getBaseFragment().getParentActivity() instanceof LaunchActivity) {\n      Uri uri=Uri.parse(tier.giftOption.bot_url);\n      if (uri.getHost().equals(\"t.me\")) {\n        if (!uri.getPath().startsWith(\"/$\") && !uri.getPath().startsWith(\"/invoice/\")) {\n          ((LaunchActivity)getBaseFragment().getParentActivity()).setNavigateToPremiumBot(true);\n        }\n else {\n          ((LaunchActivity)getBaseFragment().getParentActivity()).setNavigateToPremiumGiftCallback(() -> onGiftSuccess(false));\n        }\n      }\n      Browser.openUrl(getBaseFragment().getParentActivity(),tier.giftOption.bot_url);\n    }\n  }\n else {\n    if (BillingController.getInstance().isReady() && tier.googlePlayProductDetails != null) {\n      TLRPC.TL_inputStorePaymentGiftPremium giftPremium=new TLRPC.TL_inputStorePaymentGiftPremium();\n      giftPremium.user_id=MessagesController.getInstance(currentAccount).getInputUser(user);\n      ProductDetails.OneTimePurchaseOfferDetails offerDetails=tier.googlePlayProductDetails.getOneTimePurchaseOfferDetails();\n      giftPremium.currency=offerDetails.getPriceCurrencyCode();\n      giftPremium.amount=(long)((offerDetails.getPriceAmountMicros() / Math.pow(10,6)) * Math.pow(10,BillingController.getInstance().getCurrencyExp(giftPremium.currency)));\n      BillingController.getInstance().addResultListener(tier.giftOption.store_product,billingResult -> {\n        if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK) {\n          AndroidUtilities.runOnUIThread(() -> onGiftSuccess(true));\n        }\n      }\n);\n      TLRPC.TL_payments_canPurchasePremium req=new TLRPC.TL_payments_canPurchasePremium();\n      req.purpose=giftPremium;\n      ConnectionsManager.getInstance(currentAccount).sendRequest(req,(response,error) -> AndroidUtilities.runOnUIThread(() -> {\n        if (response instanceof TLRPC.TL_boolTrue) {\n          BillingController.getInstance().launchBillingFlow(getBaseFragment().getParentActivity(),AccountInstance.getInstance(currentAccount),giftPremium,Collections.singletonList(BillingFlowParams.ProductDetailsParams.newBuilder().setProductDetails(tier.googlePlayProductDetails).build()));\n        }\n else         if (error != null) {\n          AlertsCreator.processError(currentAccount,error,getBaseFragment(),req);\n        }\n      }\n));\n    }\n  }\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 314,
      "astHeight" : 21
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
      "nodePosition" : {
        "charLength" : 2930,
        "startLineNumber" : 263,
        "startColumnNumber" : 4,
        "endLineNumber" : 304,
        "endColumnNumber" : 5
      },
      "nodeContext" : "private void onGiftPremium(){\n  GiftTier tier=giftTiers.get(selectedTierIndex);\n  if (BuildVars.useInvoiceBilling()) {\n    if (getBaseFragment().getParentActivity() instanceof LaunchActivity) {\n      Uri uri=Uri.parse(tier.giftOption.bot_url);\n      if (uri.getHost().equals(\"t.me\")) {\n        if (!uri.getPath().startsWith(\"/$\") && !uri.getPath().startsWith(\"/invoice/\")) {\n          ((LaunchActivity)getBaseFragment().getParentActivity()).setNavigateToPremiumBot(true);\n        }\n else {\n          ((LaunchActivity)getBaseFragment().getParentActivity()).setNavigateToPremiumGiftCallback(() -> onGiftSuccess(false));\n        }\n      }\n      Browser.openUrl(getBaseFragment().getParentActivity(),tier.giftOption.bot_url);\n    }\n  }\n else {\n    if (BillingController.getInstance().isReady() && tier.googlePlayProductDetails != null) {\n      TLRPC.TL_inputStorePaymentGiftPremium giftPremium=new TLRPC.TL_inputStorePaymentGiftPremium();\n      giftPremium.user_id=MessagesController.getInstance(currentAccount).getInputUser(user);\n      ProductDetails.OneTimePurchaseOfferDetails offerDetails=tier.googlePlayProductDetails.getOneTimePurchaseOfferDetails();\n      giftPremium.currency=offerDetails.getPriceCurrencyCode();\n      giftPremium.amount=(long)((offerDetails.getPriceAmountMicros() / Math.pow(10,6)) * Math.pow(10,BillingController.getInstance().getCurrencyExp(giftPremium.currency)));\n      BillingController.getInstance().addResultListener(tier.giftOption.store_product,billingResult -> {\n        if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK) {\n          AndroidUtilities.runOnUIThread(() -> onGiftSuccess(true));\n        }\n      }\n);\n      TLRPC.TL_payments_canPurchasePremium req=new TLRPC.TL_payments_canPurchasePremium();\n      req.purpose=giftPremium;\n      ConnectionsManager.getInstance(currentAccount).sendRequest(req,(response,error) -> AndroidUtilities.runOnUIThread(() -> {\n        if (response instanceof TLRPC.TL_boolTrue) {\n          BillingController.getInstance().launchBillingFlow(getBaseFragment().getParentActivity(),AccountInstance.getInstance(currentAccount),giftPremium,Collections.singletonList(BillingFlowParams.ProductDetailsParams.newBuilder().setProductDetails(tier.googlePlayProductDetails).build()));\n        }\n else         if (error != null) {\n          AlertsCreator.processError(currentAccount,error,getBaseFragment(),req);\n        }\n      }\n));\n    }\n  }\n}\n",
      "nodeType" : "MethodDeclaration",
      "astNodeNumber" : 318,
      "astHeight" : 22
    } ],
    "currentLineData" : {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 171,
        "startLineNumber" : 283,
        "startColumnNumber" : 16,
        "endLineNumber" : 283,
        "endColumnNumber" : 187
      },
      "nodeContext" : "giftPremium.amount=(long)((offerDetails.getPriceAmountMicros() / Math.pow(10,6)) * Math.pow(10,BillingController.getInstance().getCurrencyExp(giftPremium.currency)));\n",
      "nodeType" : "ExpressionStatement",
      "astNodeNumber" : 31,
      "astHeight" : 9
    },
    "tokenLength" : 1,
    "type" : "int"
  } ],
  "positionList" : [ {
    "charLength" : 1,
    "startLineNumber" : 283,
    "startColumnNumber" : 97,
    "endLineNumber" : 283,
    "endColumnNumber" : 98
  } ],
  "layoutRelationDataList" : [ ]
}