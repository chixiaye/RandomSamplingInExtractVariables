{
  "id" : 498,
  "expression" : "UpgradePatchRetry",
  "projectName" : "Tencent@tinker",
  "commitID" : "df9e1d29420d53a650ab73569d828a22e3cfe728",
  "filePath" : "/tinker-android/tinker-android-lib/src/main/java/com/tencent/tinker/lib/reporter/DefaultLoadReporter.java",
  "occurrences" : 1,
  "isArithmeticExpression" : 0,
  "isGetTypeMethod" : 0,
  "expressionList" : [ {
    "nodeContext" : "UpgradePatchRetry",
    "nodeType" : "SimpleName",
    "nodePosition" : {
      "charLength" : 17,
      "startLineNumber" : 101,
      "startColumnNumber" : 8,
      "endLineNumber" : 101,
      "endColumnNumber" : 25
    },
    "astNodeNumber" : 1,
    "astHeight" : 1,
    "parentDataList" : [ {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.MethodInvocation,expression]",
      "nodePosition" : {
        "charLength" : 38,
        "startLineNumber" : 101,
        "startColumnNumber" : 8,
        "endLineNumber" : 101,
        "endColumnNumber" : 46
      },
      "nodeContext" : "UpgradePatchRetry.getInstance(context)",
      "nodeType" : "MethodInvocation",
      "astNodeNumber" : 4,
      "astHeight" : 2
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.ExpressionStatement,expression]",
      "nodePosition" : {
        "charLength" : 71,
        "startLineNumber" : 101,
        "startColumnNumber" : 8,
        "endLineNumber" : 101,
        "endColumnNumber" : 79
      },
      "nodeContext" : "UpgradePatchRetry.getInstance(context).onPatchResetMaxCheck(newVersion)",
      "nodeType" : "MethodInvocation",
      "astNodeNumber" : 7,
      "astHeight" : 3
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 72,
        "startLineNumber" : 101,
        "startColumnNumber" : 8,
        "endLineNumber" : 101,
        "endColumnNumber" : 80
      },
      "nodeContext" : "UpgradePatchRetry.getInstance(context).onPatchResetMaxCheck(newVersion);\n",
      "nodeType" : "ExpressionStatement",
      "astNodeNumber" : 8,
      "astHeight" : 4
    }, {
      "locationInParent" : "ChildProperty[org.eclipse.jdt.core.dom.MethodDeclaration,body]",
      "nodePosition" : {
        "charLength" : 1257,
        "startLineNumber" : 80,
        "startColumnNumber" : 130,
        "endLineNumber" : 113,
        "endColumnNumber" : 5
      },
      "nodeContext" : "{\n  ShareTinkerLog.i(TAG,\"patch loadReporter onLoadPatchVersionChanged: patch version change from \" + oldVersion + \" to \"+ newVersion);\n  if (oldVersion == null || newVersion == null) {\n    return;\n  }\n  if (oldVersion.equals(newVersion)) {\n    return;\n  }\n  if (!Tinker.with(context).isMainProcess()) {\n    return;\n  }\n  UpgradePatchRetry.getInstance(context).onPatchResetMaxCheck(newVersion);\n  File[] files=patchDirectoryFile.listFiles();\n  if (files != null) {\n    for (    File file : files) {\n      String name=file.getName();\n      if (file.isDirectory() && !name.equals(currentPatchName)) {\n        SharePatchFileUtil.deleteDir(file);\n      }\n    }\n  }\n}\n",
      "nodeType" : "Block",
      "astNodeNumber" : 92,
      "astHeight" : 10
    }, {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.TypeDeclaration,bodyDeclarations]",
      "nodePosition" : {
        "charLength" : 1881,
        "startLineNumber" : 68,
        "startColumnNumber" : 4,
        "endLineNumber" : 113,
        "endColumnNumber" : 5
      },
      "nodeContext" : "/** \n * we can only handle patch version change in the main process, we will need to kill all other process to ensure that all process's code is the same. you can delete the old patch version file as  {@link DefaultLoadReporter#onLoadPatchVersionChanged(String,String,File,String)}or you can restart your other process here\n * @param oldVersion\n * @param newVersion\n * @param patchDirectoryFile\n * @param currentPatchName\n */\n@Override public void onLoadPatchVersionChanged(String oldVersion,String newVersion,File patchDirectoryFile,String currentPatchName){\n  ShareTinkerLog.i(TAG,\"patch loadReporter onLoadPatchVersionChanged: patch version change from \" + oldVersion + \" to \"+ newVersion);\n  if (oldVersion == null || newVersion == null) {\n    return;\n  }\n  if (oldVersion.equals(newVersion)) {\n    return;\n  }\n  if (!Tinker.with(context).isMainProcess()) {\n    return;\n  }\n  UpgradePatchRetry.getInstance(context).onPatchResetMaxCheck(newVersion);\n  File[] files=patchDirectoryFile.listFiles();\n  if (files != null) {\n    for (    File file : files) {\n      String name=file.getName();\n      if (file.isDirectory() && !name.equals(currentPatchName)) {\n        SharePatchFileUtil.deleteDir(file);\n      }\n    }\n  }\n}\n",
      "nodeType" : "MethodDeclaration",
      "astNodeNumber" : 115,
      "astHeight" : 11
    } ],
    "currentLineData" : {
      "locationInParent" : "ChildListProperty[org.eclipse.jdt.core.dom.Block,statements]",
      "nodePosition" : {
        "charLength" : 72,
        "startLineNumber" : 101,
        "startColumnNumber" : 8,
        "endLineNumber" : 101,
        "endColumnNumber" : 80
      },
      "nodeContext" : "UpgradePatchRetry.getInstance(context).onPatchResetMaxCheck(newVersion);\n",
      "nodeType" : "ExpressionStatement",
      "astNodeNumber" : 8,
      "astHeight" : 4
    },
    "tokenLength" : 1,
    "type" : "com.tencent.tinker.lib.util.UpgradePatchRetry"
  } ],
  "positionList" : [ {
    "charLength" : 17,
    "startLineNumber" : 101,
    "startColumnNumber" : 8,
    "endLineNumber" : 101,
    "endColumnNumber" : 25
  } ],
  "layoutRelationDataList" : [ ]
}